function t(t){return t&&t.__esModule?t.default:t}function e(){return function(){throw new Error("Unimplemented abstract method.")}()}var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var r="5.3.3",n=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+("v"+r.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),s={ADD:"add",REMOVE:"remove"},a={PROPERTYCHANGE:"propertychange"},h="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),r=1,n=arguments.length;r<n;++r){var s=i[r];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a])}return o};function l(t){for(var e in t)delete t[e]}function u(t){var e=[];for(var i in t)e.push(t[i]);return e}function c(t){var e;for(e in t)return!1;return!e}function p(t,e,i,o){for(var r,n=0,s=t.length;n<s;++n)if((r=t[n]).listener===e&&r.bindTo===i)return o&&(r.deleteIndex=n),r}function d(t,e){var i=f(t);return i?i[e]:void 0}function f(t,e){var i=t.ol_lm;return!i&&e&&(i=t.ol_lm={}),i}function g(t,e){var i=d(t,e);if(i){for(var o=0,r=i.length;o<r;++o)t.removeEventListener(e,i[o].boundListener),l(i[o]);i.length=0;var n=f(t);n&&(delete n[e],0===Object.keys(n).length&&function(t){delete t.ol_lm}(t))}}function _(t,e,i,o,r){var n=f(t,!0),s=n[e];s||(s=n[e]=[]);var a=p(s,i,o,!1);return a?r||(a.callOnce=!1):(a={bindTo:o,callOnce:!!r,listener:i,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var i=t.listener,o=t.bindTo||t.target;return t.callOnce&&m(t),i.call(o,e)};return t.boundListener=e,e}(a)),s.push(a)),a}function y(t,e,i,o){return _(t,e,i,o,!0)}function v(t,e,i,o){var r=d(t,e);if(r){var n=p(r,i,o,!0);n&&m(n)}}function m(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=d(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&g(t.target,t.type)}l(t)}}function E(t){var e=f(t);if(e)for(var i in e)g(t,i)}var T=function(){this.disposed_=!1};T.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},T.prototype.disposeInternal=function(){};var C=T;function x(){return!0}function R(){return!1}function S(){}var w=function(t){this.propagationStopped,this.type=t,this.target=null};function L(t){t.stopPropagation()}w.prototype.preventDefault=function(){this.propagationStopped=!0},w.prototype.stopPropagation=function(){this.propagationStopped=!0};var I=w,O=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new I(t):t,i=e.type;e.target=this;var o,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var n=0,s=r.length;n<s;++n)if(!1===r[n].call(this,e)||e.propagationStopped){o=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,S);delete this.dispatching_[i]}return o}},e.prototype.disposeInternal=function(){E(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var o=i.indexOf(e);t in this.pendingRemovals_?(i[o]=S,++this.pendingRemovals_[t]):(i.splice(o,1),0===i.length&&delete this.listeners_[t])}},e}(C),P={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};function M(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)m(t[e]);else m(t)}var b=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(P.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),r=0;r<i;++r)o[r]=_(this,t[r],e);return o}return _(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),r=0;r<i;++r)o[r]=y(this,t[r],e);return o}return y(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,o=t.length;i<o;++i)v(this,t[i],e);else v(this,t,e)},e}(O),A=function(t){function e(e,i,o){t.call(this,e),this.key=i,this.oldValue=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),F={};function N(t){return F.hasOwnProperty(t)?F[t]:F[t]="change:"+t}var D=function(t){function e(e){t.call(this),o(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return h({},this.values_)},e.prototype.notify=function(t,e){var i;i=N(t),this.dispatchEvent(new A(i,t,e)),i=a.PROPERTYCHANGE,this.dispatchEvent(new A(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var o=this.values_[t];this.values_[t]=e,o!==e&&this.notify(t,o)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(b),G="length",k=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),j=function(t){function e(e,i){t.call(this);var o=i||{};if(this.unique_=!!o.unique,this.array_=e||[],this.unique_)for(var r=0,n=this.array_.length;r<n;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,o=e.length;i<o;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(G)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new k(s.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,o=e.length;i<o;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new k(s.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new k(s.REMOVE,o)),this.dispatchEvent(new k(s.ADD,e))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(G,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==e)throw new n(58)},e}(D),Y=function(t){function e(e,i,o){t.call(this,e),this.map=i,this.frameState=void 0!==o?o:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),X=function(t){function e(e,i,o,r,n){t.call(this,e,i,n),this.originalEvent=o,this.pixel=i.getEventPixel(o),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Y),z="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",W=-1!==z.indexOf("firefox"),U=-1!==z.indexOf("safari")&&-1==z.indexOf("chrom"),Z=-1!==z.indexOf("webkit")&&-1==z.indexOf("edge"),V=-1!==z.indexOf("macintosh"),B=window.devicePixelRatio||1,H=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),K=(navigator,"ontouchstart"in window),q="PointerEvent"in window,J=!!navigator.msPointerEnabled,Q={SINGLECLICK:"singleclick",CLICK:P.CLICK,DBLCLICK:P.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},tt=function(t){function e(e,i,o,r,n){t.call(this,e,i,o.originalEvent,r,n),this.pointerEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(X),et={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},it=function(t,e){this.dispatcher=t,this.mapping_=e};it.prototype.getEvents=function(){return Object.keys(this.mapping_)},it.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var ot=it;function rt(t){if(!this.isEventSimulatedFromTouch_(t)){1..toString()in this.pointerMap&&this.cancel(t);var e=lt(t,this.dispatcher);this.pointerMap[1..toString()]=t,this.dispatcher.down(e,t)}}function nt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=lt(t,this.dispatcher);this.dispatcher.move(e,t)}}function st(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[1..toString()];if(e&&e.button===t.button){var i=lt(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function at(t){if(!this.isEventSimulatedFromTouch_(t)){var e=lt(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function ht(t){if(!this.isEventSimulatedFromTouch_(t)){var e=lt(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function lt(t,e){var i=e.cloneEvent(t,t),o=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),o()},i.pointerId=1,i.isPrimary=!0,i.pointerType="mouse",i}var ut=function(t){function e(e){var i={mousedown:rt,mousemove:nt,mouseup:st,mouseover:at,mouseout:ht};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,o=t.clientY,r=0,n=e.length,s=void 0;r<n&&(s=e[r]);r++){var a=Math.abs(i-s[0]),h=Math.abs(o-s[1]);if(a<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=lt(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[1..toString()]},e}(ot),ct=["","unavailable","touch","pen","mouse"];function pt(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function dt(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function ft(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function gt(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function _t(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function yt(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function vt(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function mt(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var Et=function(t){function e(e){var i={MSPointerDown:pt,MSPointerMove:dt,MSPointerUp:ft,MSPointerOut:gt,MSPointerOver:_t,MSPointerCancel:yt,MSGotPointerCapture:mt,MSLostPointerCapture:vt};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=ct[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(ot);function Tt(t){this.dispatcher.fireNativeEvent(t)}function Ct(t){this.dispatcher.fireNativeEvent(t)}function xt(t){this.dispatcher.fireNativeEvent(t)}function Rt(t){this.dispatcher.fireNativeEvent(t)}function St(t){this.dispatcher.fireNativeEvent(t)}function wt(t){this.dispatcher.fireNativeEvent(t)}function Lt(t){this.dispatcher.fireNativeEvent(t)}function It(t){this.dispatcher.fireNativeEvent(t)}var Ot=function(t){function e(e){var i={pointerdown:Tt,pointermove:Ct,pointerup:xt,pointerout:Rt,pointerover:St,pointercancel:wt,gotpointercapture:It,lostpointercapture:Lt};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ot),Pt=!1,Mt=function(t){function e(e,i,o){t.call(this,e),this.originalEvent=i;var r=o||{};this.buttons=function(t){var e;if(t.buttons||Pt)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(r),this.pressure=function(t,e){var i=0;i=t.pressure?t.pressure:e?.5:0;return i}(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I);!function(){try{var t=new MouseEvent("click",{buttons:1});Pt=1===t.buttons}catch(t){}}();var bt=Mt;function At(t,e,i){for(var o,r,n=i||Ft,s=0,a=t.length,h=!1;s<a;)(r=+n(t[o=s+(a-s>>1)],e))<0?s=o+1:(a=o,h=!r);return h?s:~s}function Ft(t,e){return t>e?1:t<e?-1:0}function Nt(t,e){return t.indexOf(e)>=0}function Dt(t,e,i){var o,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(i>0){for(o=1;o<r;++o)if(t[o]<e)return o-1}else if(i<0){for(o=1;o<r;++o)if(t[o]<=e)return o}else for(o=1;o<r;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return r-1}function Gt(t,e,i){for(;e<i;){var o=t[e];t[e]=t[i],t[i]=o,++e,--i}}function kt(t,e){for(var i=Array.isArray(e)?e:[e],o=i.length,r=0;r<o;r++)t[t.length]=i[r]}function jt(t,e){var i=t.length;if(i!==e.length)return!1;for(var o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0}function Yt(t,e){var i,o=t.length,r=Array(t.length);for(i=0;i<o;i++)r[i]={index:i,value:t[i]};for(r.sort((function(t,i){return e(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=r[i].value}function Xt(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function zt(t){this.processTouches_(t,this.moveOverOut_)}function Wt(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Ut(t){this.processTouches_(t,this.cancelOut_)}var Zt=function(t){function e(e,i){var o={touchstart:Xt,touchmove:zt,touchend:Wt,touchcancel:Ut};t.call(this,e,o),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&1..toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),o=i.length;function r(){t.preventDefault()}for(var n=0;n<o;++n){var s=this.touchToPointer_(t,i[n]);s.preventDefault=r,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,o=0;o<i;o++){if(t[o].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),o=i.length;if(o>=e.length){for(var r=[],n=0;n<o;++n){var s=Number(i[n]),a=this.pointerMap[s];1==s||this.findTouch_(e,s-2)||r.push(a.out)}for(var h=0;h<r.length;++h)this.cancelOut_(t,r[h])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,o=this.pointerMap[i.pointerId];if(o){var r=o.out,n=o.outTarget;this.dispatcher.move(i,t),r&&n!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=n,r.target=n,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=n,i.relatedTarget=null,this.cancelOut_(t,i))),o.out=i,o.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var o=[i.clientX,i.clientY];e.push(o),setTimeout((function(){var t,i,r;i=o,r=(t=e).indexOf(i),r>-1&&t.splice(r,1)}),this.dedupTimeout_)}},e}(ot),Vt=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Bt=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(q)this.registerSource("native",new Ot(this));else if(J)this.registerSource("ms",new Et(this));else{var t=new ut(this);this.registerSource("mouse",t),K&&this.registerSource("touch",new Zt(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,o=i.getEvents();o&&(o.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){_(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){v(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},o=0,r=Vt.length;o<r;o++){var n=Vt[o][0];i[n]=t[n]||e[n]||Vt[o][1]}return i},e.prototype.down=function(t,e){this.fireEvent(et.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(et.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(et.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(et.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(et.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(et.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(et.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(et.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new bt(t,i,e)},e.prototype.fireEvent=function(t,e,i){var o=this.makeEvent(t,e,i);this.dispatchEvent(o)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,lt(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(O),Ht=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*B:B,this.down_=null;var o=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Bt(o),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=_(this.pointerEventHandler_,et.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=_(this.pointerEventHandler_,et.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new tt(Q.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new tt(Q.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new tt(Q.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Q.POINTERUP||e.type==Q.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Q.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new tt(Q.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new tt(Q.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Bt(document),this.dragListenerKeys_.push(_(this.documentPointerEventHandler_,Q.POINTERMOVE,this.handlePointerMove_,this),_(this.documentPointerEventHandler_,Q.POINTERUP,this.handlePointerUp_,this),_(this.pointerEventHandler_,Q.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new tt(Q.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new tt(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(m(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(m(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(O),Kt={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},qt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Jt={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"},Qt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};function $t(t,e){if(!t)throw new n(e)}var te=1/0,ee=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};ee.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,l(this.queuedElements_)},ee.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(i);return delete this.queuedElements_[o],i},ee.prototype.enqueue=function(t){$t(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=te&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},ee.prototype.getCount=function(){return this.elements_.length},ee.prototype.getLeftChildIndex_=function(t){return 2*t+1},ee.prototype.getRightChildIndex_=function(t){return 2*t+2},ee.prototype.getParentIndex_=function(t){return t-1>>1},ee.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},ee.prototype.isEmpty=function(){return 0===this.elements_.length},ee.prototype.isKeyQueued=function(t){return t in this.queuedElements_},ee.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},ee.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,o=e.length,r=e[t],n=i[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<o&&i[h]<i[a]?h:a;e[t]=e[l],i[t]=i[l],t=l}e[t]=r,i[t]=n,this.siftDown_(s,t)},ee.prototype.siftDown_=function(t,e){for(var i=this.elements_,o=this.priorities_,r=i[e],n=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>n))break;i[e]=i[s],o[e]=o[s],e=s}i[e]=r,o[e]=n},ee.prototype.reprioritize=function(){var t,e,i,o=this.priorityFunction_,r=this.elements_,n=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(i=o(t=r[e]))==te?delete this.queuedElements_[this.keyFunction_(t)]:(n[s]=i,r[s++]=t);r.length=s,n.length=s,this.heapify_()};var ie=function(t){function e(e,i){t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()})),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&_(e[0],P.CHANGE,this.handleTileChange,this);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===Qt.LOADED||i===Qt.ERROR||i===Qt.EMPTY||i===Qt.ABORT){v(e,P.CHANGE,this.handleTileChange,this);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,o,r,n=0,s=!1;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=(o=this.dequeue()[0]).getKey(),(i=o.getState())===Qt.ABORT?s=!0:i!==Qt.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,o.load());0===n&&s&&this.tileChangeCallback_()},e}(ee),oe=256;function re(t,e,i){return Math.min(Math.max(t,e),i)}var ne="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function se(t,e,i,o,r,n){var s=r-i,a=n-o;if(0!==s||0!==a){var h=((t-i)*s+(e-o)*a)/(s*s+a*a);h>1?(i=r,o=n):h>0&&(i+=s*h,o+=a*h)}return ae(t,e,i,o)}function ae(t,e,i,o){var r=i-t,n=o-e;return r*r+n*n}function he(t){for(var e=t.length,i=0;i<e;i++){for(var o=i,r=Math.abs(t[i][i]),n=i+1;n<e;n++){var s=Math.abs(t[n][i]);s>r&&(r=s,o=n)}if(0===r)return null;var a=t[o];t[o]=t[i],t[i]=a;for(var h=i+1;h<e;h++)for(var l=-t[h][i]/t[i][i],u=i;u<e+1;u++)i==u?t[h][u]=0:t[h][u]+=l*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c}function le(t){return t*Math.PI/180}function ue(t,e){var i=t%e;return i*e<0?i+e:i}function ce(t,e,i){return t+i*(e-t)}function pe(t){return function(e){return e?[re(e[0],t[0],t[2]),re(e[1],t[1],t[3])]:void 0}}function de(t){return t}function fe(t){return function(e,i,o){if(void 0!==e){var r=Dt(t,e,o);r=re(r+i,0,t.length-1);var n=Math.floor(r);if(r!=n&&n<t.length-1){var s=t[n]/t[n+1];return t[n]/Math.pow(s,r-n)}return t[n]}}}function ge(t,e,i){return function(o,r,n){if(void 0!==o){var s=-n/2+.5,a=Math.floor(Math.log(e/o)/Math.log(t)+s),h=Math.max(a+r,0);return void 0!==i&&(h=Math.min(h,i)),e/Math.pow(t,h)}}}function _e(t,e){return void 0!==t?0:void 0}function ye(t,e){return void 0!==t?t+e:void 0}function ve(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}}function me(t){var e=t||le(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}}var Ee={ANIMATING:0,INTERACTING:1},Te={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ce(t,e){return t[0]+=e[0],t[1]+=e[1],t}function xe(t,e){for(var i=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){i=!1;break}return i}function Re(t,e){var i=Math.cos(e),o=Math.sin(e),r=t[0]*i-t[1]*o,n=t[1]*i+t[0]*o;return t[0]=r,t[1]=n,t}function Se(t,e){return t[0]*=e,t[1]*=e,t}function we(t){return Math.pow(t,3)}function Le(t){return 1-we(1-t)}function Ie(t){return 3*t*t-2*t*t*t}function Oe(t){return t}var Pe={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Me={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function be(t){for(var e=Ye(),i=0,o=t.length;i<o;++i)Ve(e,t[i]);return e}function Ae(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Fe(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ne(t,e,i){var o,r;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function De(t,e){return ke(t,e[0],e[1])}function Ge(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function ke(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function je(t,e){var i=t[0],o=t[1],r=t[2],n=t[3],s=e[0],a=e[1],h=Me.UNKNOWN;return s<i?h|=Me.LEFT:s>r&&(h|=Me.RIGHT),a<o?h|=Me.BELOW:a>n&&(h|=Me.ABOVE),h===Me.UNKNOWN&&(h=Me.INTERSECTING),h}function Ye(){return[1/0,1/0,-1/0,-1/0]}function Xe(t,e,i,o,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=o,r):[t,e,i,o]}function ze(t){return Xe(1/0,1/0,-1/0,-1/0,t)}function We(t,e,i,o,r){return He(ze(r),t,e,i,o)}function Ue(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Ze(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ve(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Be(t,e){for(var i=0,o=e.length;i<o;++i)Ve(t,e[i]);return t}function He(t,e,i,o,r){for(;i<o;i+=r)Ke(t,e[i],e[i+1]);return t}function Ke(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function qe(t,e,i){var o;return(o=e.call(i,Qe(t)))||(o=e.call(i,$e(t)))||(o=e.call(i,si(t)))?o:(o=e.call(i,ni(t)))||!1}function Je(t){var e=0;return li(t)||(e=ai(t)*oi(t)),e}function Qe(t){return[t[0],t[1]]}function $e(t){return[t[2],t[1]]}function ti(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ei(t,e){var i;return e===Pe.BOTTOM_LEFT?i=Qe(t):e===Pe.BOTTOM_RIGHT?i=$e(t):e===Pe.TOP_LEFT?i=ni(t):e===Pe.TOP_RIGHT?i=si(t):$t(!1,13),i}function ii(t,e,i,o,r){var n=e*o[0]/2,s=e*o[1]/2,a=Math.cos(i),h=Math.sin(i),l=n*a,u=n*h,c=s*a,p=s*h,d=t[0],f=t[1],g=d-l+p,_=d-l-p,y=d+l-p,v=d+l+p,m=f-u-c,E=f-u+c,T=f+u+c,C=f+u-c;return Xe(Math.min(g,_,y,v),Math.min(m,E,T,C),Math.max(g,_,y,v),Math.max(m,E,T,C),r)}function oi(t){return t[3]-t[1]}function ri(t,e,i){var o=i||[1/0,1/0,-1/0,-1/0];return hi(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):ze(o),o}function ni(t){return[t[0],t[3]]}function si(t){return[t[2],t[3]]}function ai(t){return t[2]-t[0]}function hi(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function li(t){return t[2]<t[0]||t[3]<t[1]}function ui(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function ci(t,e){var i=(t[2]-t[0])/2*(e-1),o=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=o,t[3]+=o}function pi(t,e,i){var o=!1,r=je(t,e),n=je(t,i);if(r===Me.INTERSECTING||n===Me.INTERSECTING)o=!0;else{var s,a,h=t[0],l=t[1],u=t[2],c=t[3],p=e[0],d=e[1],f=i[0],g=i[1],_=(g-d)/(f-p);n&Me.ABOVE&&!(r&Me.ABOVE)&&(o=(s=f-(g-c)/_)>=h&&s<=u),o||!(n&Me.RIGHT)||r&Me.RIGHT||(o=(a=g-(f-u)*_)>=l&&a<=c),o||!(n&Me.BELOW)||r&Me.BELOW||(o=(s=f-(g-l)/_)>=h&&s<=u),o||!(n&Me.LEFT)||r&Me.LEFT||(o=(a=g-(f-h)*_)>=l&&a<=c)}return o}function di(t,e,i){var o=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(o,o,2),function(t,e,i){return Xe(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}([o[0],o[2],o[4],o[6]],[o[1],o[3],o[5],o[7]],i)}var fi={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},gi={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function _i(t,e,i,o,r,n){for(var s=n||[],a=0,h=e;h<i;h+=o){var l=t[h],u=t[h+1];s[a++]=r[0]*l+r[2]*u+r[4],s[a++]=r[1]*l+r[3]*u+r[5]}return n&&s.length!=a&&(s.length=a),s}function yi(t,e,i,o,r,n,s){for(var a=s||[],h=Math.cos(r),l=Math.sin(r),u=n[0],c=n[1],p=0,d=e;d<i;d+=o){var f=t[d]-u,g=t[d+1]-c;a[p++]=u+f*h-g*l,a[p++]=c+f*l+g*h;for(var _=d+2;_<d+o;++_)a[p++]=t[_]}return s&&a.length!=p&&(a.length=p),a}function vi(t,e,i,o,r,n,s,a){for(var h=a||[],l=s[0],u=s[1],c=0,p=e;p<i;p+=o){var d=t[p]-l,f=t[p+1]-u;h[c++]=l+r*d,h[c++]=u+n*f;for(var g=p+2;g<p+o;++g)h[c++]=t[g]}return a&&h.length!=c&&(h.length=c),h}function mi(t,e,i,o,r,n,s){for(var a=s||[],h=0,l=e;l<i;l+=o){a[h++]=t[l]+r,a[h++]=t[l+1]+n;for(var u=l+2;u<l+o;++u)a[h++]=t[u]}return s&&a.length!=h&&(a.length=h),a}
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var Ei=6371008.8;function Ti(t,e,i){var o=i||Ei,r=le(t[1]),n=le(e[1]),s=(n-r)/2,a=le(e[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(n);return 2*o*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var Ci={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},xi={};xi[Ci.DEGREES]=2*Math.PI*6370997/360,xi[Ci.FEET]=.3048,xi[Ci.METERS]=1,xi[Ci.USFEET]=1200/3937;var Ri=Ci,Si=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Si.prototype.canWrapX=function(){return this.canWrapX_},Si.prototype.getCode=function(){return this.code_},Si.prototype.getExtent=function(){return this.extent_},Si.prototype.getUnits=function(){return this.units_},Si.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||xi[this.units_]},Si.prototype.getWorldExtent=function(){return this.worldExtent_},Si.prototype.getAxisOrientation=function(){return this.axisOrientation_},Si.prototype.isGlobal=function(){return this.global_},Si.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Si.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Si.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Si.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Si.prototype.setWorldExtent=function(t){this.worldExtent_=t},Si.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Si.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var wi=Si,Li=6378137,Ii=Math.PI*Li,Oi=[-Ii,-Ii,Ii,Ii],Pi=[-180,-85,180,85],Mi=function(t){function e(e){t.call(this,{code:e,units:Ri.METERS,extent:Oi,global:!0,worldExtent:Pi,getPointResolution:function(t,e){return t/ne(e[1]/Li)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(wi),bi=[new Mi("EPSG:3857"),new Mi("EPSG:102100"),new Mi("EPSG:102113"),new Mi("EPSG:900913"),new Mi("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Mi("urn:ogc:def:crs:EPSG::3857"),new Mi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ai(t,e,i){var o=t.length,r=i>1?i:2,n=e;void 0===n&&(n=r>2?t.slice():new Array(o));for(var s=Ii,a=0;a<o;a+=r){n[a]=s*t[a]/180;var h=Li*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));h>s?h=s:h<-s&&(h=-s),n[a+1]=h}return n}function Fi(t,e,i){var o=t.length,r=i>1?i:2,n=e;void 0===n&&(n=r>2?t.slice():new Array(o));for(var s=0;s<o;s+=r)n[s]=180*t[s]/Ii,n[s+1]=360*Math.atan(Math.exp(t[s+1]/Li))/Math.PI-90;return n}var Ni=[-180,-90,180,90],Di=6378137*Math.PI/180,Gi=function(t){function e(e,i){t.call(this,{code:e,units:Ri.DEGREES,extent:Ni,axisOrientation:i,global:!0,metersPerUnit:Di,worldExtent:Ni})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(wi),ki=[new Gi("CRS:84"),new Gi("EPSG:4326","neu"),new Gi("urn:ogc:def:crs:EPSG::4326","neu"),new Gi("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Gi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Gi("urn:ogc:def:crs:OGC:2:84"),new Gi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Gi("urn:x-ogc:def:crs:EPSG:4326","neu")],ji={};var Yi,Xi,zi,Wi={};function Ui(t,e,i){var o=t.getCode(),r=e.getCode();o in Wi||(Wi[o]={}),Wi[o][r]=i}function Zi(t,e){var i;return t in Wi&&e in Wi[t]&&(i=Wi[t][e]),i}function Vi(t,e,i){var o;if(void 0!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];o=e}else o=t.slice();return o}function Bi(t,e,i){if(void 0!==e&&t!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];t=e}return t}function Hi(t){!function(t,e){ji[t]=e}(t.getCode(),t),Ui(t,t,Vi)}function Ki(t){return"string"==typeof t?ji[t]||null:t||null}function qi(t,e,i,o){var r,n=(t=Ki(t)).getPointResolutionFunc();if(n)r=n(e,i);else if(t.getUnits()==Ri.DEGREES&&!o||o==Ri.DEGREES)r=e;else{var s=to(t,Ki("EPSG:4326")),a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(Ti((a=s(a,a,2)).slice(0,2),a.slice(2,4))+Ti(a.slice(4,6),a.slice(6,8)))/2;var h=o?xi[o]:t.getMetersPerUnit();void 0!==h&&(r/=h)}return r}function Ji(t){!function(t){t.forEach(Hi)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Ui(e,t,Vi)}))}))}function Qi(t,e){return t?"string"==typeof t?Ki(t):t:Ki(e)}function $i(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||to(t,e)===Vi)&&i}function to(t,e){var i=Zi(t.getCode(),e.getCode());return i||(i=Bi),i}function eo(t,e){return to(Ki(t),Ki(e))}function io(t,e,i){return eo(e,i)(t,void 0,t.length)}Ji(bi),Ji(ki),Yi=bi,Xi=Ai,zi=Fi,ki.forEach((function(t){Yi.forEach((function(e){Ui(t,e,Xi),Ui(e,t,zi)}))}));var oo=new Array(6);function ro(t){return so(t,1,0,0,1,0,0)}function no(t,e){var i=t[0],o=t[1],r=t[2],n=t[3],s=t[4],a=t[5],h=e[0],l=e[1],u=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*h+r*l,t[1]=o*h+n*l,t[2]=i*u+r*c,t[3]=o*u+n*c,t[4]=i*p+r*d+s,t[5]=o*p+n*d+a,t}function so(t,e,i,o,r,n,s){return t[0]=e,t[1]=i,t[2]=o,t[3]=r,t[4]=n,t[5]=s,t}function ao(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ho(t,e){var i=e[0],o=e[1];return e[0]=t[0]*i+t[2]*o+t[4],e[1]=t[1]*i+t[3]*o+t[5],e}function lo(t,e,i){return no(t,so(oo,e,0,0,i,0,0))}function uo(t,e,i){return no(t,so(oo,1,0,0,1,e,i))}function co(t,e,i,o,r,n,s,a){var h=Math.sin(n),l=Math.cos(n);return t[0]=o*l,t[1]=r*h,t[2]=-o*h,t[3]=r*l,t[4]=s*o*l-a*o*h+e,t[5]=s*r*h+a*r*l+i,t}function po(t){var e,i=(e=t)[0]*e[3]-e[1]*e[2];$t(0!==i,32);var o=t[0],r=t[1],n=t[2],s=t[3],a=t[4],h=t[5];return t[0]=s/i,t[1]=-r/i,t[2]=-n/i,t[3]=o/i,t[4]=(n*h-s*a)/i,t[5]=-(o*h-r*a)/i,t}var fo=[1,0,0,1,0,0],go=function(t){function i(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return e()},i.prototype.closestPointXY=function(t,i,o,r){return e()},i.prototype.containsXY=function(t,e){return!1},i.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},i.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},i.prototype.computeExtent=function(t){return e()},i.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),ui(this.extent_,t)},i.prototype.rotate=function(t,i){e()},i.prototype.scale=function(t,i,o){e()},i.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},i.prototype.getSimplifiedGeometry=function(t){return e()},i.prototype.getType=function(){return e()},i.prototype.applyTransform=function(t){e()},i.prototype.intersectsExtent=function(t){return e()},i.prototype.translate=function(t,i){e()},i.prototype.transform=function(t,e){var i=Ki(t),o=i.getUnits()==Ri.TILE_PIXELS?function(t,o,r){var n=i.getExtent(),s=i.getWorldExtent(),a=oi(s)/oi(n);return co(fo,s[0],s[3],a,-a,0,0,0),_i(t,0,t.length,r,fo,o),eo(i,e)(t,o,r)}:eo(i,e);return this.applyTransform(o),this},i}(D),_o=go;function yo(t){var e;return t==gi.XY?e=2:t==gi.XYZ||t==gi.XYM?e=3:t==gi.XYZM&&(e=4),e}function vo(t,e,i){var o=t.getFlatCoordinates();if(o){var r=t.getStride();return _i(o,0,o.length,r,e,i)}return null}var mo=function(t){function i(){t.call(this),this.layout=gi.XY,this.stride=2,this.flatCoordinates=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.computeExtent=function(t){return We(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.getCoordinates=function(){return e()},i.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},i.prototype.getFlatCoordinates=function(){return this.flatCoordinates},i.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},i.prototype.getLayout=function(){return this.layout},i.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(l(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},i.prototype.getSimplifiedGeometryInternal=function(t){return this},i.prototype.getStride=function(){return this.stride},i.prototype.setFlatCoordinates=function(t,e){this.stride=yo(t),this.layout=t,this.flatCoordinates=e},i.prototype.setCoordinates=function(t,i){e()},i.prototype.setLayout=function(t,e,i){var o;if(t)o=yo(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=gi.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=gi.XY:3==t?e=gi.XYZ:4==t&&(e=gi.XYZM);return e}(o=e.length)}this.layout=t,this.stride=o},i.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},i.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();yi(i,0,i.length,o,t,e,i),this.changed()}},i.prototype.scale=function(t,e,i){var o=e;void 0===o&&(o=t);var r=i;r||(r=ti(this.getExtent()));var n=this.getFlatCoordinates();if(n){var s=this.getStride();vi(n,0,n.length,s,t,o,r,n),this.changed()}},i.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();mi(i,0,i.length,o,t,e,i),this.changed()}},i}(_o);function Eo(t,e,i,o){for(var r=0,n=t[i-o],s=t[i-o+1];e<i;e+=o){var a=t[e],h=t[e+1];r+=s*a-n*h,n=a,s=h}return r/2}function To(t,e,i,o){for(var r=0,n=0,s=i.length;n<s;++n){var a=i[n];r+=Eo(t,e,a,o),e=a}return r}function Co(t,e,i,o){for(var r=0,n=0,s=i.length;n<s;++n){var a=i[n];r+=To(t,e,a,o),e=a[a.length-1]}return r}function xo(t,e,i,o,r,n,s){var a,h=t[e],l=t[e+1],u=t[i]-h,c=t[i+1]-l;if(0===u&&0===c)a=e;else{var p=((r-h)*u+(n-l)*c)/(u*u+c*c);if(p>1)a=i;else{if(p>0){for(var d=0;d<o;++d)s[d]=ce(t[e+d],t[i+d],p);return void(s.length=o)}a=e}}for(var f=0;f<o;++f)s[f]=t[a+f];s.length=o}function Ro(t,e,i,o,r){var n=t[e],s=t[e+1];for(e+=o;e<i;e+=o){var a=t[e],h=t[e+1],l=ae(n,s,a,h);l>r&&(r=l),n=a,s=h}return r}function So(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){var a=i[n];r=Ro(t,e,a,o,r),e=a}return r}function wo(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){var a=i[n];r=So(t,e,a,o,r),e=a[a.length-1]}return r}function Lo(t,e,i,o,r,n,s,a,h,l,u){if(e==i)return l;var c,p;if(0===r){if((p=ae(s,a,t[e],t[e+1]))<l){for(c=0;c<o;++c)h[c]=t[e+c];return h.length=o,p}return l}for(var d=u||[NaN,NaN],f=e+o;f<i;)if(xo(t,f-o,f,o,s,a,d),(p=ae(s,a,d[0],d[1]))<l){for(l=p,c=0;c<o;++c)h[c]=d[c];h.length=o,f+=o}else f+=o*Math.max((Math.sqrt(p)-Math.sqrt(l))/r|0,1);if(n&&(xo(t,i-o,e,o,s,a,d),(p=ae(s,a,d[0],d[1]))<l)){for(l=p,c=0;c<o;++c)h[c]=d[c];h.length=o}return l}function Io(t,e,i,o,r,n,s,a,h,l,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];l=Lo(t,e,f,o,r,n,s,a,h,l,c),e=f}return l}function Oo(t,e,i,o,r,n,s,a,h,l,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];l=Io(t,e,f,o,r,n,s,a,h,l,c),e=f[f.length-1]}return l}function Po(t,e,i,o){for(var r=0,n=i.length;r<n;++r)t[e++]=i[r];return e}function Mo(t,e,i,o){for(var r=0,n=i.length;r<n;++r)for(var s=i[r],a=0;a<o;++a)t[e++]=s[a];return e}function bo(t,e,i,o,r){for(var n=r||[],s=0,a=0,h=i.length;a<h;++a){var l=Mo(t,e,i[a],o);n[s++]=l,e=l}return n.length=s,n}function Ao(t,e,i,o,r){for(var n=r||[],s=0,a=0,h=i.length;a<h;++a){var l=bo(t,e,i[a],o,n[s]);n[s++]=l,e=l[l.length-1]}return n.length=s,n}function Fo(t,e,i,o,r){for(var n=void 0!==r?r:[],s=0,a=e;a<i;a+=o)n[s++]=t.slice(a,a+o);return n.length=s,n}function No(t,e,i,o,r){for(var n=void 0!==r?r:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];n[s++]=Fo(t,e,l,o,n[s]),e=l}return n.length=s,n}function Do(t,e,i,o,r){for(var n=void 0!==r?r:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];n[s++]=No(t,e,l,o,n[s]),e=l[l.length-1]}return n.length=s,n}function Go(t,e,i,o,r,n,s){var a=(i-e)/o;if(a<3){for(;e<i;e+=o)n[s++]=t[e],n[s++]=t[e+1];return s}var h=new Array(a);h[0]=1,h[a-1]=1;for(var l=[e,i-o],u=0;l.length>0;){for(var c=l.pop(),p=l.pop(),d=0,f=t[p],g=t[p+1],_=t[c],y=t[c+1],v=p+o;v<c;v+=o){var m=se(t[v],t[v+1],f,g,_,y);m>d&&(u=v,d=m)}d>r&&(h[(u-e)/o]=1,p+o<u&&l.push(p,u),u+o<c&&l.push(u,c))}for(var E=0;E<a;++E)h[E]&&(n[s++]=t[e+E*o],n[s++]=t[e+E*o+1]);return s}function ko(t,e,i,o,r,n,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=Go(t,e,u,o,r,n,s),a.push(s),e=u}return s}function jo(t,e){return e*Math.round(t/e)}function Yo(t,e,i,o,r,n,s){if(e==i)return s;var a,h,l=jo(t[e],r),u=jo(t[e+1],r);e+=o,n[s++]=l,n[s++]=u;do{if(a=jo(t[e],r),h=jo(t[e+1],r),(e+=o)==i)return n[s++]=a,n[s++]=h,s}while(a==l&&h==u);for(;e<i;){var c=jo(t[e],r),p=jo(t[e+1],r);if(e+=o,c!=a||p!=h){var d=a-l,f=h-u,g=c-l,_=p-u;d*_==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&_<f||f==_||f>0&&_>f)?(a=c,h=p):(n[s++]=a,n[s++]=h,l=a,u=h,a=c,h=p)}}return n[s++]=a,n[s++]=h,s}function Xo(t,e,i,o,r,n,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=Yo(t,e,u,o,r,n,s),a.push(s),e=u}return s}function zo(t,e,i,o,r,n,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h],c=[];s=Xo(t,e,u,o,r,n,s,c),a.push(c),e=u[u.length-1]}return s}var Wo=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){return o<Ne(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,o))},e.prototype.getArea=function(){return Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Fo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Go(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,gi.XY)},e.prototype.getType=function(){return fi.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(mo),Uo=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){var r=this.flatCoordinates,n=ae(t,e,r[0],r[1]);if(n<o){for(var s=this.stride,a=0;a<s;++a)i[a]=r[a];return i.length=s,n}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,i=t,o=e[0],r=e[1],Xe(o,r,o,r,i);var e,i,o,r},e.prototype.getType=function(){return fi.POINT},e.prototype.intersectsExtent=function(t){return ke(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Po(this.flatCoordinates,0,t,this.stride),this.changed()},e}(mo),Zo=Uo;function Vo(t,e,i,o,r){return!qe(r,(function(r){return!Bo(t,e,i,o,r[0],r[1])}))}function Bo(t,e,i,o,r,n){for(var s=0,a=t[i-o],h=t[i-o+1];e<i;e+=o){var l=t[e],u=t[e+1];h<=n?u>n&&(l-a)*(n-h)-(r-a)*(u-h)>0&&s++:u<=n&&(l-a)*(n-h)-(r-a)*(u-h)<0&&s--,a=l,h=u}return 0!==s}function Ho(t,e,i,o,r,n){if(0===i.length)return!1;if(!Bo(t,e,i[0],o,r,n))return!1;for(var s=1,a=i.length;s<a;++s)if(Bo(t,i[s-1],i[s],o,r,n))return!1;return!0}function Ko(t,e,i,o,r,n){if(0===i.length)return!1;for(var s=0,a=i.length;s<a;++s){var h=i[s];if(Ho(t,e,h,o,r,n))return!0;e=h[h.length-1]}return!1}function qo(t,e,i,o,r,n,s){for(var a,h,l,u,c,p,d,f=r[n+1],g=[],_=0,y=i.length;_<y;++_){var v=i[_];for(u=t[v-o],p=t[v-o+1],a=e;a<v;a+=o)c=t[a],d=t[a+1],(f<=p&&d<=f||p<=f&&f<=d)&&(l=(f-p)/(d-p)*(c-u)+u,g.push(l)),u=c,p=d}var m=NaN,E=-1/0;for(g.sort(Ft),u=g[0],a=1,h=g.length;a<h;++a){c=g[a];var T=Math.abs(c-u);T>E&&Ho(t,e,i,o,l=(u+c)/2,f)&&(m=l,E=T),u=c}return isNaN(m)&&(m=r[n]),s?(s.push(m,f,E),s):[m,f,E]}function Jo(t,e,i,o,r){for(var n=[],s=0,a=i.length;s<a;++s){var h=i[s];n=qo(t,e,h,o,r,2*s,n),e=h[h.length-1]}return n}function Qo(t,e,i,o,r,n){for(var s,a=[t[e],t[e+1]],h=[];e+o<i;e+=o){if(h[0]=t[e+o],h[1]=t[e+o+1],s=r.call(n,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}function $o(t,e,i,o,r){var n=He([1/0,1/0,-1/0,-1/0],t,e,i,o);return!!hi(r,n)&&(!!Ge(r,n)||(n[0]>=r[0]&&n[2]<=r[2]||(n[1]>=r[1]&&n[3]<=r[3]||Qo(t,e,i,o,(function(t,e){return pi(r,t,e)})))))}function tr(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){if($o(t,e,i[n],o,r))return!0;e=i[n]}return!1}function er(t,e,i,o,r){if(!function(t,e,i,o,r){return!!($o(t,e,i,o,r)||Bo(t,e,i,o,r[0],r[1])||Bo(t,e,i,o,r[0],r[3])||Bo(t,e,i,o,r[2],r[1])||Bo(t,e,i,o,r[2],r[3]))}(t,e,i[0],o,r))return!1;if(1===i.length)return!0;for(var n=1,s=i.length;n<s;++n)if(Vo(t,i[n-1],i[n],o,r)&&!$o(t,i[n-1],i[n],o,r))return!1;return!0}function ir(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){var a=i[n];if(er(t,e,a,o,r))return!0;e=a[a.length-1]}return!1}function or(t,e,i,o){for(;e<i-o;){for(var r=0;r<o;++r){var n=t[e+r];t[e+r]=t[i-o+r],t[i-o+r]=n}e+=o,i-=o}}function rr(t,e,i,o){for(var r=0,n=t[i-o],s=t[i-o+1];e<i;e+=o){var a=t[e],h=t[e+1];r+=(a-n)*(h+s),n=a,s=h}return r>0}function nr(t,e,i,o,r){for(var n=void 0!==r&&r,s=0,a=i.length;s<a;++s){var h=i[s],l=rr(t,e,h,o);if(0===s){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;e=h}return!0}function sr(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n)if(!nr(t,e,i[n],o,r))return!1;return!0}function ar(t,e,i,o,r){for(var n=void 0!==r&&r,s=0,a=i.length;s<a;++s){var h=i[s],l=rr(t,e,h,o);(0===s?n&&l||!n&&!l:n&&!l||!n&&l)&&or(t,e,h,o),e=h}return e}function hr(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n)e=ar(t,e,i[n],o,r);return e}var lr=function(t){function e(e,i,o){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&o?(this.setFlatCoordinates(i,e),this.ends_=o):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?kt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,o){return o<Ne(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(So(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Io(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,o))},e.prototype.containsXY=function(t,e){return Ho(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return To(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ar(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,No(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=ti(this.getExtent());this.flatInteriorPoint_=qo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Zo(this.getFlatInteriorPoint(),gi.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Wo(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,o=[],r=0,n=0,s=i.length;n<s;++n){var a=i[n],h=new Wo(e.slice(r,a),t);o.push(h),r=a}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;nr(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ar(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],o=[];return i.length=Xo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,o),new e(i,gi.XY,o)},e.prototype.getType=function(){return fi.POLYGON},e.prototype.intersectsExtent=function(t){return er(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=bo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(mo),ur=lr;function cr(t){var e=t[0],i=t[1],o=t[2],r=t[3],n=[e,i,e,r,o,r,o,i,e,i];return new lr(n,gi.XY,[n.length])}var pr=function(t){function e(e){t.call(this);var i=h({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Qi(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[Te.CENTER]=void 0!==t.center?t.center:null;var i=function(t){var e,i,o,r=28,n=2,s=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:r,h=void 0!==t.zoomFactor?t.zoomFactor:n;if(void 0!==t.resolutions){var l=t.resolutions;i=l[s],o=void 0!==l[a]?l[a]:l[l.length-1],e=fe(l)}else{var u=Qi(t.projection,"EPSG:3857"),c=u.getExtent(),p=(c?Math.max(ai(c),oi(c)):360*xi[Ri.DEGREES]/u.getMetersPerUnit())/oe/Math.pow(n,0),d=p/Math.pow(n,r-0);void 0!==(i=t.maxResolution)?s=0:i=p/Math.pow(h,s),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(h,a):p/Math.pow(h,a):d),a=s+Math.floor(Math.log(i/o)/Math.log(h)),o=i/Math.pow(h,a-s),e=ge(h,i,a-s)}return{constraint:e,maxResolution:i,minResolution:o,minZoom:s,zoomFactor:h}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var o=function(t){return void 0!==t.extent?pe(t.extent):de}(t),r=i.constraint,n=function(t){var e=void 0===t.enableRotation||t.enableRotation;if(e){var i=t.constrainRotation;return void 0===i||!0===i?me():!1===i?ye:"number"==typeof i?ve(i):ye}return _e}(t);this.constraints_={center:o,resolution:r,rotation:n},void 0!==t.resolution?e[Te.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[Te.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[Te.RESOLUTION]=re(Number(this.getResolution()||e[Te.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[Te.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=h({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),h({},e,t)},e.prototype.animate=function(t){var e,i=arguments,o=arguments.length;if(o>1&&"function"==typeof arguments[o-1]&&(e=arguments[o-1],--o),!this.isDef()){var r=arguments[o-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&dr(e,!0))}for(var n=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),h=this.getRotation(),l=[],u=0;u<o;++u){var c=i[u],p={start:n,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Ie};if(c.center&&(p.sourceCenter=s,p.targetCenter=c.center,s=p.targetCenter),void 0!==c.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),a=p.targetResolution):c.resolution&&(p.sourceResolution=a,p.targetResolution=c.resolution,a=p.targetResolution),void 0!==c.rotation){p.sourceRotation=h;var d=ue(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=h+d,h=p.targetRotation}p.callback=e,fr(p)?p.complete=!0:n+=p.duration,l.push(p)}this.animations_.push(l),this.setHint(Ee.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Ee.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Ee.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Ee.ANIMATING,-this.hints_[Ee.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&dr(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],r=!0,n=0,s=o.length;n<s;++n){var a=o[n];if(!a.complete){var h=t-a.start,l=a.duration>0?h/a.duration:1;l>=1?(a.complete=!0,l=1):r=!1;var u=a.easing(l);if(a.sourceCenter){var c=a.sourceCenter[0],p=a.sourceCenter[1],d=c+u*(a.targetCenter[0]-c),f=p+u*(a.targetCenter[1]-p);this.set(Te.CENTER,[d,f])}if(a.sourceResolution&&a.targetResolution){var g=1===u?a.targetResolution:a.sourceResolution+u*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Te.CENTER,this.calculateCenterZoom(g,a.anchor)),this.set(Te.RESOLUTION,g)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var _=1===u?ue(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+u*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Te.CENTER,this.calculateCenterRotate(_,a.anchor)),this.set(Te.ROTATION,_)}if(e=!0,!a.complete)break}}if(r){this.animations_[i]=null,this.setHint(Ee.ANIMATING,-1);var y=o[0].callback;y&&dr(y,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,o=this.getCenter();return void 0!==o&&(Re(i=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),Ce(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,o=this.getCenter(),r=this.getResolution();void 0!==o&&void 0!==r&&(i=[e[0]-t*(e[0]-o[0])/r,e[1]-t*(e[1]-o[1])/r]);return i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+o(this)+'"]',i=document.querySelector(e);if(i){var r=getComputedStyle(i);t[0]=parseInt(r.width,10),t[1]=parseInt(r.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var o=e||0,r=i||0;return this.constraints_.resolution(t,o,r)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(Te.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();$t(i,1);var o=this.getResolution();$t(void 0!==o,2);var r=this.getRotation();return $t(void 0!==r,3),ii(i,o,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Te.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),o=ai(t)/i[0],r=oi(t)/i[1];return Math.max(o,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,o=this.minResolution_,r=Math.log(i/o)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(Te.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,o=this.minResolution_,r=Math.log(i/o)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),o=this.getResolution(),r=o/t,n=this.getRotation();return{center:[Math.round(e[0]/r)*r,Math.round(e[1]/r)*r],projection:void 0!==i?i:null,resolution:o,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,o=this.minZoom_||0;if(this.resolutions_){var r=Dt(this.resolutions_,t,1);o=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return o+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,o=e||{},r=o.size;r||(r=this.getSizeFromViewport_()),$t(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?($t(!li(t),25),i=cr(t)):t.getType()===fi.CIRCLE?(i=cr(t=t.getExtent())).rotate(this.getRotation(),ti(t)):i=t;var n,s=void 0!==o.padding?o.padding:[0,0,0,0],a=void 0===o.constrainResolution||o.constrainResolution,h=void 0!==o.nearest&&o.nearest;n=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.constrainResolution(this.maxResolution_,o.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),u=this.getRotation(),c=Math.cos(-u),p=Math.sin(-u),d=1/0,f=1/0,g=-1/0,_=-1/0,y=i.getStride(),v=0,m=l.length;v<m;v+=y){var E=l[v]*c-l[v+1]*p,T=l[v]*p+l[v+1]*c;d=Math.min(d,E),f=Math.min(f,T),g=Math.max(g,E),_=Math.max(_,T)}var C=this.getResolutionForExtent([d,f,g,_],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(C=isNaN(C)?n:Math.max(C,n),a){var x=this.constrainResolution(C,0,0);!h&&x<C&&(x=this.constrainResolution(x,-1,0)),C=x}p=-p;var R=(d+g)/2,w=(f+_)/2,L=[(R+=(s[1]-s[3])/2*C)*c-(w+=(s[0]-s[2])/2*C)*p,w*c+R*p],I=o.callback?o.callback:S;void 0!==o.duration?this.animate({resolution:C,center:L,duration:o.duration,easing:o.easing},I):(this.setResolution(C),this.setCenter(L),dr(I,!0))},e.prototype.centerOn=function(t,e,i){var o=this.getRotation(),r=Math.cos(-o),n=Math.sin(-o),s=t[0]*r-t[1]*n,a=t[1]*r+t[0]*n,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*r-(a+=(i[1]-e[1]/2)*h)*(n=-n),u=a*r+s*n;this.setCenter([l,u])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(Te.CENTER,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(Te.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(Te.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(D);function dr(t,e){setTimeout((function(){t(e)}),0)}function fr(t){return!(t.sourceCenter&&t.targetCenter&&!xe(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var gr=pr;function _r(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function yr(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function vr(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function mr(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function Er(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Tr(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var Cr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},xr=function(t){function i(e){t.call(this);var i=h({},e);i[Cr.OPACITY]=void 0!==e.opacity?e.opacity:1,i[Cr.VISIBLE]=void 0===e.visible||e.visible,i[Cr.Z_INDEX]=e.zIndex,i[Cr.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[Cr.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getType=function(){return this.type},i.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=re(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},i.prototype.getLayersArray=function(t){return e()},i.prototype.getLayerStatesArray=function(t){return e()},i.prototype.getExtent=function(){return this.get(Cr.EXTENT)},i.prototype.getMaxResolution=function(){return this.get(Cr.MAX_RESOLUTION)},i.prototype.getMinResolution=function(){return this.get(Cr.MIN_RESOLUTION)},i.prototype.getOpacity=function(){return this.get(Cr.OPACITY)},i.prototype.getSourceState=function(){return e()},i.prototype.getVisible=function(){return this.get(Cr.VISIBLE)},i.prototype.getZIndex=function(){return this.get(Cr.Z_INDEX)},i.prototype.setExtent=function(t){this.set(Cr.EXTENT,t)},i.prototype.setMaxResolution=function(t){this.set(Cr.MAX_RESOLUTION,t)},i.prototype.setMinResolution=function(t){this.set(Cr.MIN_RESOLUTION,t)},i.prototype.setOpacity=function(t){this.set(Cr.OPACITY,t)},i.prototype.setVisible=function(t){this.set(Cr.VISIBLE,t)},i.prototype.setZIndex=function(t){this.set(Cr.Z_INDEX,t)},i}(D),Rr={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Sr="layers",wr=function(t){function e(e){var i=e||{},o=h({},i);delete o.layers;var r=i.layers;t.call(this,o),this.layersListenerKeys_=[],this.listenerKeys_={},_(this,N(Sr),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new j(r.slice(),{unique:!0}):$t("function"==typeof r.getArray,43):r=new j(void 0,{unique:!0}),this.setLayers(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(m),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(_(t,s.ADD,this.handleLayersAdd_,this),_(t,s.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(m);l(this.listenerKeys_);for(var i=t.getArray(),r=0,n=i.length;r<n;r++){var h=i[r];this.listenerKeys_[o(h)]=[_(h,a.PROPERTYCHANGE,this.handleLayerChange_,this),_(h,P.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[o(e)]=[_(e,a.PROPERTYCHANGE,this.handleLayerChange_,this),_(e,P.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=o(t.element);this.listenerKeys_[e].forEach(m),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(Sr)},e.prototype.setLayers=function(t){this.set(Sr,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var o=this.getLayerState(),r=i,n=e.length;r<n;r++){var s=e[r];s.opacity*=o.opacity,s.visible=s.visible&&o.visible,s.maxResolution=Math.min(s.maxResolution,o.maxResolution),s.minResolution=Math.max(s.minResolution,o.minResolution),void 0!==o.extent&&(void 0!==s.extent?s.extent=ri(s.extent,o.extent):s.extent=o.extent)}return e},e.prototype.getSourceState=function(){return Rr.READY},e}(xr);function Lr(t){return t[0]>0&&t[1]>0}function Ir(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var Or=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,o,r,n={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new wr({layers:t.layers});n[qt.LAYERGROUP]=s,n[qt.TARGET]=t.target,n[qt.VIEW]=void 0!==t.view?t.view:new gr,void 0!==t.controls&&(Array.isArray(t.controls)?i=new j(t.controls.slice()):($t("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new j(t.interactions.slice()):($t("function"==typeof t.interactions.getArray,48),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new j(t.overlays.slice()):($t("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new j;return{controls:i,interactions:o,keyboardEventTarget:e,overlays:r,values:n}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:B,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(K?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var o=[P.CLICK,P.DBLCLICK,P.MOUSEDOWN,P.TOUCHSTART,P.MSPOINTERDOWN,Q.POINTERDOWN,P.MOUSEWHEEL,P.WHEEL],r=0,n=o.length;r<n;++r)_(this.overlayContainerStopEvent_,o[r],L);for(var a in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ht(this,e.moveTolerance),Q)_(this.mapBrowserEventHandler_,Q[a],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,_(this.viewport_,P.CONTEXTMENU,this.handleBrowserEvent,this),_(this.viewport_,P.WHEEL,this.handleBrowserEvent,this),_(this.viewport_,P.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new j,this.interactions=i.interactions||new j,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new ie(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},_(this,N(qt.LAYERGROUP),this.handleLayerGroupChanged_,this),_(this,N(qt.VIEW),this.handleViewChanged_,this),_(this,N(qt.SIZE),this.handleSizeChanged_,this),_(this,N(qt.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),_(this.controls,s.ADD,(function(t){t.element.setMap(this)}),this),_(this.controls,s.REMOVE,(function(t){t.element.setMap(null)}),this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),_(this.interactions,s.ADD,(function(t){t.element.setMap(this)}),this),_(this.interactions,s.REMOVE,(function(t){t.element.setMap(null)}),this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),_(this.overlays_,s.ADD,(function(t){this.addOverlayInternal_(t.element)}),this),_(this.overlays_,s.REMOVE,(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}),this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),v(this.viewport_,P.CONTEXTMENU,this.handleBrowserEvent,this),v(this.viewport_,P.WHEEL,this.handleBrowserEvent,this),v(this.viewport_,P.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(P.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var o=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,n=void 0!==i.layerFilter?i.layerFilter:x;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,r,e,null,n,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,(function(t){i||(i=[]),i.push(t)}),e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var o=i||{},r=void 0!==o.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,n=o.layerFilter||x;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,n,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:x,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(qt.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?ho(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(qt.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?ho(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(qt.SIZE)},e.prototype.getView=function(){return this.get(qt.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,o){var r=this.frameState_;if(!r||!(e in r.wantedTiles))return te;if(!r.wantedTiles[e][t.getKey()])return te;var n=i[0]-r.focus[0],s=i[1]-r.focus[1];return 65536*Math.log(o)+Math.sqrt(n*n+s*s)/o},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,o=new X(i,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var o=e[i];if(o.getActive())if(!o.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var r=t.viewHints;r[Ee.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,o=2),r[Ee.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,o=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,o))}!t||!this.hasListener(Jt.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||Mr(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(Jt.RENDERCOMPLETE,t);for(var n=this.postRenderFunctions_,s=0,a=n.length;s<a;++s)n[s](this,t);n.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)m(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[_(o,P.KEYDOWN,this.handleBrowserEvent,this),_(o,P.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(P.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Er(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(P.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(m(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(m(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",o(t)),this.viewPropertyListenerKey_=_(t,a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=_(t,P.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(m),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[_(t,a.PROPERTYCHANGE,this.render,this),_(t,P.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),r=this.getView(),n=[1/0,1/0,-1/0,-1/0],s=this.frameState_,a=null;if(void 0!==i&&Lr(i)&&r&&r.isDef()){for(var h=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},c=0,p=l.length;c<p;++c)u[o(l[c].layer)]=l[c];e=r.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:n,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}if(a&&(a.extent=ii(e.center,e.resolution,e.rotation,a.size,n)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s)(!this.previousExtent_||!li(this.previousExtent_)&&!Ue(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Y(Kt.MOVESTART,this,s)),this.previousExtent_=ze(this.previousExtent_));this.previousExtent_&&!a.viewHints[Ee.ANIMATING]&&!a.viewHints[Ee.INTERACTING]&&!Ue(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Y(Kt.MOVEEND,this,a)),Fe(a.extent,this.previousExtent_))}this.dispatchEvent(new Y(Kt.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(qt.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(qt.SIZE,t)},e.prototype.setTarget=function(t){this.set(qt.TARGET,t)},e.prototype.setView=function(t){this.set(qt.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[o(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[o(t)],this.render()},e}(D);var Pr=Or;function Mr(t){for(var e=0,i=t.length;e<i;++e){var o=t[e];if("function"==typeof o.getLayers)return Mr(o.getLayers().getArray());var r=o.getSource();if(r&&r.loading)return!0}return!1}var br,Ar,Fr=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:S,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Er(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Er(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)m(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==S&&this.listenerKeys.push(_(t,Kt.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(D),Nr="ol-hidden",Dr="ol-unselectable",Gr="ol-control",kr="ol-collapsed",jr=(Ar={},function(t){if(br||(br=document.createElement("div").style),!(t in Ar)){br.font=t;var e=br.fontFamily;if(br.font="",!e)return null;Ar[t]=e.split(/,\s?/)}return Ar[t]});function Yr(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var Xr=function(t){function e(e){var i=h({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),_(this,N(Cr.SOURCE),this.handleSourcePropertyChange_,this);var o=e.source?e.source:null;this.setSource(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Cr.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Rr.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(m(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=_(t,P.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(m(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(m(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=_(t,Jt.PRECOMPOSE,(function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[o(this)]=i}),this),this.mapRenderKey_=_(this,P.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Cr.SOURCE,t)},e}(xr);function zr(t){this.updateElement_(t.frameState)}var Wr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||zr,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var o=void 0!==i.className?i.className:"ol-attribution",r=void 0!==i.tipLabel?i.tipLabel:"Attributions",n=void 0!==i.collapseLabel?i.collapseLabel:"";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;var s=void 0!==i.label?i.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=r,h.appendChild(a),_(h,P.CLICK,this.handleClick_,this);var l=o+" "+Dr+" "+Gr+(this.collapsed_&&this.collapsible_?" "+kr:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.ulElement_),u.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],o=t.layerStatesArray,r=t.viewState.resolution,n=0,s=o.length;n<s;++n){var a=o[n];if(Yr(a,r)){var h=a.layer.getSource();if(h){var l=h.getAttributions();if(l){var u=l(t);if(u)if(this.overrideCollapsible_||!1!==h.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(u))for(var c=0,p=u.length;c<p;++c)u[c]in e||(i.push(u[c]),e[u[c]]=!0);else u in e||(i.push(u),e[u]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!jt(e,this.renderedAttributions_)){Tr(this.ulElement_);for(var o=0,r=e.length;o<r;++o){var n=document.createElement("li");n.innerHTML=e[o],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(kr),this.collapsed_?mr(this.collapseLabel_,this.label_):mr(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(Fr);function Ur(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains(Nr);r||0!==i?r&&0!==i&&this.element.classList.remove(Nr):this.element.classList.add(Nr)}this.label_.style.msTransform=o,this.label_.style.webkitTransform=o,this.label_.style.transform=o}this.rotation_=i}}var Zr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Ur,target:i.target});var o=void 0!==i.className?i.className:"ol-rotate",r=void 0!==i.label?i.label:"";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var n=i.tipLabel?i.tipLabel:"Reset rotation",s=document.createElement("button");s.className=o+"-reset",s.setAttribute("type","button"),s.title=n,s.appendChild(this.label_),_(s,P.CLICK,this.handleClick_,this);var a=o+" "+Dr+" "+Gr,h=this.element;h.className=a,h.appendChild(s),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Nr)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Le}):t.setRotation(0))},e}(Fr),Vr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var o=void 0!==i.className?i.className:"ol-zoom",r=void 0!==i.delta?i.delta:1,n=void 0!==i.zoomInLabel?i.zoomInLabel:"+",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:"",a=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=o+"-in",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof n?document.createTextNode(n):n),_(l,P.CLICK,this.handleClick_.bind(this,r));var u=document.createElement("button");u.className=o+"-out",u.setAttribute("type","button"),u.title=h,u.appendChild("string"==typeof s?document.createTextNode(s):s),_(u,P.CLICK,this.handleClick_.bind(this,-r));var c=o+" "+Dr+" "+Gr,p=this.element;p.className=c,p.appendChild(l),p.appendChild(u),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var o=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,duration:this.duration_,easing:Le})):e.setResolution(o)}}},e}(Fr);function Br(t){var e=t||{},i=new j;return(void 0===e.zoom||e.zoom)&&i.push(new Vr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new Zr(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new Wr(e.attributionOptions)),i}var Hr=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};Hr.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Hr.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Hr.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var o=this.points_[e+2]-this.points_[i+2];if(o<1e3/60)return!1;var r=this.points_[e]-this.points_[i],n=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(n,r),this.initialVelocity_=Math.sqrt(r*r+n*n)/o,this.initialVelocity_>this.minVelocity_},Hr.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Hr.prototype.getAngle=function(){return this.angle_};var Kr=Hr,qr={ACTIVE:"active"};function Jr(t,e,i){var o=t.getCenter();if(o){var r=t.constrainCenter([o[0]+e[0],o[1]+e[1]]);i?t.animate({duration:i,easing:Oe,center:r}):t.setCenter(r)}}function Qr(t,e,i,o){e=t.constrainRotation(e,0),$r(t,e,i,o)}function $r(t,e,i,o){if(void 0!==e){var r=t.getRotation(),n=t.getCenter();void 0!==r&&n&&o>0?t.animate({rotation:e,anchor:i,duration:o,easing:Le}):t.rotate(e,i)}}function tn(t,e,i,o,r){e=t.constrainResolution(e,0,r),on(t,e,i,o)}function en(t,e,i,o){var r=t.getResolution(),n=t.constrainResolution(r,e,0);if(void 0!==n){var s=t.getResolutions();n=re(n,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==n&&n!==r){var a=t.getCenter(),h=t.calculateCenterZoom(n,i);h=t.constrainCenter(h),i=[(n*a[0]-r*h[0])/(n-r),(n*a[1]-r*h[1])/(n-r)]}on(t,n,i,o)}function on(t,e,i,o){if(e){var r=t.getResolution(),n=t.getCenter();if(void 0!==r&&n&&e!==r&&o)t.animate({resolution:e,anchor:i,duration:o,easing:Le});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}var rn=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(qr.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(qr.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(D);function nn(t){var e=!1;if(t.type==Q.DBLCLICK){var i=t.originalEvent,o=t.map,r=t.coordinate,n=i.shiftKey?-this.delta_:this.delta_;en(o.getView(),n,r,this.duration_),t.preventDefault(),e=!0}return!e}var sn=function(t){function e(e){t.call(this,{handleEvent:nn});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rn),an=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},hn=function(t){return t.target.getTargetElement()===document.activeElement},ln=x,un=function(t){var e=t.originalEvent;return 0==e.button&&!(Z&&V&&e.ctrlKey)},cn=R,pn=function(t){return"pointermove"==t.type},dn=function(t){return t.type==Q.SINGLECLICK},fn=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},gn=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_n=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},yn=function(t){var e=t.pointerEvent;return $t(void 0!==e,56),"mouse"==e.pointerType};function vn(t){for(var e=t.length,i=0,o=0,r=0;r<e;r++)i+=t[r].clientX,o+=t[r].clientY;return[i/e,o/e]}var mn=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Q.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Q.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Q.POINTERDOWN){var o=this.handleDownEvent(t);o&&t.preventDefault(),this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==Q.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Q.POINTERDOWN||e===Q.POINTERDRAG||e===Q.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==Q.POINTERUP?delete this.trackedPointers_[i]:(t.type==Q.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=u(this.trackedPointers_)}},e}(rn),En=function(t){function e(e){t.call(this,{stopDown:R});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:fn,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(Ee.INTERACTING,1));var e=this.targetPointers,i=vn(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],n=t.map.getView(),s=[o,r];Se(s,n.getResolution()),Re(s,n.getRotation()),Ce(s,n.getCenter()),s=n.constrainCenter(s),n.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),n=i.getCenter(),s=e.getPixelFromCoordinate(n),a=e.getCoordinateFromPixel([s[0]-o*Math.cos(r),s[1]-o*Math.sin(r)]);i.animate({center:i.constrainCenter(a),duration:500,easing:Le})}return this.panning_&&(this.panning_=!1,i.setHint(Ee.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(mn),Tn=function(t){function e(e){var i=e||{};t.call(this,{stopDown:R}),this.condition_=i.condition?i.condition:an,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(yn(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==_e){var o=e.getSize(),r=t.pixel,n=Math.atan2(o[1]/2-r[1],r[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=n-this.lastAngle_,a=i.getRotation();$r(i,a-s)}this.lastAngle_=n}}},e.prototype.handleUpEvent=function(t){if(!yn(t))return!0;var e=t.map.getView();e.setHint(Ee.INTERACTING,-1);var i=e.getRotation();return Qr(e,i,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!yn(t)&&(!(!un(t)||!this.condition_(t))&&(t.map.getView().setHint(Ee.INTERACTING,1),this.lastAngle_=void 0,!0))},e}(mn),Cn=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+i,o.top=Math.min(t[1],e[1])+i,o.width=Math.abs(e[0]-t[0])+i,o.height=Math.abs(e[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new ur([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(C),xn=Cn,Rn="boxstart",Sn="boxdrag",wn="boxend",Ln=function(t){function e(e,i,o){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I);function In(){var t,e,i=this.getMap(),o=i.getView(),r=i.getSize(),n=this.getGeometry().getExtent();if(this.out_){var s=o.calculateExtent(r),a=(t=[i.getPixelFromCoordinate(Qe(n)),i.getPixelFromCoordinate(si(n))],Be(ze(e),t));ci(s,1/o.getResolutionForExtent(a,r)),n=s}var h=o.constrainResolution(o.getResolutionForExtent(n,r)),l=ti(n);l=o.constrainCenter(l),o.animate({resolution:h,center:l,duration:this.duration_,easing:Le})}var On=function(t){function e(e){var i=e||{},o=i.condition?i.condition:gn;t.call(this,{condition:o,className:i.className||"ol-dragzoom",onBoxEnd:In}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this);var i=e||{};this.box_=new xn(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:S,this.startPixel_=null,this.condition_=i.condition?i.condition:ln,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var o=i[0]-e[0],r=i[1]-e[1];return o*o+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){yn(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ln(Sn,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!yn(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Ln(wn,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!yn(t)&&(!(!un(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ln(Rn,t.coordinate,t)),!0))},e}(mn)),Pn={LEFT:37,UP:38,RIGHT:39,DOWN:40};function Mn(t){var e=!1;if(t.type==P.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==Pn.DOWN||i==Pn.LEFT||i==Pn.RIGHT||i==Pn.UP)){var o=t.map.getView(),r=o.getResolution()*this.pixelDelta_,n=0,s=0;i==Pn.DOWN?s=-r:i==Pn.LEFT?n=-r:i==Pn.RIGHT?n=r:s=r;var a=[n,s];Re(a,o.getRotation()),Jr(o,a,this.duration_),t.preventDefault(),e=!0}}return!e}var bn=function(t){function e(e){t.call(this,{handleEvent:Mn});var i=e||{};this.defaultCondition_=function(t){return fn(t)&&_n(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rn);function An(t){var e=!1;if(t.type==P.KEYDOWN||t.type==P.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var o=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;en(o.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Fn=function(t){function e(e){t.call(this,{handleEvent:An});var i=e||{};this.condition_=i.condition?i.condition:_n,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rn),Nn="trackpad",Dn="wheel",Gn=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:ln,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Ee.INTERACTING,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==P.WHEEL&&e!==P.MOUSEWHEEL)return!0;t.preventDefault();var i,o=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==P.WHEEL?(i=r.deltaY,W&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=B),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==P.MOUSEWHEEL&&(i=-r.wheelDeltaY,U&&(i/=3)),0===i)return!1;var n=Date.now();if(void 0===this.startTime_&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?Nn:Dn),this.mode_===Nn){var s=o.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Ee.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),l=s.getMaxResolution(),u=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),u=1):a>l&&(a=Math.min(a,l*this.trackpadZoomBuffer_),u=-1),this.lastAnchor_){var c=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(c))}return s.setResolution(a),0===u&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,i>0?-1:1),easing:Le,anchor:this.lastAnchor_,duration:this.duration_}),u>0?s.animate({resolution:h,easing:Le,anchor:this.lastAnchor_,duration:500}):u<0&&s.animate({resolution:l,easing:Le,anchor:this.lastAnchor_,duration:500}),this.startTime_=n,!1}this.delta_+=i;var p=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),p),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();en(e,-re(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(rn),kn=function(t){function e(e){var i=e||{},o=i;o.stopDown||(o.stopDown=R),t.call(this,o),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],o=this.targetPointers[1],r=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){var n=r-this.lastAngle_;this.rotationDelta_+=n,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=n}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==_e){var h=s.getViewport().getBoundingClientRect(),l=vn(this.targetPointers);if(l[0]-=h.left,l[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(l),this.rotating_){var u=a.getRotation();s.render(),$r(a,u+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(Ee.INTERACTING,-1),this.rotating_){var i=e.getRotation();Qr(e,i,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(Ee.INTERACTING,1),!0}return!1},e}(mn),jn=function(t){function e(e){var i=e||{},o=i;o.stopDown||(o.stopDown=R),t.call(this,o),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],o=this.targetPointers[1],r=i.clientX-o.clientX,n=i.clientY-o.clientY,s=Math.sqrt(r*r+n*n);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),l=h.getResolution(),u=h.getMaxResolution(),c=h.getMinResolution(),p=l*e;p>u?(e=u/l,p=u):p<c&&(e=c/l,p=c),1!=e&&(this.lastScaleDelta_=e);var d=a.getViewport().getBoundingClientRect(),f=vn(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),on(h,p,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(Ee.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var o=this.lastScaleDelta_-1;tn(e,i,this.anchor_,this.duration_,o)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(Ee.INTERACTING,1),!0}return!1},e}(mn);function Yn(t){var e=t||{},i=new j,o=new Kr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new Tn),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new sn({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new En({condition:e.onFocusOnly?hn:void 0,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new kn),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new jn({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new bn),i.push(new Fn({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Gn({condition:e.onFocusOnly?hn:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new On({duration:e.zoomDuration})),i}var Xn={IDLE:0,LOADING:1,LOADED:2,ERROR:3},zn=function(t){function e(e,i,o,r,n){var s=void 0!==n?Xn.IDLE:Xn.LOADED;t.call(this,e,i,o,s),this.loader_=void 0!==n?n:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Xn.ERROR):this.state=Xn.LOADED,this.changed()},e.prototype.load=function(){this.state==Xn.IDLE&&(this.state=Xn.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(function(t){function i(e,i,o,r){t.call(this),this.extent=e,this.pixelRatio_=o,this.resolution=i,this.state=r}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.changed=function(){this.dispatchEvent(P.CHANGE)},i.prototype.getExtent=function(){return this.extent},i.prototype.getImage=function(){return e()},i.prototype.getPixelRatio=function(){return this.pixelRatio_},i.prototype.getResolution=function(){return this.resolution},i.prototype.getState=function(){return this.state},i.prototype.load=function(){e()},i}(O)),Wn={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},Un={IMAGE:"image",VECTOR:"vector"},Zn=function(t){function e(e,i,o,r,n){t.call(this,e),this.vectorContext=i,this.frameState=o,this.context=r,this.glContext=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),Vn=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(P.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return $t(void 0!==e,15),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_},e.prototype.remove=function(t){var e=this.entries_[t];return $t(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){$t(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(O),Bn="10px sans-serif",Hn=[0,0,0,1],Kn="round",qn=[],Jn="round",Qn=[0,0,0,1],$n="center",ts="middle",es=[0,0,0,0],is=new Vn,os={},rs=null,ns={},ss=function(){var t,e,i=os,o="32px ",r=["monospace","serif"],n=r.length,s="wmytzilWMYTZIL@#/&?$%10";function a(t){for(var i=as(),a=100;a<=700;a+=300){for(var h=a+" ",l=!0,u=0;u<n;++u){var c=r[u];if(i.font=h+o+c,e=i.measureText(s).width,t!=c){i.font=h+o+t+","+c;var p=i.measureText(s).width;l=l&&p!=e}}if(l)return!0}return!1}function h(){var e=!0;for(var o in i)i[o]<60&&(a(o)?(i[o]=60,l(ns),rs=null,is.clear()):(++i[o],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var o=jr(e);if(o)for(var r=0,n=o.length;r<n;++r){var s=o[r];s in i||(i[s]=60,a(s)||(i[s]=0,void 0===t&&(t=setInterval(h,32))))}}}();function as(){return rs||(rs=_r(1,1)),rs}var hs,ls,us=(ls=ns,function(t){var e=ls[t];return null==e&&(hs||((hs=document.createElement("span")).textContent="M",hs.style.margin=hs.style.padding="0 !important",hs.style.position="absolute !important",hs.style.left="-99999px !important"),hs.style.font=t,document.body.appendChild(hs),e=ls[t]=hs.offsetHeight,document.body.removeChild(hs)),e});function cs(t,e){var i=as();return t!=i.font&&(i.font=t),i.measureText(e).width}function ps(t,e,i,o){0!==e&&(t.translate(i,o),t.rotate(e),t.translate(-i,-o))}var ds=[1,0,0,1,0,0];function fs(t,e,i,o,r,n,s,a,h,l,u){var c;1!=i&&(c=t.globalAlpha,t.globalAlpha=c*i),e&&t.setTransform.apply(t,e),t.drawImage(o,r,n,s,a,h,l,s*u,a*u),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,ds)}var gs=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,_s=/^([a-z]*)$/i;function ys(t){return"string"==typeof t?t:Es(t)}var vs=function(){var t={},e=0;return function(i){var o;if(t.hasOwnProperty(i))o=t[i];else{if(e>=1024){var r=0;for(var n in t)0==(3&r++)&&(delete t[n],--e)}o=function(t){var e,i,o,r,n;_s.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t));if(gs.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var h=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),o=parseInt(t.substr(1+2*s,s),16),r=h?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,o=(o<<4)+o,h&&(r=(r<<4)+r)),n=[e,i,o,r/255]}else 0==t.indexOf("rgba(")?ms(n=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((n=t.slice(4,-1).split(",").map(Number)).push(1),ms(n)):$t(!1,14);return n}(i),t[i]=o,++e}return o}}();function ms(t){return t[0]=re(t[0]+.5|0,0,255),t[1]=re(t[1]+.5|0,0,255),t[2]=re(t[2]+.5|0,0,255),t[3]=re(t[3],0,1),t}function Es(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+i+","+o+","+(void 0===t[3]?1:t[3])+")"}function Ts(t){return Array.isArray(t)?Es(t):t}var Cs=function(){};Cs.prototype.drawCustom=function(t,e,i){},Cs.prototype.drawGeometry=function(t){},Cs.prototype.setStyle=function(t){},Cs.prototype.drawCircle=function(t,e){},Cs.prototype.drawFeature=function(t,e){},Cs.prototype.drawGeometryCollection=function(t,e){},Cs.prototype.drawLineString=function(t,e){},Cs.prototype.drawMultiLineString=function(t,e){},Cs.prototype.drawMultiPoint=function(t,e){},Cs.prototype.drawMultiPolygon=function(t,e){},Cs.prototype.drawPoint=function(t,e){},Cs.prototype.drawPolygon=function(t,e){},Cs.prototype.drawText=function(t,e){},Cs.prototype.setFillStrokeStyle=function(t,e){},Cs.prototype.setImageStyle=function(t,e){},Cs.prototype.setTextStyle=function(t,e){};var xs=Cs,Rs=function(t){function e(e,i,o,r,n){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=o,this.transform_=r,this.viewRotation_=n,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,o){if(this.image_){var r=_i(t,e,i,2,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.tmpLocalTransform_,a=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,u=r.length;l<u;l+=2){var c=r[l]-this.imageAnchorX_,p=r[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_){var d=c+this.imageAnchorX_,f=p+this.imageAnchorY_;co(s,d,f,this.imageScale_,this.imageScale_,h,-d,-f),n.setTransform.apply(n,s)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=_i(t,e,i,o,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=o){var a=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=co(this.tmpLocalTransform_,a,h,this.textScale_,this.textScale_,s,-a,-h);n.setTransform.apply(n,l)}this.textStrokeState_&&n.strokeText(this.text_,a,h),this.textFillState_&&n.fillText(this.text_,a,h)}0===s&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,o,r){var n=this.context_,s=_i(t,e,i,o,this.transform_,this.pixelCoordinates_);n.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var h=2;h<a;h+=2)n.lineTo(s[h],s[h+1]);return r&&n.closePath(),i},e.prototype.drawRings_=function(t,e,i,o){for(var r=0,n=i.length;r<n;++r)e=this.moveToLineTo_(t,e,i[r],o,!0);return e},e.prototype.drawCircle=function(t){if(hi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=vo(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],r=Math.sqrt(i*i+o*o),n=this.context_;n.beginPath(),n.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case fi.POINT:this.drawPoint(t);break;case fi.LINE_STRING:this.drawLineString(t);break;case fi.POLYGON:this.drawPolygon(t);break;case fi.MULTI_POINT:this.drawMultiPoint(t);break;case fi.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case fi.MULTI_POLYGON:this.drawMultiPolygon(t);break;case fi.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case fi.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&hi(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(hi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(hi(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),r=0,n=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=n.length;a<h;++a)r=this.moveToLineTo_(o,r,n[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(hi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(hi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),o=0,r=t.getEndss(),n=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var h=r[s];o=this.drawRings_(i,o,h,n)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),H&&(jt(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,H&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:$n;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=o&&(i.textAlign=e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Ts(i||Hn)}}else this.fillState_=null;if(e){var o=e.getColor(),r=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:Kn,lineDash:n||qn,lineDashOffset:s||0,lineJoin:void 0!==a?a:Jn,lineWidth:this.pixelRatio_*(void 0!==h?h:1),miterLimit:void 0!==l?l:10,strokeStyle:Ts(o||Qn)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),o=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Ts(i||Hn)}}else this.textFillState_=null;var o=t.getStroke();if(o){var r=o.getColor(),n=o.getLineCap(),s=o.getLineDash(),a=o.getLineDashOffset(),h=o.getLineJoin(),l=o.getWidth(),u=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:Kn,lineDash:s||qn,lineDashOffset:a||0,lineJoin:void 0!==h?h:Jn,lineWidth:void 0!==l?l:1,miterLimit:void 0!==u?u:10,strokeStyle:Ts(r||Qn)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),_=t.getScale(),y=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:Bn,textAlign:void 0!==v?v:$n,textBaseline:void 0!==m?m:ts},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==_?_:1)}else this.text_=""},e}(xs),Ss=Rs,ws=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Ls(t,e,i){return e+":"+t+":"+(i?ys(i):"null")}ws.prototype.clear=function(){this.cache_={},this.cacheSize_=0},ws.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},ws.prototype.get=function(t,e,i){var o=Ls(t,e,i);return o in this.cache_?this.cache_[o]:null},ws.prototype.set=function(t,e,i,o){var r=Ls(t,e,i);this.cache_[r]=o,++this.cacheSize_},ws.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var Is=new ws,Os=function(t){function i(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.dispatchRenderEvent=function(t,i){e()},i.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},i.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;co(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),po(ao(o,i))},i.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},i.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,s,a){var h,l=e.viewState,u=l.resolution;function c(t,i){var s=e.layerStates[o(i)].managed;if(!(o(t)in e.skippedFeatureUids)||s)return r.call(n,t,s?i:null)}var p=l.projection,d=t;if(p.canWrapX()){var f=p.getExtent(),g=ai(f),_=t[0];if(_<f[0]||_>f[2])d=[_+g*Math.ceil((f[0]-_)/g),t[1]]}var y,v=e.layerStatesArray;for(y=v.length-1;y>=0;--y){var m=v[y],E=m.layer;if(Yr(m,u)&&s.call(a,E)){var T=this.getLayerRenderer(E),C=E.getSource();if(C&&(h=T.forEachFeatureAtCoordinate(C.getWrapX()?d:t,e,i,c)),h)return h}}},i.prototype.forEachLayerAtPixel=function(t,i,o,r,n,s,a){return e()},i.prototype.hasFeatureAtCoordinate=function(t,e,i,o,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,x,this,o,r)},i.prototype.getLayerRenderer=function(t){var e=o(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,r=0,n=this.layerRendererConstructors_.length;r<n;++r){var s=this.layerRendererConstructors_[r];if(s.handles(t)){i=s.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=_(i,P.CHANGE,this.handleLayerRendererChange_,this),i},i.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},i.prototype.getLayerRenderers=function(){return this.layerRenderers_},i.prototype.getMap=function(){return this.map_},i.prototype.handleLayerRendererChange_=function(){this.map_.render()},i.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],m(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},i.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},i.prototype.renderFrame=function(t){e()},i.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Ps)},i.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},i}(C);function Ps(t,e){Is.expire()}function Ms(t,e){return t.zIndex-e.zIndex}var bs=[],As=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=_r(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Dr,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),o=this.context_;if(i.hasListener(t)){var r=e.extent,n=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),h=new Ss(o,n,r,a,s),l=new Zn(t,h,e,o,null);i.dispatchEvent(l)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,o=this.canvas_.height/2,r=t.pixelRatio/e.resolution,n=-r,s=-e.rotation,a=-e.center[0],h=-e.center[1];return co(this.transform_,i,o,r,n,s,a,h)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,o=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=o||this.canvas_.height!=r?(this.canvas_.width=o,this.canvas_.height=r):e.clearRect(0,0,o,r);var n=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(Jt.PRECOMPOSE,t);var s=t.layerStatesArray;Yt(s,Ms),n&&(e.save(),ps(e,n,o/2,r/2));var a,h,l=t.viewState.resolution;for(a=0,h=s.length;a<h;++a){var u=s[a],c=u.layer,p=this.getLayerRenderer(c);Yr(u,l)&&u.sourceState==Rr.READY&&(p.prepareFrame(t,u)&&p.composeFrame(t,u,e))}n&&e.restore(),this.dispatchRenderEvent(Jt.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,o,r,n,s){var a,h,l=e.viewState.resolution,u=e.layerStatesArray,c=u.length,p=ho(e.pixelToCoordinateTransform,t.slice());for(h=c-1;h>=0;--h){var d=u[h],f=d.layer;if(Yr(d,l)&&n.call(s,f))if(a=this.getLayerRenderer(f).forEachLayerAtCoordinate(p,e,i,o,r))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,o=e.length;i<o;++i){var r=e[i];Nt(bs,r)||bs.push(r)}},e}(Os),Fs=As,Ns=function(t){function i(e){t.call(this,e),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clip=function(t,e,i){var o=e.pixelRatio,r=e.size[0]*o,n=e.size[1]*o,s=e.viewState.rotation,a=ni(i),h=si(i),l=$e(i),u=Qe(i);ho(e.coordinateToPixelTransform,a),ho(e.coordinateToPixelTransform,h),ho(e.coordinateToPixelTransform,l),ho(e.coordinateToPixelTransform,u),t.save(),ps(t,-s,r/2,n/2),t.beginPath(),t.moveTo(a[0]*o,a[1]*o),t.lineTo(h[0]*o,h[1]*o),t.lineTo(l[0]*o,l[1]*o),t.lineTo(u[0]*o,u[1]*o),t.clip(),ps(t,s,r/2,n/2)},i.prototype.dispatchComposeEvent_=function(t,e,i,o){var r=this.getLayer();if(r.hasListener(t)){var n=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;ps(e,-a,n/2,s/2);var h=void 0!==o?o:this.getTransform(i,0),l=new Ss(e,i.pixelRatio,i.extent,h,i.viewState.rotation),u=new Zn(t,l,i,e,null);r.dispatchEvent(u),ps(e,a,n/2,s/2)}},i.prototype.forEachLayerAtCoordinate=function(t,e,i,o,r){return this.forEachFeatureAtCoordinate(t,e,i,x)?o.call(r,this.getLayer(),null):void 0},i.prototype.postCompose=function(t,e,i,o){this.dispatchComposeEvent_(Jt.POSTCOMPOSE,t,e,o)},i.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(Jt.PRECOMPOSE,t,e,i)},i.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(Jt.RENDER,t,e,i)},i.prototype.getTransform=function(t,e){var i=t.viewState,o=t.pixelRatio,r=o*t.size[0]/2,n=o*t.size[1]/2,s=o/i.resolution,a=-s,h=-i.rotation,l=-i.center[0]+e,u=-i.center[1];return co(this.transform_,r,n,s,a,h,l,u)},i.prototype.composeFrame=function(t,i,o){e()},i.prototype.prepareFrame=function(t,i){return e()},i}(function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(o,r){return t.forEachLoadedTile(e,o,r,(function(t){i[o]||(i[o]={}),i[o][t.tileCoord.toString()]=t}))}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===Xn.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=Xn.LOADED&&e!=Xn.ERROR&&_(t,P.CHANGE,this.handleImageChange_,this),e==Xn.IDLE&&(t.load(),e=t.getState()),e==Xn.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Rr.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,r){var n=o(e),s=i.toString();n in t?s in t[n]?t[n][s].extend(r):t[n][s]=r:(t[n]={},t[n][s]=r)},e.prototype.manageTilePyramid=function(t,e,i,r,n,s,a,h,l,u){var c=o(e);c in t.wantedTiles||(t.wantedTiles[c]={});var p,d,f,g,_,y,v=t.wantedTiles[c],m=t.tileQueue;for(y=i.getMinZoom();y<=a;++y)for(d=i.getTileRangeForExtentAndZ(s,y,d),f=i.getResolution(y),g=d.minX;g<=d.maxX;++g)for(_=d.minY;_<=d.maxY;++_)a-y<=h?((p=e.getTile(y,g,_,r,n)).getState()==Qt.IDLE&&(v[p.getKey()]=!0,m.isKeyQueued(p.getKey())||m.enqueue([p,c,i.getTileCoordCenter(p.tileCoord),f])),void 0!==l&&l.call(u,p)):e.useTile(y,g,_,n)},e}(b)),Ds=Ns,Gs=function(t){function i(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var o=this.getImage();if(o){var r=e.extent,n=void 0!==r&&!Ge(r,t.extent)&&hi(r,t.extent);n&&this.clip(i,t,r);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var h=s[4],l=s[5],u=o.width*s[0],c=o.height*s[3];u>=.5&&c>=.5&&i.drawImage(o,0,0,+o.width,+o.height,Math.round(h),Math.round(l),Math.round(u),Math.round(c)),i.globalAlpha=a,n&&i.restore()}this.postCompose(i,t,e)},i.prototype.getImage=function(){return e()},i.prototype.getImageTransform=function(){return e()},i.prototype.forEachLayerAtCoordinate=function(t,e,i,o,r){if(this.getImage()){var n=ho(this.coordinateToCanvasPixelTransform,t.slice());Se(n,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=_r(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),n[0],n[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?o.call(r,this.getLayer(),s):void 0}},i}(Ds),ks=Gs,js=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===Wn.VECTOR)for(var o=0,r=bs.length;o<r;++o){var n=bs[o];if(n!==e&&n.handles(i)){this.vectorRenderer_=new n(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,o=t.pixelRatio,r=t.size,n=t.viewState,s=n.center,a=n.resolution,l=this.getLayer().getSource(),u=t.viewHints,c=this.vectorRenderer_,p=t.extent;if(c||void 0===e.extent||(p=ri(p,e.extent)),!u[Ee.ANIMATING]&&!u[Ee.INTERACTING]&&!li(p)){var d=n.projection,f=this.skippedFeatures_;if(c){var g=c.context,_=h({},t,{size:[ai(p)/a,oi(p)/a],viewState:h({},t.viewState,{rotation:0})}),y=Object.keys(_.skippedFeatureUids).sort();i=new zn(p,a,o,g.canvas,(function(t){!c.prepareFrame(_,e)||!c.replayGroupChanged&&jt(f,y)||(g.canvas.width=_.size[0]*o,g.canvas.height=_.size[1]*o,c.compose(g,_,e),f=y,t())}))}else i=l.getImage(p,a,o,d);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=f)}if(this.image_){var v=(i=this.image_).getExtent(),m=i.getResolution(),E=i.getPixelRatio(),T=o*m/(a*E),C=co(this.imageTransform_,o*r[0]/2,o*r[1]/2,T,T,0,E*(v[0]-s[0])/m,E*(s[1]-v[3])/m);co(this.coordinateToCanvasPixelTransform,o*r[0]/2-C[4],o*r[1]/2-C[5],o/a,-o/a,0,-s[0],-s[1]),this.renderedResolution=m*o/E}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,o,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,o,r):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,o,r)},e}(ks);js.handles=function(t){return t.getType()===Wn.IMAGE||t.getType()===Wn.VECTOR&&t.getRenderMode()===Un.IMAGE},js.create=function(t,e){return new js(e)};var Ys=js,Xs=function(t,e,i,o){this.minX=t,this.maxX=e,this.minY=i,this.maxY=o};function zs(t,e,i,o,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=o,r):new Xs(t,e,i,o)}Xs.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Xs.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Xs.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Xs.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Xs.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Xs.prototype.getHeight=function(){return this.maxY-this.minY+1},Xs.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Xs.prototype.getWidth=function(){return this.maxX-this.minX+1},Xs.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Ws=Xs,Us=function(t){function e(e,i){t.call(this,e),this.context=i?null:_r(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Ws(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),o=e.getUseInterimTilesOnError();return i==Qt.LOADED||i==Qt.EMPTY||i==Qt.ERROR&&!o},e.prototype.getTile=function(t,e,i,o,r){var n=this.getLayer(),s=n.getSource().getTile(t,e,i,o,r);return s.getState()==Qt.ERROR&&(n.getUseInterimTilesOnError()?n.getPreload()>0&&(this.newTiles_=!0):s.setState(Qt.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,r=t.size,n=t.viewState,s=n.projection,a=n.resolution,h=n.center,l=this.getLayer(),u=l.getSource(),c=u.getRevision(),p=u.getTileGridForProjection(s),d=p.getZForResolution(a,this.zDirection),f=p.getResolution(d),g=Math.round(a/f)||1,_=t.extent;if(void 0!==e.extent&&(_=ri(_,e.extent)),li(_))return!1;var y=p.getTileRangeForExtentAndZ(_,d),v=p.getTileRangeExtent(d,y),m=u.getTilePixelRatio(i),E={};E[d]={};var T,C,x,R=this.createLoadedTileFinder(u,s,E),S=t.viewHints,w=S[Ee.ANIMATING]||S[Ee.INTERACTING],L=this.tmpExtent,I=this.tmpTileRange_;for(this.newTiles_=!1,C=y.minX;C<=y.maxX;++C)for(x=y.minY;x<=y.maxY;++x)if(!(Date.now()-t.time>16&&w)){if(T=this.getTile(d,C,x,i,s),this.isDrawableTile_(T)){var O=o(this);if(T.getState()==Qt.LOADED){E[d][T.tileCoord.toString()]=T;var P=T.inTransition(O);this.newTiles_||!P&&-1!==this.renderedTiles.indexOf(T)||(this.newTiles_=!0)}if(1===T.getAlpha(O,t.time))continue}var M=p.getTileCoordChildTileRange(T.tileCoord,I,L),b=!1;M&&(b=R(d+1,M)),b||p.forEachTileCoordParentTileRange(T.tileCoord,R,null,I,L)}var A=f*i/m*g;if(!(this.renderedResolution&&Date.now()-t.time>16&&w)&&(this.newTiles_||!this.renderedExtent_||!Ge(this.renderedExtent_,_)||this.renderedRevision!=c||g!=this.oversampling_||!w&&A!=this.renderedResolution)){var F=this.context;if(F){var N=u.getTilePixelSize(d,i,s),D=Math.round(y.getWidth()*N[0]/g),G=Math.round(y.getHeight()*N[1]/g),k=F.canvas;k.width!=D||k.height!=G?(this.oversampling_=g,k.width=D,k.height=G):((this.renderedExtent_&&!Ue(v,this.renderedExtent_)||this.renderedRevision!=c)&&F.clearRect(0,0,D,G),g=this.oversampling_)}this.renderedTiles.length=0;var j,Y,X,z,W,U,Z,V,B,H,K=Object.keys(E).map(Number);for(K.sort((function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0})),z=0,W=K.length;z<W;++z)for(var q in X=K[z],Y=u.getTilePixelSize(X,i,s),j=p.getResolution(X)/f,Z=m*u.getGutterForProjection(s),V=E[X])T=V[q],C=((U=p.getTileCoordExtent(T.getTileCoord(),L))[0]-v[0])/f*m/g,x=(v[3]-U[3])/f*m/g,B=Y[0]*j/g,H=Y[1]*j/g,this.drawTileImage(T,t,e,C,x,B,H,Z,d===X),this.renderedTiles.push(T);this.renderedRevision=c,this.renderedResolution=f*i/m*g,this.renderedExtent_=v}var J=this.renderedResolution/a,Q=co(this.imageTransform_,i*r[0]/2,i*r[1]/2,J,J,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*i,(h[1]-this.renderedExtent_[3])/this.renderedResolution*i);return co(this.coordinateToCanvasPixelTransform,i*r[0]/2-Q[4],i*r[1]/2-Q[5],i/a,-i/a,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,u,d,y),this.manageTilePyramid(t,u,p,i,s,_,d,l.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,r,n,s,a,h,l){var u=this.getTileImage(t);if(u){var c=o(this),p=l?t.getAlpha(c,e.time):1,d=this.getLayer().getSource();1!==p||d.getOpaque(e.viewState.projection)||this.context.clearRect(r,n,s,a);var f=p!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,h,h,u.width-2*h,u.height-2*h,r,n,s,a),f&&this.context.restore(),1!==p?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(ks);Us.handles=function(t){return t.getType()===Wn.TILE},Us.create=function(t,e){return new Us(e)},Us.prototype.getLayer;var Zs=Us,Vs={};(Vs=Hs).default=Hs;var Bs={};function Hs(t,e){if(!(this instanceof Hs))return new Hs(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ks(t,e,i){if(!i)return e.indexOf(t);for(var o=0;o<e.length;o++)if(i(t,e[o]))return o;return-1}function qs(t,e){Js(t,0,t.children.length,e,t)}function Js(t,e,i,o,r){r||(r=na(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var n,s=e;s<i;s++)n=t.children[s],Qs(r,t.leaf?o(n):n);return r}function Qs(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function $s(t,e){return t.minX-e.minX}function ta(t,e){return t.minY-e.minY}function ea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ia(t){return t.maxX-t.minX+(t.maxY-t.minY)}function oa(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ra(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function na(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sa(t,e,i,o,r){for(var n,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=o||(n=e+Math.ceil((i-e)/o/2)*o,Bs(t,n,e,i,r),s.push(e,n,n,i))}Bs=function(){function t(t,i,r,n,s){e(t,i,r||0,n||t.length-1,s||o)}function e(t,o,r,n,s){for(;n>r;){if(n-r>600){var a=n-r+1,h=o-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1);e(t,o,Math.max(r,Math.floor(o-h*u/a+c)),Math.min(n,Math.floor(o+(a-h)*u/a+c)),s)}var p=t[o],d=r,f=n;for(i(t,r,o),s(t[n],p)>0&&i(t,r,n);d<f;){for(i(t,d,f),d++,f--;s(t[d],p)<0;)d++;for(;s(t[f],p)>0;)f--}0===s(t[r],p)?i(t,r,f):i(t,++f,n),f<=o&&(r=f+1),o<=f&&(n=f-1)}}function i(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function o(t,e){return t<e?-1:t>e?1:0}return t}(),Hs.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],o=this.toBBox;if(!ra(t,e))return i;for(var r,n,s,a,h=[];e;){for(r=0,n=e.children.length;r<n;r++)s=e.children[r],ra(t,a=e.leaf?o(s):s)&&(e.leaf?i.push(s):oa(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!ra(t,e))return!1;for(var o,r,n,s,a=[];e;){for(o=0,r=e.children.length;o<r;o++)if(n=e.children[o],ra(t,s=e.leaf?i(n):n)){if(e.leaf||oa(t,s))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var o=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var r=this.data;this.data=o,o=r}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=na([]),this},remove:function(t,e){if(!t)return this;for(var i,o,r,n,s=this.data,a=this.toBBox(t),h=[],l=[];s||h.length;){if(s||(s=h.pop(),o=h[h.length-1],i=l.pop(),n=!0),s.leaf&&-1!==(r=Ks(t,s.children,e)))return s.children.splice(r,1),h.push(s),this._condense(h),this;n||s.leaf||!oa(s,a)?o?(i++,s=o.children[i],n=!1):s=null:(h.push(s),l.push(i),i=0,o=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:$s,compareMinY:ta,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,o){var r,n=i-e+1,s=this._maxEntries;if(n<=s)return qs(r=na(t.slice(e,i+1)),this.toBBox),r;o||(o=Math.ceil(Math.log(n)/Math.log(s)),s=Math.ceil(n/Math.pow(s,o-1))),(r=na([])).leaf=!1,r.height=o;var a,h,l,u,c=Math.ceil(n/s),p=c*Math.ceil(Math.sqrt(s));for(sa(t,e,i,p,this.compareMinX),a=e;a<=i;a+=p)for(sa(t,a,l=Math.min(a+p-1,i),c,this.compareMinY),h=a;h<=l;h+=c)u=Math.min(h+c-1,l),r.children.push(this._build(t,h,u,o-1));return qs(r,this.toBBox),r},_chooseSubtree:function(t,e,i,o){for(var r,n,s,a,h,l,u,c,p,d;o.push(e),!e.leaf&&o.length-1!==i;){for(u=c=1/0,r=0,n=e.children.length;r<n;r++)h=ea(s=e.children[r]),p=t,d=s,(l=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h)<c?(c=l,u=h<u?h:u,a=s):l===c&&h<u&&(u=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var o=this.toBBox,r=i?t:o(t),n=[],s=this._chooseSubtree(r,this.data,e,n);for(s.children.push(t),Qs(s,r);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(r,n,e)},_split:function(t,e){var i=t[e],o=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,o);var n=this._chooseSplitIndex(i,r,o),s=na(i.children.splice(n,i.children.length-n));s.height=i.height,s.leaf=i.leaf,qs(i,this.toBBox),qs(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=na([t,e]),this.data.height=t.height+1,this.data.leaf=!1,qs(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var o,r,n,s,a,h,l,u,c,p,d,f,g,_;for(h=l=1/0,o=e;o<=i-e;o++)r=Js(t,0,o,this.toBBox),n=Js(t,o,i,this.toBBox),c=r,p=n,d=void 0,f=void 0,g=void 0,_=void 0,d=Math.max(c.minX,p.minX),f=Math.max(c.minY,p.minY),g=Math.min(c.maxX,p.maxX),_=Math.min(c.maxY,p.maxY),s=Math.max(0,g-d)*Math.max(0,_-f),a=ea(r)+ea(n),s<h?(h=s,u=o,l=a<l?a:l):s===h&&a<l&&(l=a,u=o);return u},_chooseSplitAxis:function(t,e,i){var o=t.leaf?this.compareMinX:$s,r=t.leaf?this.compareMinY:ta;this._allDistMargin(t,e,i,o)<this._allDistMargin(t,e,i,r)&&t.children.sort(o)},_allDistMargin:function(t,e,i,o){t.children.sort(o);var r,n,s=this.toBBox,a=Js(t,0,e,s),h=Js(t,i-e,i,s),l=ia(a)+ia(h);for(r=e;r<i-e;r++)n=t.children[r],Qs(a,t.leaf?s(n):n),l+=ia(a);for(r=i-e-1;r>=e;r--)n=t.children[r],Qs(h,t.leaf?s(n):n),l+=ia(h);return l},_adjustParentBBoxes:function(t,e,i){for(var o=i;o>=0;o--)Qs(e[o],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():qs(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var aa=function(){};aa.prototype.getReplay=function(t,i){return e()},aa.prototype.isEmpty=function(){return e()},aa.prototype.addDeclutter=function(t){return e()};var ha=aa,la={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function ua(t,e,i,o){for(var r=t[e],n=t[e+1],s=0,a=e+o;a<i;a+=o){var h=t[a],l=t[a+1];s+=Math.sqrt((h-r)*(h-r)+(l-n)*(l-n)),r=h,n=l}return s}function ca(t,e,i,o,r,n,s,a){for(var h,l,u,c=[],p=t[e]>t[i-o],d=r.length,f=t[e],g=t[e+1],_=t[e+=o],y=t[e+1],v=0,m=Math.sqrt(Math.pow(_-f,2)+Math.pow(y-g,2)),E="",T=0,C=0;C<d;++C){l=p?d-C-1:C;var x=r.charAt(l),R=n(E=p?x+E:E+x)-T;T+=R;for(var S=s+R/2;e<i-o&&v+m<S;)f=_,g=y,_=t[e+=o],y=t[e+1],v+=m,m=Math.sqrt(Math.pow(_-f,2)+Math.pow(y-g,2));var w=S-v,L=Math.atan2(y-g,_-f);if(p&&(L+=L>0?-Math.PI:Math.PI),void 0!==u){var I=L-u;if(I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>a)return null}var O=w/m,P=ce(f,_,O),M=ce(g,y,O);u==L?(p&&(h[0]=P,h[1]=M,h[2]=R/2),h[4]=E):(T=R,h=[P,M,R/2,L,E=x],p?c.unshift(h):c.push(h),u=L),s+=R}return c}var pa={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},da=[pa.FILL],fa=[pa.STROKE],ga=[pa.BEGIN_PATH],_a=[pa.CLOSE_PATH],ya=pa,va=[la.POLYGON,la.CIRCLE,la.LINE_STRING,la.IMAGE,la.TEXT,la.DEFAULT],ma={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Ea=[1/0,1/0,-1/0,-1/0],Ta=[1,0,0,1,0,0],Ca=function(t){function e(e,i,o,r,n,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=i,this.overlaps=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=o,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,o,r,n,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,r),t.lineTo.apply(t,e),n&&(this.alignFill_=n[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,i,o,r,n,s,a,h,l,u,c,p,d,f,g,_,y){var v=_||y;e-=r*=p,i-=n*=p;var m,E,T,C,x=f+l>o.width?o.width-l:f,R=a+u>o.height?o.height-u:a,S=g[3]+x*p+g[1],w=g[0]+R*p+g[2],L=e-g[3],I=i-g[0];(v||0!==c)&&(m=[L,I],E=[L+S,I],T=[L+S,I+w],C=[L,I+w]);var O=null;if(0!==c){var P=e+r,M=i+n;O=co(Ta,P,M,1,1,c,-P,-M),ze(Ea),Ve(Ea,ho(Ta,m)),Ve(Ea,ho(Ta,E)),Ve(Ea,ho(Ta,T)),Ve(Ea,ho(Ta,C))}else Xe(L,I,L+S,I+w,Ea);var b=t.canvas,A=y?y[2]*p/2:0,F=Ea[0]-A<=b.width&&Ea[2]+A>=0&&Ea[1]-A<=b.height&&Ea[3]+A>=0;if(d&&(e=Math.round(e),i=Math.round(i)),s){if(!F&&1==s[4])return;Ze(s,Ea);var N=F?[t,O?O.slice(0):null,h,o,l,u,x,R,e,i,p]:null;N&&v&&N.push(_,y,m,E,T,C),s.push(N)}else F&&(v&&this.replayTextBackground_(t,m,E,T,C,_,y),fs(t,O,h,o,l,u,x,R,e,i,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,o,r,n){var s=this.coordinates.length,a=this.getBufferedMaxExtent();n&&(e+=o);var h,l,u,c=[t[e],t[e+1]],p=[NaN,NaN],d=!0;for(h=e+o;h<i;h+=o)p[0]=t[h],p[1]=t[h+1],(u=je(a,p))!==l?(d&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):u===Me.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):d=!0,c[0]=p[0],c[1]=p[1],l=u;return(r&&d||h===e+o)&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){var a=i[n],h=this.appendFlatCoordinates(t,e,a,o,!1,!1);r.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var o,r,n,s,a,h=t.getType(),l=t.getStride(),u=this.coordinates.length;if(h==fi.MULTI_POLYGON){o=t.getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var p=0,d=c.length;p<d;++p){var f=[];a=this.drawCustomCoordinates_(o,a,c[p],l,f),s.push(f)}this.instructions.push([ya.CUSTOM,u,s,t,i,Do])}else h==fi.POLYGON||h==fi.MULTI_LINE_STRING?(n=[],o=h==fi.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(o,0,t.getEnds(),l,n),this.instructions.push([ya.CUSTOM,u,n,t,i,No])):h==fi.LINE_STRING||h==fi.MULTI_POINT?(o=t.getFlatCoordinates(),r=this.appendFlatCoordinates(o,0,o.length,l,!1,!1),this.instructions.push([ya.CUSTOM,u,r,t,i,Fo])):h==fi.POINT&&(o=t.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),r=this.coordinates.length,this.instructions.push([ya.CUSTOM,u,r,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[ya.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ya.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=ho(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,ds)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],H&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(o)){this.declutterTree.insert(o);for(var r=5,n=t.length;r<n;++r){var s=t[r];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),fs.apply(void 0,s))}}t.length=5,ze(t)}}},e.prototype.replay_=function(t,e,i,r,n,s,a){var h;this.pixelCoordinates_&&jt(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=_i(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),ao(this.renderedTransform_,e));for(var l,u,p,d,f,g,_,y,v,m,E,T,C=!c(i),x=0,R=r.length,S=0,w=0,L=0,I=null,O=null,P=this.coordinateCache_,M=this.viewRotation_,b={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},A=this.instructions!=r||this.overlaps?0:200;x<R;){var F=r[x];switch(F[0]){case ya.BEGIN_GEOMETRY:m=F[1],C&&i[o(m)]||!m.getGeometry()?x=F[2]:void 0===a||hi(a,m.getGeometry().getExtent())?++x:x=F[2]+1;break;case ya.BEGIN_PATH:w>A&&(this.fill_(t),w=0),L>A&&(t.stroke(),L=0),w||L||(t.beginPath(),d=f=NaN),++x;break;case ya.CIRCLE:var N=h[S=F[1]],D=h[S+1],G=h[S+2]-N,k=h[S+3]-D,j=Math.sqrt(G*G+k*k);t.moveTo(N+j,D),t.arc(N,D,j,0,2*Math.PI,!0),++x;break;case ya.CLOSE_PATH:t.closePath(),++x;break;case ya.CUSTOM:S=F[1],l=F[2];var Y=F[3],X=F[4],z=6==F.length?F[5]:void 0;b.geometry=Y,b.feature=m,x in P||(P[x]=[]);var W=P[x];z?z(h,S,l,2,W):(W[0]=h[S],W[1]=h[S+1],W.length=2),X(W,b),++x;break;case ya.DRAW_IMAGE:S=F[1],l=F[2],v=F[3],u=F[4],p=F[5],y=s?null:F[6];var U=F[7],Z=F[8],V=F[9],B=F[10],H=F[11],K=F[12],q=F[13],J=F[14],Q=void 0,$=void 0,tt=void 0;for(F.length>16?(Q=F[15],$=F[16],tt=F[17]):(Q=es,$=tt=!1),H&&(K+=M);S<l;S+=2)this.replayImage_(t,h[S],h[S+1],v,u,p,y,U,Z,V,B,K,q,n,J,Q,$?I:null,tt?O:null);this.renderDeclutter_(y,m),++x;break;case ya.DRAW_CHARS:var et=F[1],it=F[2],ot=F[3];y=s?null:F[4];var rt=F[5],nt=F[6],st=F[7],at=F[8],ht=F[9],lt=F[10],ut=F[11],ct=F[12],pt=F[13],dt=F[14],ft=ua(h,et,it,2),gt=at(ct);if(rt||gt<=ft){var _t=this,yt=_t.textStates[pt].textAlign,vt=ca(h,et,it,2,ct,at,(ft-gt)*ma[yt],st);if(vt){var mt=void 0,Et=void 0,Tt=void 0,Ct=void 0,xt=void 0;if(lt)for(mt=0,Et=vt.length;mt<Et;++mt)Tt=(xt=vt[mt])[4],Ct=_t.getImage(Tt,pt,"",lt),u=xt[2]+ut,p=ot*Ct.height+2*(.5-ot)*ut-ht,this.replayImage_(t,xt[0],xt[1],Ct,u,p,y,Ct.height,1,0,0,xt[3],dt,!1,Ct.width,es,null,null);if(nt)for(mt=0,Et=vt.length;mt<Et;++mt)Tt=(xt=vt[mt])[4],Ct=_t.getImage(Tt,pt,nt,""),u=xt[2],p=ot*Ct.height-ht,this.replayImage_(t,xt[0],xt[1],Ct,u,p,y,Ct.height,1,0,0,xt[3],dt,!1,Ct.width,es,null,null)}}this.renderDeclutter_(y,m),++x;break;case ya.END_GEOMETRY:if(void 0!==s){var Rt=s(m=F[1]);if(Rt)return Rt}++x;break;case ya.FILL:A?w++:this.fill_(t),++x;break;case ya.MOVE_TO_LINE_TO:for(S=F[1],l=F[2],E=h[S],_=(T=h[S+1])+.5|0,(g=E+.5|0)===d&&_===f||(t.moveTo(E,T),d=g,f=_),S+=2;S<l;S+=2)g=(E=h[S])+.5|0,_=(T=h[S+1])+.5|0,S!=l-2&&g===d&&_===f||(t.lineTo(E,T),d=g,f=_);++x;break;case ya.SET_FILL_STYLE:I=F,this.alignFill_=F[2],w&&(this.fill_(t),w=0,L&&(t.stroke(),L=0)),t.fillStyle=F[1],++x;break;case ya.SET_STROKE_STYLE:O=F,L&&(t.stroke(),L=0),this.setStrokeStyle_(t,F),++x;break;case ya.STROKE:A?L++:t.stroke(),++x;break;default:++x}}w&&this.fill_(t),L&&t.stroke()},e.prototype.replay=function(t,e,i,o,r){this.viewRotation_=i,this.replay_(t,e,o,this.instructions,r,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,o,r,n){return this.viewRotation_=i,this.replay_(t,e,o,this.hitDetectionInstructions,!0,r,n)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,o,r=e.length,n=-1;for(t=0;t<r;++t)(o=(i=e[t])[0])==ya.END_GEOMETRY?n=t:o==ya.BEGIN_GEOMETRY&&(i[2]=t,Gt(this.hitDetectionInstructions,n,t),n=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var o=t.getColor();i.fillStyle=Ts(o||Hn)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=Ts(r||Qn);var n=e.getLineCap();i.lineCap=void 0!==n?n:Kn;var s=e.getLineDash();i.lineDash=s?s.slice():qn;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:Jn;var l=e.getWidth();i.lineWidth=void 0!==l?l:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,o=[ya.SET_FILL_STYLE,i];return"string"!=typeof i&&o.push(!0),o},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ya.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var o=t.fillStyle;"string"==typeof o&&t.currentFillStyle==o||(void 0!==o&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=o)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,o=t.lineCap,r=t.lineDash,n=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||r!=t.currentLineDash&&!jt(t.currentLineDash,r)||t.currentLineDashOffset!=n||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=r,t.currentLineDashOffset=n,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[ya.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Fe(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Ae(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(xs),xa=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,o){return this.appendFlatCoordinates(t,e,i,o,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length,n=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([ya.DRAW_IMAGE,r,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ya.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length,n=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([ya.DRAW_IMAGE,r,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ya.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),o=t.getSize(),r=t.getHitDetectionImage(1),n=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=n,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=o[0]},e}(Ca),Ra=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,o){var r=this.coordinates.length,n=this.appendFlatCoordinates(t,e,i,o,!1,!1),s=[ya.MOVE_TO_LINE_TO,r,n];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,o=i.strokeStyle,r=i.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ya.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ga);var n=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(n,0,n.length,s),this.hitDetectionInstructions.push(fa),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,o=i.strokeStyle,r=i.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ya.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ga);for(var n=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,u=n.length;l<u;++l)h=this.drawFlatCoordinates_(s,h,n[l],a);this.hitDetectionInstructions.push(fa),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(fa),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(fa),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(ga)},e}(Ca),Sa=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,o){var r=this.state,n=void 0!==r.fillStyle,s=null!=r.strokeStyle,a=i.length;this.instructions.push(ga),this.hitDetectionInstructions.push(ga);for(var h=0;h<a;++h){var l=i[h],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,l,o,!0,!s),p=[ya.MOVE_TO_LINE_TO,u,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(_a),this.hitDetectionInstructions.push(_a)),e=l}return n&&(this.instructions.push(da),this.hitDetectionInstructions.push(da)),s&&(this.instructions.push(fa),this.hitDetectionInstructions.push(fa)),e},e.prototype.drawCircle=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ya.SET_FILL_STYLE,ys(Hn)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ya.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,s,!1,!1);var h=[ya.CIRCLE,a];this.instructions.push(ga,h),this.hitDetectionInstructions.push(ga,h),this.hitDetectionInstructions.push(da),void 0!==i.fillStyle&&this.instructions.push(da),void 0!==i.strokeStyle&&(this.instructions.push(fa),this.hitDetectionInstructions.push(fa)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ya.SET_FILL_STYLE,ys(Hn)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ya.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,n,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ya.SET_FILL_STYLE,ys(Hn)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ya.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var n=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,u=n.length;l<u;++l)h=this.drawFlatCoordinatess_(s,h,n[l],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,o=e.length;i<o;++i)e[i]=jo(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(Ca);function wa(t,e,i,o,r){var n,s,a,h,l,u,c,p,d,f=i,g=i,_=0,y=0,v=i;for(n=i;n<o;n+=r){var m=e[n],E=e[n+1];void 0!==h&&(p=m-h,d=E-l,a=Math.sqrt(p*p+d*d),void 0!==u&&(y+=s,Math.acos((u*p+c*d)/(s*a))>t&&(y>_&&(_=y,f=v,g=n),y=0,v=n-r)),s=a,u=p,c=d),h=m,l=E}return(y+=a)>_?[v,n]:[f,g]}var La={POINT:"point",LINE:"line"};var Ia={Circle:Sa,Default:Ca,Image:xa,LineString:Ra,Polygon:Sa,Text:function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},is.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,o=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||o)){var n,s,a=this.coordinates.length,h=t.getType(),l=null,u=2,c=2;if(r.placement===La.LINE){if(!hi(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(l=t.getFlatCoordinates(),c=t.getStride(),h==fi.LINE_STRING)p=[l.length];else if(h==fi.MULTI_LINE_STRING)p=t.getEnds();else if(h==fi.POLYGON)p=t.getEnds().slice(0,1);else if(h==fi.MULTI_POLYGON){var d=t.getEndss();for(p=[],n=0,s=d.length;n<s;++n)p.push(d[n][0])}this.beginGeometry(t,e);for(var f,g=r.textAlign,_=0,y=0,v=p.length;y<v;++y){if(null==g){var m=wa(r.maxAngle,l,_,p[y],c);_=m[0],f=m[1]}else f=p[y];for(n=_;n<f;n+=c)this.coordinates.push(l[n],l[n+1]);u=this.coordinates.length,_=p[y],this.drawChars_(a,u,this.declutterGroup_),a=u}this.endGeometry(t,e)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),T=E.width/this.pixelRatio;switch(h){case fi.POINT:case fi.MULTI_POINT:u=(l=t.getFlatCoordinates()).length;break;case fi.LINE_STRING:l=t.getFlatMidpoint();break;case fi.CIRCLE:l=t.getCenter();break;case fi.MULTI_LINE_STRING:u=(l=t.getFlatMidpoints()).length;break;case fi.POLYGON:if(l=t.getFlatInteriorPoint(),!r.overflow&&l[2]/this.resolution<T)return;c=3;break;case fi.MULTI_POLYGON:var C=t.getFlatInteriorPoints();for(l=[],n=0,s=C.length;n<s;n+=3)(r.overflow||C[n+2]/this.resolution>=T)&&l.push(C[n],C[n+1]);if(0==(u=l.length))return}u=this.appendFlatCoordinates(l,0,u,c,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(E,a,u),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,o){var r,n=o+e+t+i+this.pixelRatio;if(!is.containsKey(n)){var s=o?this.strokeStates[o]||this.textStrokeState_:null,a=i?this.fillStates[i]||this.textFillState_:null,h=this.textStates[e]||this.textState_,l=this.pixelRatio,u=h.scale*l,c=ma[h.textAlign||$n],p=o&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),f=d.length,g=[],_=function(t,e,i){for(var o=e.length,r=0,n=0;n<o;++n){var s=cs(t,e[n]);r=Math.max(r,s),i.push(s)}return r}(h.font,d,g),y=us(h.font),v=y*f,m=_+p,E=_r(Math.ceil(m*u),Math.ceil((v+p)*u));r=E.canvas,is.set(n,r),1!=u&&E.scale(u,u),E.font=h.font,o&&(E.strokeStyle=s.strokeStyle,E.lineWidth=p,E.lineCap=s.lineCap,E.lineJoin=s.lineJoin,E.miterLimit=s.miterLimit,H&&s.lineDash.length&&(E.setLineDash(s.lineDash),E.lineDashOffset=s.lineDashOffset)),i&&(E.fillStyle=a.fillStyle),E.textBaseline="middle",E.textAlign="center";var T,C=.5-c,x=c*r.width/u+C*p;if(o)for(T=0;T<f;++T)E.strokeText(d[T],x+C*g[T],.5*(p+y)+T*y);if(i)for(T=0;T<f;++T)E.fillText(d[T],x+C*g[T],.5*(p+y)+T*y)}return is.get(n)},e.prototype.drawTextImage_=function(t,e,i){var o=this.textState_,r=this.textStrokeState_,n=this.pixelRatio,s=ma[o.textAlign||$n],a=ma[o.textBaseline],h=r&&r.lineWidth?r.lineWidth:0,l=s*t.width/n+2*(.5-s)*h,u=a*t.height/n+2*(.5-a)*h;this.instructions.push([ya.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*n,(u-this.textOffsetY_)*n,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,o.padding==es?es:o.padding.map((function(t){return t*n})),!!o.backgroundFill,!!o.backgroundStroke]),this.hitDetectionInstructions.push([ya.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*n,(u-this.textOffsetY_)*n,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/n,t.width,o.padding,!!o.backgroundFill,!!o.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var o=this.textStrokeState_,r=this.textState_,n=this.textFillState_,s=this.strokeKey_;o&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:o.strokeStyle,lineCap:o.lineCap,lineDashOffset:o.lineDashOffset,lineWidth:o.lineWidth,lineJoin:o.lineJoin,miterLimit:o.miterLimit,lineDash:o.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||$n,scale:r.scale});var h=this.fillKey_;n&&(h in this.fillStates||(this.fillStates[h]={fillStyle:n.fillStyle}));var l=this.pixelRatio,u=ma[r.textBaseline],c=this.textOffsetY_*l,p=this.text_,d=r.font,f=r.scale,g=o?o.lineWidth*f/2:0,_=this.widths_[d];_||(this.widths_[d]=_={}),this.instructions.push([ya.DRAW_CHARS,t,e,u,i,r.overflow,h,r.maxAngle,function(t){var e=_[t];return e||(e=_[t]=cs(d,t)),e*f*l},c,s,g*l,p,a,1]),this.hitDetectionInstructions.push([ya.DRAW_CHARS,t,e,u,i,r.overflow,h,r.maxAngle,function(t){var e=_[t];return e||(e=_[t]=cs(d,t)),e*f},c,s,g,p,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,r,n;if(t){this.declutterGroup_=e;var s=t.getFill();s?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=Ts(s.getColor()||Hn)):r=this.textFillState_=null;var a=t.getStroke();if(a){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var h=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),c=a.getMiterLimit();n.lineCap=a.getLineCap()||Kn,n.lineDash=h?h.slice():qn,n.lineDashOffset=void 0===l?0:l,n.lineJoin=a.getLineJoin()||Jn,n.lineWidth=void 0===u?1:u,n.miterLimit=void 0===c?10:c,n.strokeStyle=Ts(a.getColor()||Qn)}else n=this.textStrokeState_=null;i=this.textState_;var p=t.getFont()||Bn;ss(p);var d=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||ts,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||es,i.scale=void 0===d?1:d;var f=t.getOffsetX(),g=t.getOffsetY(),_=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===y?0:y,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:o(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.text_=""},e}(Ca)},Oa=function(t){function e(e,i,o,r,n,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=o,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=_r(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],o=0,r=t.length;o<r;++o)if(t[o]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r,n,s){var a,h=2*(o=Math.round(o))+1,l=co(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-i,-t[0],-t[1]),u=this.hitDetectionContext_;u.canvas.width!==h||u.canvas.height!==h?(u.canvas.width=h,u.canvas.height=h):u.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(Ve(a=[1/0,1/0,-1/0,-1/0],t),Ae(a,e*(this.renderBuffer_+o),a));var c,p,d=function(t){if(void 0!==Pa[t])return Pa[t];for(var e=2*t+1,i=new Array(e),o=0;o<e;o++)i[o]=new Array(e);var r=t,n=0,s=0;for(;r>=n;)Ma(i,t+r,t+n),Ma(i,t+n,t+r),Ma(i,t-n,t+r),Ma(i,t-r,t+n),Ma(i,t-r,t-n),Ma(i,t-n,t-r),Ma(i,t+n,t-r),Ma(i,t+r,t-n),2*((s+=1+2*++n)-r)+1>0&&(s+=1-2*(r-=1));return Pa[t]=i,i}(o);function f(t){for(var e=u.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var o=0;o<h;o++)if(d[i][o]&&e[4*(o*h+i)+3]>0){var r=void 0;return(!c||p!=la.IMAGE&&p!=la.TEXT||-1!==c.indexOf(t))&&(r=n(t)),r||void u.clearRect(0,0,h,h)}}this.declutterTree_&&(c=this.declutterTree_.all().map((function(t){return t.value})));var g,_,y,v,m,E=Object.keys(this.replaysByZIndex_).map(Number);for(E.sort(Ft),g=E.length-1;g>=0;--g){var T=E[g].toString();for(y=this.replaysByZIndex_[T],_=va.length-1;_>=0;--_)if(void 0!==(v=y[p=va[_]]))if(!s||p!=la.IMAGE&&p!=la.TEXT){if(m=v.replayHitDetection(u,l,i,r,f,a))return m}else{var C=s[T];C?C.push(v,l.slice(0)):s[T]=[v,l.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],o=e[1],r=e[2],n=e[3],s=[i,o,i,n,r,n,r,o];return _i(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",o=this.replaysByZIndex_[i];void 0===o&&(o={},this.replaysByZIndex_[i]=o);var r=o[e];void 0===r&&(r=new(0,Ia[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),o[e]=r);return r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return c(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,o,r,n,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(Ft),t.save(),this.clip(t,e);var h,l,u,c,p,d,f=n||va;for(h=0,l=a.length;h<l;++h){var g=a[h].toString();for(p=this.replaysByZIndex_[g],u=0,c=f.length;u<c;++u){var _=f[u];if(d=p[_],void 0!==d)if(!s||_!=la.IMAGE&&_!=la.TEXT)d.replay(t,e,i,o,r);else{var y=s[g];y?y.push(d,e.slice(0)):s[g]=[d,e.slice(0)]}}}t.restore()},e}(ha),Pa={0:[[!0]]};function Ma(t,e,i){var o,r=Math.floor(t.length/2);if(e>=r)for(o=r;o<e;o++)t[o][i]=!0;else if(e<r)for(o=e+1;o<r;o++)t[o][i]=!0}function ba(t,e,i,o){for(var r=Object.keys(t).map(Number).sort(Ft),n={},s=0,a=r.length;s<a;++s)for(var h=t[r[s].toString()],l=0,u=h.length;l<u;){var c=h[l++],p=h[l++];c.replay(e,p,i,n,o)}}var Aa=Oa,Fa={Point:function(t,e,i,o){var r=i.getImage();if(r){if(r.getImageState()!=Xn.LOADED)return;var n=t.getReplay(i.getZIndex(),la.IMAGE);n.setImageStyle(r,t.addDeclutter(!1)),n.drawPoint(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),la.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,o)}},LineString:function(t,e,i,o){var r=i.getStroke();if(r){var n=t.getReplay(i.getZIndex(),la.LINE_STRING);n.setFillStrokeStyle(null,r),n.drawLineString(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),la.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,o)}},Polygon:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(r||n){var s=t.getReplay(i.getZIndex(),la.POLYGON);s.setFillStrokeStyle(r,n),s.drawPolygon(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),la.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}},MultiPoint:function(t,e,i,o){var r=i.getImage();if(r){if(r.getImageState()!=Xn.LOADED)return;var n=t.getReplay(i.getZIndex(),la.IMAGE);n.setImageStyle(r,t.addDeclutter(!1)),n.drawMultiPoint(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),la.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,o)}},MultiLineString:function(t,e,i,o){var r=i.getStroke();if(r){var n=t.getReplay(i.getZIndex(),la.LINE_STRING);n.setFillStrokeStyle(null,r),n.drawMultiLineString(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),la.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,o)}},MultiPolygon:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(n||r){var s=t.getReplay(i.getZIndex(),la.POLYGON);s.setFillStrokeStyle(r,n),s.drawMultiPolygon(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),la.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}},GeometryCollection:function(t,e,i,o){var r,n,s=e.getGeometriesArray();for(r=0,n=s.length;r<n;++r){(0,Fa[s[r].getType()])(t,s[r],i,o)}},Circle:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(r||n){var s=t.getReplay(i.getZIndex(),la.CIRCLE);s.setFillStrokeStyle(r,n),s.drawCircle(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),la.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}}};function Na(t,e){return parseInt(o(t),10)-parseInt(o(e),10)}function Da(t,e){var i=Ga(t,e);return i*i}function Ga(t,e){return.5*t/e}function ka(t,e,i,o,r,n){var s=!1,a=i.getImage();if(a){var h=a.getImageState();h==Xn.LOADED||h==Xn.ERROR?a.unlistenImageChange(r,n):(h==Xn.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(r,n),s=!0)}return function(t,e,i,o){var r=i.getGeometryFunction()(e);if(!r)return;var n=r.getSimplifiedGeometry(o),s=i.getRenderer();if(s)ja(t,n,i,e);else{(0,Fa[n.getType()])(t,n,i,e)}}(t,e,i,o),s}function ja(t,e,i,o){if(e.getType()!=fi.GEOMETRY_COLLECTION)t.getReplay(i.getZIndex(),la.DEFAULT).drawCustom(e,o,i.getRenderer());else for(var r=e.getGeometries(),n=0,s=r.length;n<s;++n)ja(t,r[n],i,o)}var Ya=function(e){function i(i){e.call(this,i),this.declutterTree_=i.getDeclutter()?t(Vs)(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=_r(),_(is,P.CLEAR,this.handleFontsChanged_,this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){v(is,P.CLEAR,this.handleFontsChanged_,this),e.prototype.disposeInternal.call(this)},i.prototype.compose=function(t,e,i){var o=e.extent,r=e.pixelRatio,n=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,h=s.rotation,l=a.getExtent(),u=this.getLayer().getSource(),c=this.getTransform(e,0),p=i.extent,d=void 0!==p;d&&this.clip(t,e,p);var f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,_=this.getLayer(),y=0,v=0,m=1!==i.opacity,E=_.hasListener(Jt.RENDER);if(m||E){var T=t.canvas.width,C=t.canvas.height;if(h){var x=Math.round(Math.sqrt(T*T+C*C));y=(x-T)/2,v=(x-C)/2,T=C=x}this.context.canvas.width=T,this.context.canvas.height=C,g=this.context}else g=t;var R=g.globalAlpha;m||(g.globalAlpha=i.opacity),g!=t&&g.translate(y,v);var S=e.viewHints,w=!(S[Ee.ANIMATING]||S[Ee.INTERACTING]),L=e.size[0]*r,I=e.size[1]*r;if(ps(g,-h,L/2,I/2),f.replay(g,c,h,n,w),u.getWrapX()&&a.canWrapX()&&!Ge(l,o)){for(var O,P=o[0],M=ai(l),b=0;P<l[0];)O=M*--b,c=this.getTransform(e,O),f.replay(g,c,h,n,w),P+=M;for(b=0,P=o[2];P>l[2];)O=M*++b,c=this.getTransform(e,O),f.replay(g,c,h,n,w),P-=M}if(ps(g,h,L/2,I/2),E&&this.dispatchRenderEvent(g,e,c),g!=t){if(m){var A=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(g.canvas,-y,-v),t.globalAlpha=A}else t.drawImage(g.canvas,-y,-v);g.translate(-y,-v)}m||(g.globalAlpha=R)}d&&t.restore()},i.prototype.composeFrame=function(t,e,i){var o=this.getTransform(t,0);this.preCompose(i,t,o),this.compose(i,t,e),this.postCompose(i,t,e,o)},i.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){if(this.replayGroup_){var s=e.viewState.resolution,a=e.viewState.rotation,h=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,i,{},(function(t){var e=o(t);if(!(e in l))return l[e]=!0,r.call(n,t,h)}),null)}},i.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.prepareFrame=function(t,e){var i=this.getLayer(),o=i.getSource(),r=t.viewHints[Ee.ANIMATING],n=t.viewHints[Ee.INTERACTING],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&n)return!0;var h=t.extent,l=t.viewState,u=l.projection,c=l.resolution,p=t.pixelRatio,d=i.getRevision(),f=i.getRenderBuffer(),g=i.getRenderOrder();void 0===g&&(g=Na);var _=Ae(h,f*c),y=l.projection.getExtent();if(o.getWrapX()&&l.projection.canWrapX()&&!Ge(y,t.extent)){var v=ai(y),m=Math.max(ai(_)/2,v);_[0]=y[0]-m,_[2]=y[2]+m}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==g&&Ge(this.renderedExtent_,_))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E=new Aa(Ga(c,p),_,c,p,o.getOverlaps(),this.declutterTree_,i.getRenderBuffer());o.loadFeatures(_,c,u);var T=function(t){var e,o=t.getStyleFunction()||i.getStyleFunction();if(o&&(e=o(t,c)),e){var r=this.renderFeature(t,c,p,e,E);this.dirty_=this.dirty_||r}}.bind(this);if(g){var C=[];o.forEachFeatureInExtent(_,(function(t){C.push(t)})),C.sort(g);for(var x=0,R=C.length;x<R;++x)T(C[x])}else o.forEachFeatureInExtent(_,T);return E.finish(),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.replayGroup_=E,this.replayGroupChanged=!0,!0},i.prototype.renderFeature=function(t,e,i,o,r){if(!o)return!1;var n=!1;if(Array.isArray(o))for(var s=0,a=o.length;s<a;++s)n=ka(r,t,o[s],Da(e,i),this.handleStyleImageChange_,this)||n;else n=ka(r,t,o,Da(e,i),this.handleStyleImageChange_,this);return n},i}(Ds);Ya.handles=function(t){return t.getType()===Wn.VECTOR},Ya.create=function(t,e){return new Ya(e)};var Xa=Ya,za={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Wa={image:[la.POLYGON,la.CIRCLE,la.LINE_STRING,la.IMAGE,la.TEXT],hybrid:[la.POLYGON,la.LINE_STRING]},Ua={image:[la.DEFAULT],hybrid:[la.IMAGE,la.TEXT,la.DEFAULT],vector:va},Za=function(e){function i(i){e.call(this,i,!0),this.declutterTree_=i.getDeclutter()?t(Vs)(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0];var o=i.getRenderMode();this.zDirection=o===za.VECTOR?1:0,o!==za.VECTOR&&(this.context=_r()),_(is,P.CLEAR,this.handleFontsChanged_,this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){v(is,P.CLEAR,this.handleFontsChanged_,this),e.prototype.disposeInternal.call(this)},i.prototype.getTile=function(t,i,o,r,n){var s=e.prototype.getTile.call(this,t,i,o,r,n);return s.getState()===Qt.LOADED&&(this.createReplayGroup_(s,r,n),this.context&&this.renderTileImage_(s,r,n)),s},i.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},i.prototype.prepareFrame=function(t,i){var o=this.getLayer().getRevision();return this.renderedLayerRevision_!=o&&(this.renderedTiles.length=0),this.renderedLayerRevision_=o,e.prototype.prepareFrame.call(this,t,i)},i.prototype.createReplayGroup_=function(t,e,i){var o=this,r=this.getLayer(),n=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=n||a.renderedRenderOrder!=s){for(var h=r.getSource(),l=h.getTileGrid(),u=h.getTileGridForProjection(i).getResolution(t.tileCoord[0]),c=t.extent,p=function(n,p){var d=t.getTile(t.tileKeys[n]);if(d.getState()==Qt.LOADED){var f=d.tileCoord,g=l.getTileCoordExtent(f),_=ri(c,g),y=Ue(g,_)?null:Ae(_,r.getRenderBuffer()*u,o.tmpExtent),v=d.getProjection(),m=!1;$i(i,v)||(m=!0,d.setProjection(i)),a.dirty=!1;var E=new Aa(0,_,u,e,h.getOverlaps(),o.declutterTree_,r.getRenderBuffer()),T=Da(u,e),C=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,u)),e){var o=this.renderFeature(t,T,e,E);this.dirty_=this.dirty_||o,a.dirty=a.dirty||o}},x=d.getFeatures();s&&s!==a.renderedRenderOrder&&x.sort(s);for(var R=0,S=x.length;R<S;++R){var w=x[R];m&&(v.getUnits()==Ri.TILE_PIXELS&&(v.setWorldExtent(g),v.setExtent(d.getExtent())),w.getGeometry().transform(v,i)),y&&!hi(y,w.getGeometry().getExtent())||C.call(o,w)}E.finish(),d.setReplayGroup(r,t.tileCoord.toString(),E)}},d=0,f=t.tileKeys.length;d<f;++d)p(d);a.renderedRevision=n,a.renderedRenderOrder=s}},i.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var s=e.viewState.resolution,a=e.viewState.rotation;i=null==i?0:i;var h,l,u,c,p=this.getLayer(),d={},f=this.renderedTiles;for(u=0,c=f.length;u<c;++u){var g=f[u];if(De(h=Ae(g.extent,i*s,h),t))for(var _=0,y=g.tileKeys.length;_<y;++_){var v=g.getTile(g.tileKeys[_]);if(v.getState()==Qt.LOADED){var m=v.getReplayGroup(p,g.tileCoord.toString());l=l||m.forEachFeatureAtCoordinate(t,s,a,i,{},(function(t){var e=o(t);if(!(e in d))return d[e]=!0,r.call(n,t,p)}),null)}}}return l},i.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),o=t.tileCoord,r=i.getResolution(o[0]),n=e.viewState,s=e.pixelRatio,a=n.resolution/s,h=i.getTileCoordExtent(o,this.tmpExtent),l=n.center,u=ni(h),c=e.size,p=Math.round(s*c[0]/2),d=Math.round(s*c[1]/2);return co(this.tmpTransform_,p,d,r/a,r/a,n.rotation,(u[0]-l[0])/r,(l[1]-u[1])/r)},i.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.postCompose=function(t,i,o){var r=this.getLayer(),n=r.getRenderMode();if(n!=za.IMAGE){var s,a,h=r.getDeclutter()?{}:null,l=r.getSource(),u=Ua[n],c=i.pixelRatio,p=i.viewState.rotation,d=i.size;p&&ps(t,-p,s=Math.round(c*d[0]/2),a=Math.round(c*d[1]/2)),h&&this.declutterTree_.clear();for(var f=i.viewHints,g=!(f[Ee.ANIMATING]||f[Ee.INTERACTING]),_=this.renderedTiles,y=l.getTileGridForProjection(i.viewState.projection),v=[],m=[],E=_.length-1;E>=0;--E){var T=_[E];if(T.getState()!=Qt.ABORT)for(var C=T.tileCoord,x=y.getTileCoordExtent(C,this.tmpExtent)[0]-T.extent[0],R=void 0,S=0,w=T.tileKeys.length;S<w;++S){var L=T.getTile(T.tileKeys[S]);if(L.getState()==Qt.LOADED){var I=L.getReplayGroup(r,C.toString());if(I&&I.hasReplays(u)){R||(R=this.getTransform(i,x));var O=L.tileCoord[0],P=I.getClipCoords(R);t.save(),t.globalAlpha=o.opacity;for(var M=0,b=v.length;M<b;++M){var A=v[M];O<m[M]&&(t.beginPath(),t.moveTo(P[0],P[1]),t.lineTo(P[2],P[3]),t.lineTo(P[4],P[5]),t.lineTo(P[6],P[7]),t.moveTo(A[6],A[7]),t.lineTo(A[4],A[5]),t.lineTo(A[2],A[3]),t.lineTo(A[0],A[1]),t.clip())}I.replay(t,R,p,{},g,u,h),t.restore(),v.push(P),m.push(O)}}}}h&&ba(h,t,p,g),p&&ps(t,p,s,a)}e.prototype.postCompose.call(this,t,i,o)},i.prototype.renderFeature=function(t,e,i,o){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var n=0,s=i.length;n<s;++n)r=ka(o,t,i[n],e,this.handleStyleImageChange_,this)||r;else r=ka(o,t,i,e,this.handleStyleImageChange_,this);return r},i.prototype.renderTileImage_=function(t,e,i){var o=this.getLayer(),r=t.getReplayState(o),n=o.getRevision(),s=Wa[o.getRenderMode()];if(s&&r.renderedTileRevision!==n){r.renderedTileRevision=n;var a=t.wrappedTileCoord,h=a[0],l=o.getSource(),u=l.getTileGridForProjection(i),c=u.getResolution(h),p=t.getContext(o),d=l.getTilePixelSize(h,e,i);p.canvas.width=d[0],p.canvas.height=d[1];for(var f=u.getTileCoordExtent(a,this.tmpExtent),g=0,_=t.tileKeys.length;g<_;++g){var y=t.getTile(t.tileKeys[g]);if(y.getState()==Qt.LOADED){var v=e/c,m=ro(this.tmpTransform_);lo(m,v,-v),uo(m,-f[0],-f[3]),y.getReplayGroup(o,t.tileCoord.toString()).replay(p,m,0,{},!0,s)}}}},i}(Zs);Za.handles=function(t){return t.getType()===Wn.VECTOR_TILE},Za.create=function(t,e){return new Za(e)};var Va=Za,Ba=function(t){function e(e){(e=h({},e)).controls||(e.controls=Br()),e.interactions||(e.interactions=Yn()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Fs(this);return t.registerLayerRenderers([Ys,Zs,Xa,Va]),t},e}(Pr);window.ol&&!ol.ext&&(ol.ext={});var Ha=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};window.ol&&(ol.inherits||(ol.inherits=Ha)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var Ka=Ha,qa={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},Ja="element",Qa="map",$a="offset",th="position",eh="positioning",ih=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,_(this,N(Ja),this.handleElementChanged,this),_(this,N(Qa),this.handleMapChanged,this),_(this,N($a),this.handleOffsetChanged,this),_(this,N(th),this.handlePositionChanged,this),_(this,N(eh),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:qa.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(Ja)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Qa)},e.prototype.getOffset=function(){return this.get($a)},e.prototype.getPosition=function(){return this.get(th)},e.prototype.getPositioning=function(){return this.get(eh)},e.prototype.handleElementChanged=function(){Tr(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Er(this.element),m(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=_(t,Kt.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(th)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Ja,t)},e.prototype.setMap=function(t){this.set(Qa,t)},e.prototype.setOffset=function(t){this.set($a,t)},e.prototype.setPosition=function(t){this.set(th,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),o=this.getRect(i,[yr(i),vr(i)]),r=this.autoPanMargin;if(!Ge(e,o)){var n=o[0]-e[0],s=e[2]-o[2],a=o[1]-e[1],h=e[3]-o[3],l=[0,0];if(n<0?l[0]=n-r:s<0&&(l[0]=Math.abs(s)+r),a<0?l[1]=a-r:h<0&&(l[1]=Math.abs(h)+r),0!==l[0]||0!==l[1]){var u=t.getView().getCenter(),c=t.getPixelFromCoordinate(u),p=[c[0]+l[0],c[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(p),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),o=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[o,r,o+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(eh,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(i,o)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var n=o[0],s=o[1];if(r==qa.BOTTOM_RIGHT||r==qa.CENTER_RIGHT||r==qa.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var a=Math.round(e[0]-t[0]-n)+"px";this.rendered.right_!=a&&(this.rendered.right_=i.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),r!=qa.BOTTOM_CENTER&&r!=qa.CENTER_CENTER&&r!=qa.TOP_CENTER||(n-=this.element.offsetWidth/2);var h=Math.round(t[0]+n)+"px";this.rendered.left_!=h&&(this.rendered.left_=i.left=h)}if(r==qa.BOTTOM_LEFT||r==qa.BOTTOM_CENTER||r==qa.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=i.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),r!=qa.CENTER_LEFT&&r!=qa.CENTER_CENTER&&r!=qa.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var u=Math.round(t[1]+s)+"px";this.rendered.top_!=u&&(this.rendered.top_=i.top=u)}},e.prototype.getOptions=function(){return this.options},e}(D),oh=ih;window.ol&&(ol.ext.input={});var rh=function(t){t=t||{},D.call(this);var e,i=this.input=t.input;i||(i=this.input=document.createElement("INPUT"),t.type&&i.setAttribute("type",t.type),void 0!==t.min&&i.setAttribute("min",t.min),void 0!==t.max&&i.setAttribute("max",t.max),void 0!==t.step&&i.setAttribute("step",t.step),t.parent&&t.parent.appendChild(i)),t.disabled&&(i.disabled=!0),void 0!==t.checked&&(i.checked=!!t.checked),void 0!==t.val&&(i.value=t.val),t.hidden&&(i.style.display="none"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))};Ka(rh,D),rh.prototype._listenDrag=function(t,e){var i=function(i){this.moving=!0,this.element.classList.add("ol-moving");var o=function(i){"pointerup"===i.type&&(document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",o),document.removeEventListener("pointercancel",o),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),i.target===t&&e(i),i.stopPropagation(),i.preventDefault()}.bind(this);document.addEventListener("pointermove",o,!1),document.addEventListener("pointerup",o,!1),document.addEventListener("pointercancel",o,!1),i.stopPropagation(),i.preventDefault()}.bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)},rh.prototype.setValue=function(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))},rh.prototype.getValue=function(){return this.input.value},rh.prototype.getInputElement=function(){return this.input};var nh=rh,sh=function(t){nh.call(this,t=t||{});var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};Ka(sh,nh),sh.prototype.isChecked=function(){return this.input.checked};var ah=sh,hh=function(t){ah.call(this,t=t||{}),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()};Ka(hh,ah);var lh=hh,uh=function(t){ah.call(this,t=t||{}),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()};Ka(uh,ah);var ch=uh,ph={create:function(t,e){var i;if(e=e||{},"TEXT"===t)i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var o in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(o){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"text":i.innerText=e.text;break;case"html":e.html instanceof Element?i.appendChild(e.html):void 0!==e.html&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var r in e.options)ph.create("OPTION",{html:r,value:e.options[r],parent:i});break;case"style":ph.setStyle(i,e.style);break;case"change":case"click":ph.addListener(i,o,e[o]);break;case"on":for(var n in e.on)ph.addListener(i,n,e.on[n]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(o,e[o])}return i},createSwitch:function(t){var e=ph.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),i=Object.assign({input:e},t||{});return new lh(i),e},createCheck:function(t){var e=ph.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent}),i=Object.assign({input:e},t||{});return"radio"===t.type?new ch(i):new ah(i),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,i,o){"string"==typeof e&&(e=e.split(" ")),e.forEach((function(e){t.addEventListener(e,i,o)}))},removeListener:function(t,e,i){"string"==typeof e&&(e=e.split(" ")),e.forEach((function(e){t.removeEventListener(e,i)}))},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return"none"===ph.getStyle(t,"display")},toggle:function(t){t.style.display="none"===t.style.display?"":"none"},setStyle:function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof e[i]?t.style[i]=e[i]+"px":t.style[i]=e[i];break;default:t.style[i]=e[i]}},getStyle:function(t,e){var i,o=(t.ownerDocument||document).defaultView;if(o&&o.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=o.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),i=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(e){var i=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=i,t.runtimeStyle.left=o,e}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(t){return t.offsetHeight+ph.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+ph.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},i=function(t){if(!t)return e;if("absolute"===ph.getStyle(t,"position")&&"none"!==ph.getStyle(t,"transform")){var o=t.getBoundingClientRect();return e.left+=o.left,e.top+=o.top,e}return i(t.offsetParent)};return i(t.offsetParent)},positionRect:function(t,e){var i=0,o=0,r=function(n){if(n)return i+=n.offsetLeft,o+=n.offsetTop,r(n.offsetParent);var s={top:t.offsetTop+o,left:t.offsetLeft+i};return e&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+t.offsetHeight,s.right=s.top+t.offsetWidth,s};return r(t.offsetParent)},scrollDiv:function(t,e){var i,o,r,n,s,a=!1,h=0,l=0,u="function"==typeof(e=e||{}).onmove?e.onmove:function(){},c=e.vertical?"screenY":"screenX",p=e.vertical?"scrollTop":"scrollLeft",d=!1,f=0,g=function(){s&&(f++,setTimeout(_))},_=function(){if(s){if(--f)return;var e=t.clientHeight,i=t.scrollHeight;o=e/i,s.style.height=100*o+"%",s.style.top=t.scrollTop/i*100+"%",n.style.height=e+"px",e>i-.5?n.classList.add("ol-100pc"):n.classList.remove("ol-100pc")}},y=function(e){e.target.classList.contains("ol-noscroll")||(d=!1,a=e[c],l=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",v),ph.addListener(window,["pointerup","pointercancel"],T))},v=function(e){if(d=!0,!1!==a){var n=(r?-1/o:1)*(a-e[c]);t[p]+=n,(i=new Date)-l&&(h=(h+n/(i-l))/2),a=e[c],l=i,n&&u(!0)}},m=function(e){var i=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=i,t[p]+=i,-1<e&&e<1?(d?setTimeout((function(){t.classList.remove("ol-move")})):t.classList.remove("ol-move"),d=!1,u(!1)):setTimeout((function(){m(e)}),40)};if(e.vertical&&e.minibar){var E=function(i){t.removeEventListener("pointermove",E),t.parentNode.classList.add("ol-miniscroll"),s=ph.create("DIV"),n=ph.create("DIV",{className:"ol-scroll",html:s}),t.parentNode.insertBefore(n,t),s.addEventListener("pointerdown",(function(t){r=!0,y(t)})),e.mousewheel&&(ph.addListener(n,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){C(t)})),ph.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){C(t)}))),t.parentNode.addEventListener("pointerenter",g),window.addEventListener("resize",g),!1!==i&&g()};t.parentNode?E(!1):t.addEventListener("pointermove",E),t.addEventListener("scroll",(function(){g()}))}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),ph.addListener(t,["pointerdown"],(function(t){r=!1,y(t)})),t.addEventListener("click",(function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())}),!0);var T=function(i){(l=new Date-l)>100||r?h=0:l>0&&(h=((h||0)+(a-i[c])/l)/2),m(!1===e.animate?0:200*h),a=!1,h=0,l=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout((function(){t.classList.remove("ol-hasClick")}),500)),r=!1,window.removeEventListener("pointermove",v),ph.removeListener(window,["pointerup","pointercancel"],T)},C=function(e){var i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[p]-=30*i,t.classList.remove("ol-move"),!1};return e.mousewheel&&ph.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],C),{refresh:g}},dispatchEvent:function(t,e){var i;try{i=new CustomEvent(t)}catch(e){(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)}},dh=ph,fh=function(t){"number"==typeof(t=t||{}).offsetBox?this.offsetBox=[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:this.offsetBox=t.offsetBox;var e=document.createElement("div");t.element=e,this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,dh.create("BUTTON",{className:"closeBox"+(t.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:e}),!1!==t.anchor&&dh.create("DIV",{className:"anchor",parent:e}),this.content=dh.create("DIV",{html:t.html||"",className:"ol-popup-content",parent:e}),t.minibar&&dh.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),t.stopEvent&&(e.addEventListener("mousedown",(function(t){t.stopPropagation()})),e.addEventListener("touchstart",(function(t){t.stopPropagation()}))),oh.call(this,t),this._elt=e,this.setPositioning(t.positioning||"auto"),this.setPopupClass(t.popupClass||t.className||"default"),t.anim&&this.addPopupClass("anim"),t.position&&setTimeout(function(){this.show(t.position)}.bind(this))};Ka(fh,oh),fh.prototype.getClassPositioning=function(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t},fh.prototype.setClosebox=function(t){this.closeBox=t,t?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")},fh.prototype.setPopupClass=function(t){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter((function(t){return t.length>0}));t?t.split(" ").filter((function(t){return t.length>0})).forEach((function(t){e.push(t)})):e.push("default"),i.forEach((function(t){e.push(t)})),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)},fh.prototype.addPopupClass=function(t){this.element.classList.add(t)},fh.prototype.removePopupClass=function(t){this.element.classList.remove(t)},fh.prototype.setPositioning=function(t){void 0!==t&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(t=t.replace(/auto/g,"center"))&&(t="bottom-center"),this.setPositioning_(t))},fh.prototype.setPositioning_=function(t){if(this.element){oh.prototype.setPositioning.call(this,t),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter((function(t){return t.length>0}));this.element.classList.add.apply(this.element.classList,e)}},fh.prototype.getVisible=function(){return this.element.classList.contains("visible")},fh.prototype.show=function(t,e){e||"string"!=typeof t||(e=t,t=null),!0===t&&(t=this.getPosition());var i=this,o=this.getMap();if(o&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):dh.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach((function(t){t.addEventListener("load",(function(){try{o.renderSync()}catch(t){}i.content.dispatchEvent(new Event("scroll"))}))}))),t)){if(this.autoPositioning){var r=o.getPixelFromCoordinate(t),n=o.getSize(),s=[];"auto"==this.autoPositioning[0]?s[0]=r[1]<n[1]/3?"top":"bottom":s[0]=this.autoPositioning[0],s[1]=r[0]<2*n[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==s[1]?2:0],this.offsetBox["top"==s[0]?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this.element.parentElement.style.display="","function"==typeof this.onshow&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout((function(){i.element.classList.add("visible")}),0)}},fh.prototype.hide=function(){null!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))};var gh=new fh({popupClass:"default",closeBox:!0,onshow:function(){console.log("You open the box")},onclose:function(){console.log("You close the box")},positioning:"auto",autoPan:!0,autoPanAnimation:{duration:250}});$("#map").html("");const _h=new Ba({target:"map",overlays:[gh],view:new gr({center:(yh=[0,30],io(yh,"EPSG:4326",void 0!==vh?vh:"EPSG:3857")),zoom:4})});var yh,vh;console.log("Create map:",_h);var mh=_h,Eh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},Th=function(t){function e(e){var i=e||{},o=h({},i);delete o.preload,delete o.useInterimTilesOnError,t.call(this,o),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=Wn.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Eh.PRELOAD)},e.prototype.setPreload=function(t){this.set(Eh.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Eh.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Eh.USE_INTERIM_TILES_ON_ERROR,t)},e}(Xr);Th.prototype.getSource;var Ch=Th,xh=function(t){function e(e,i,o){t.call(this);var r=o||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(P.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Qt.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Qt.LOADED){t.interimTile=null;break}t.getState()==Qt.LOADING?e=t:t.getState()==Qt.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var o=e-i+1e3/60;return o>=this.transition_?1:we(o/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(O);function Rh(){var t=_r(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Sh=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,s),this.crossOrigin_=r,this.src_=o,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==Qt.LOADING&&(this.unlistenImage_(),this.image_=Rh()),this.interimTile&&this.interimTile.dispose(),this.state=Qt.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=Qt.ERROR,this.unlistenImage_(),this.image_=Rh(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Qt.LOADED:this.state=Qt.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Qt.ERROR&&(this.state=Qt.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Qt.IDLE&&(this.state=Qt.LOADING,this.changed(),this.imageListenerKeys_=[y(this.image_,P.ERROR,this.handleImageError_,this),y(this.image_,P.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(m),this.imageListenerKeys_=null},e}(xh);function wh(t,e,i,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=i,o):[t,e,i]}function Lh(t,e,i){return t+"/"+e+"/"+i}function Ih(t){return Lh(t[0],t[1],t[2])}function Oh(t){return t.split("/").map(Number)}function Ph(t){return(t[1]<<t[0])+t[2]}function Mh(t,e){var i=t[0],o=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var n,s=e.getExtent();return!(n=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||n.containsXY(o,r)}var bh=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Oh(this.peekFirstKey())[0];this.forEach((function(e){e.tileCoord[0]!==t&&(this.remove(Ih(e.tileCoord)),e.dispose())}),this)}},e}(Vn);function Ah(t,e,i,o){var r=io(i,e,t),n=qi(e,o,i),s=e.getMetersPerUnit();void 0!==s&&(n*=s);var a=t.getMetersPerUnit();void 0!==a&&(n/=a);var h=t.getExtent();if(!h||De(h,r)){var l=qi(t,n,r)/n;isFinite(l)&&l>0&&(n/=l)}return n}function Fh(t,e,i,o){var r=i-t,n=o-e,s=Math.sqrt(r*r+n*n);return[Math.round(i+r/s),Math.round(o+n/s)]}function Nh(t,e,i,o,r,n,s,a,h,l,u){var c=_r(Math.round(i*t),Math.round(i*e));if(0===h.length)return c.canvas;c.scale(i,i);var p=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,e,i){Ze(p,t.extent)}));var d=ai(p),f=oi(p),g=_r(Math.round(i*d/o),Math.round(i*f/o)),_=i/o;h.forEach((function(t,e,i){var o=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),n=ai(t.extent),s=oi(t.extent);g.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,o*_,r*_,n*_,s*_)}));var y=ni(s);return a.getTriangles().forEach((function(t,e,r){var s=t.source,a=t.target,h=s[0][0],l=s[0][1],u=s[1][0],d=s[1][1],f=s[2][0],_=s[2][1],v=(a[0][0]-y[0])/n,m=-(a[0][1]-y[1])/n,E=(a[1][0]-y[0])/n,T=-(a[1][1]-y[1])/n,C=(a[2][0]-y[0])/n,x=-(a[2][1]-y[1])/n,R=h,S=l;h=0,l=0;var w=he([[u-=R,d-=S,0,0,E-v],[f-=R,_-=S,0,0,C-v],[0,0,u,d,T-m],[0,0,f,_,x-m]]);if(w){c.save(),c.beginPath();var L=(v+E+C)/3,I=(m+T+x)/3,O=Fh(L,I,v,m),P=Fh(L,I,E,T),M=Fh(L,I,C,x);c.moveTo(P[0],P[1]),c.lineTo(O[0],O[1]),c.lineTo(M[0],M[1]),c.clip(),c.transform(w[0],w[2],w[1],w[3],v,m),c.translate(p[0]-R,p[3]-S),c.scale(o/i,-o/i),c.drawImage(g.canvas,0,0),c.restore()}})),u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.getTriangles().forEach((function(t,e,i){var o=t.target,r=(o[0][0]-y[0])/n,s=-(o[0][1]-y[1])/n,a=(o[1][0]-y[0])/n,h=-(o[1][1]-y[1])/n,l=(o[2][0]-y[0])/n,u=-(o[2][1]-y[1])/n;c.beginPath(),c.moveTo(a,h),c.lineTo(r,s),c.lineTo(l,u),c.closePath(),c.stroke()})),c.restore()),c.canvas}var Dh=function(t,e,i,o,r){this.sourceProj_=t,this.targetProj_=e;var n={},s=eo(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return n[e]||(n[e]=s(t)),n[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&ai(o)==ai(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ai(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ai(this.targetProj_.getExtent()):null;var a=ni(i),h=si(i),l=$e(i),u=Qe(i),c=this.transformInv_(a),p=this.transformInv_(h),d=this.transformInv_(l),f=this.transformInv_(u);if(this.addQuad_(a,h,l,u,c,p,d,f,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach((function(t,e,i){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}n={}};Dh.prototype.addTriangle_=function(t,e,i,o,r,n){this.triangles_.push({source:[o,r,n],target:[t,e,i]})},Dh.prototype.addQuad_=function(t,e,i,o,r,n,s,a,h){var l=be([r,n,s,a]),u=this.sourceWorldWidth_?ai(l)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1,d=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)d=ai(be([t,e,i,o]))/this.targetWorldWidth_>.25||d;!p&&this.sourceProj_.isGlobal()&&u&&(d=u>.25||d)}if(d||!this.maxSourceExtent_||hi(l,this.maxSourceExtent_)){if(!(d||isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(h>0))return;d=!0}if(h>0){if(!d){var f,g=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(g);if(p)f=(ue(r[0],c)+ue(s[0],c))/2-ue(_[0],c);else f=(r[0]+s[0])/2-_[0];var y=(r[1]+s[1])/2-_[1];d=f*f+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var v=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(v),E=[(o[0]+t[0])/2,(o[1]+t[1])/2],T=this.transformInv_(E);this.addQuad_(t,e,v,E,r,n,m,T,h-1),this.addQuad_(E,v,i,o,T,m,s,a,h-1)}else{var C=[(t[0]+e[0])/2,(t[1]+e[1])/2],x=this.transformInv_(C),R=[(i[0]+o[0])/2,(i[1]+o[1])/2],S=this.transformInv_(R);this.addQuad_(t,C,R,o,r,x,S,a,h-1),this.addQuad_(C,e,i,R,x,n,s,S,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,o,r,s,a),this.addTriangle_(t,e,i,r,n,s)}},Dh.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,o){var r=e.source;Ve(t,r[0]),Ve(t,r[1]),Ve(t,r[2])})),t},Dh.prototype.getTriangles=function(){return this.triangles_};var Gh=Dh,kh=function(t){function e(e,i,o,r,n,s,a,h,l,u,c){t.call(this,n,Qt.IDLE),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=r,this.wrappedTileCoord_=s||n,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var p=r.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),g=d?ri(p,d):p;if(0!==Je(g)){var _=e.getExtent();_&&(f=f?ri(f,_):_);var y=r.getResolution(this.wrappedTileCoord_[0]),v=Ah(e,o,ti(g),y);if(!isFinite(v)||v<=0)this.state=Qt.EMPTY;else{var m=void 0!==u?u:.5;if(this.triangulation_=new Gh(e,o,g,f,v*m),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(v);var E=this.triangulation_.calculateSourceExtent();if(f&&(e.canWrapX()?(E[1]=re(E[1],f[1],f[3]),E[3]=re(E[3],f[1],f[3])):E=ri(E,f)),Je(E)){for(var T=i.getTileRangeForExtentAndZ(E,this.sourceZ_),C=T.minX;C<=T.maxX;C++)for(var x=T.minY;x<=T.maxY;x++){var R=l(this.sourceZ_,C,x,a);R&&this.sourceTiles_.push(R)}0===this.sourceTiles_.length&&(this.state=Qt.EMPTY)}else this.state=Qt.EMPTY}else this.state=Qt.EMPTY}}else this.state=Qt.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==Qt.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,o){e&&e.getState()==Qt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Qt.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),o="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],n=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Nh(o,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),n,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=Qt.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Qt.IDLE){this.state=Qt.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,o){var r=e.getState();if(r==Qt.IDLE||r==Qt.LOADING){t++;var n=_(e,P.CHANGE,(function(i){var o=e.getState();o!=Qt.LOADED&&o!=Qt.ERROR&&o!=Qt.EMPTY||(m(n),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,i){t.getState()==Qt.IDLE&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(m),this.sourcesListenerKeys_=null},e}(xh);function jh(t,e){var i=/\{z\}/g,o=/\{x\}/g,r=/\{y\}/g,n=/\{-y\}/g;return function(s,a,h){return s?t.replace(i,s[0].toString()).replace(o,s[1].toString()).replace(r,(function(){return(-s[2]-1).toString()})).replace(n,(function(){var t=s[0],i=e.getFullTileRange(t);return $t(i,55),(i.getHeight()+s[2]).toString()})):void 0}}function Yh(t,e){for(var i=t.length,o=new Array(i),r=0;r<i;++r)o[r]=jh(t[r],e);return function(t){return 1===t.length?t[0]:function(e,i,o){if(e){var r=ue(Ph(e),t.length);return t[r](e,i,o)}}}(o)}function Xh(t,e,i){}function zh(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var o,r=i[1].charCodeAt(0),n=i[2].charCodeAt(0);for(o=r;o<=n;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}function Wh(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Uh=function(t){function i(e){t.call(this),this.projection_=Ki(e.projection),this.attributions_=Wh(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:Rr.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getAttributions=function(){return this.attributions_},i.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolutions=function(){return e()},i.prototype.getState=function(){return this.state_},i.prototype.getWrapX=function(){return this.wrapX_},i.prototype.refresh=function(){this.changed()},i.prototype.setAttributions=function(t){this.attributions_=Wh(t),this.changed()},i.prototype.setState=function(t){this.state_=t,this.changed()},i}(D),Zh=[0,0,0],Vh=function(t){var e,i,o,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,$t((e=this.resolutions_,i=!0,o=function(t,e){return e-t}||Ft,e.every((function(t,r){if(0===r)return!0;var n=o(e[r-1],t);return!(n>0||i&&0===n)}))),17),!t.origins)for(var n=0,s=this.resolutions_.length-1;n<s;++n)if(r){if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}else r=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,$t(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=ni(a)),$t(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,$t(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:oe,$t(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Ws(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):a&&this.calculateTileRanges_(a)};Vh.prototype.forEachTileCoord=function(t,e,i){for(var o=this.getTileRangeForExtentAndZ(t,e),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,a=o.maxY;s<=a;++s)i([e,r,s])},Vh.prototype.forEachTileCoordParentTileRange=function(t,e,i,o,r){var n,s,a,h=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):h=this.getTileCoordExtent(t,r);l>=this.minZoom;){if(n=2===this.zoomFactor_?zs(s=Math.floor(s/2),s,a=Math.floor(a/2),a,o):this.getTileRangeForExtentAndZ(h,l,o),e.call(i,l,n))return!0;--l}return!1},Vh.prototype.getExtent=function(){return this.extent_},Vh.prototype.getMaxZoom=function(){return this.maxZoom},Vh.prototype.getMinZoom=function(){return this.minZoom},Vh.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Vh.prototype.getResolution=function(t){return this.resolutions_[t]},Vh.prototype.getResolutions=function(){return this.resolutions_},Vh.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],r=2*t[2];return zs(o,o+1,r,r+1,e)}var n=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null},Vh.prototype.getTileRangeExtent=function(t,e,i){var o=this.getOrigin(t),r=this.getResolution(t),n=Ir(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*n[0]*r,a=o[0]+(e.maxX+1)*n[0]*r;return Xe(s,o[1]+e.minY*n[1]*r,a,o[1]+(e.maxY+1)*n[1]*r,i)},Vh.prototype.getTileRangeForExtentAndZ=function(t,e,i){var o=Zh;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,o);var r=o[1],n=o[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,o),zs(r,o[1],n,o[2],i)},Vh.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Ir(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]+(t[2]+.5)*o[1]*i]},Vh.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),o=this.getResolution(t[0]),r=Ir(this.getTileSize(t[0]),this.tmpSize_),n=i[0]+t[1]*r[0]*o,s=i[1]+t[2]*r[1]*o;return Xe(n,s,n+r[0]*o,s+r[1]*o,e)},Vh.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},Vh.prototype.getTileCoordForXYAndResolution_=function(t,e,i,o,r){var n=this.getZForResolution(i),s=i/this.getResolution(n),a=this.getOrigin(n),h=Ir(this.getTileSize(n),this.tmpSize_),l=o?.5:0,u=o?0:.5,c=Math.floor((t-a[0])/i+l),p=Math.floor((e-a[1])/i+u),d=s*c/h[0],f=s*p/h[1];return o?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),wh(n,d,f,r)},Vh.prototype.getTileCoordForXYAndZ_=function(t,e,i,o,r){var n=this.getOrigin(i),s=this.getResolution(i),a=Ir(this.getTileSize(i),this.tmpSize_),h=o?.5:0,l=o?0:.5,u=Math.floor((t-n[0])/s+h),c=Math.floor((e-n[1])/s+l),p=u/a[0],d=c/a[1];return o?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),wh(i,p,d,r)},Vh.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},Vh.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Vh.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Vh.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Vh.prototype.getZForResolution=function(t,e){return re(Dt(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},Vh.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i};var Bh=Vh;function Hh(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,o){var r=Qh(t);return function(t,e,i,o){var r=void 0!==o?o:Pe.TOP_LEFT,n=Jh(t,e,i);return new Bh({extent:t,origin:ei(t,r),resolutions:n,tileSize:i})}(r,e,i,o)}(t),t.setDefaultTileGrid(e)),e}function Kh(t,e,i){var o=e[0],r=t.getTileCoordCenter(e),n=Qh(i);if(De(n,r))return e;var s=ai(n),a=Math.ceil((n[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,o)}function qh(t){var e=t||{},i=e.extent||Ki("EPSG:3857").getExtent(),o={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Jh(i,e.maxZoom,e.tileSize)};return new Bh(o)}function Jh(t,e,i){for(var o=void 0!==e?e:42,r=oi(t),n=ai(t),s=Ir(void 0!==i?i:oe),a=Math.max(n/s[0],r/s[1]),h=o+1,l=new Array(h),u=0;u<h;++u)l[u]=a/Math.pow(2,u);return l}function Qh(t){var e=(t=Ki(t)).getExtent();if(!e){var i=180*xi[Ri.DEGREES]/t.getMetersPerUnit();e=Xe(-i,-i,i,i)}return e}var $h=function(t){function i(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new bh(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},i.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},i.prototype.forEachLoadedTile=function(t,e,i,o){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var n,s,a,h=!0,l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u)s=Lh(e,l,u),a=!1,r.containsKey(s)&&(a=(n=r.get(s)).getState()===Qt.LOADED)&&(a=!1!==o(n)),a||(h=!1);return h},i.prototype.getGutterForProjection=function(t){return 0},i.prototype.getKey=function(){return this.key_},i.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},i.prototype.getOpaque=function(t){return this.opaque_},i.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},i.prototype.getTile=function(t,i,o,r,n){return e()},i.prototype.getTileGrid=function(){return this.tileGrid},i.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Hh(t)},i.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!$i(e,t)?null:this.tileCache},i.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},i.prototype.getTilePixelSize=function(t,e,i){var o,r,n,s=this.getTileGridForProjection(i),a=this.getTilePixelRatio(e),h=Ir(s.getTileSize(t),this.tmpSize);return 1==a?h:(o=h,r=a,void 0===(n=this.tmpSize)&&(n=[0,0]),n[0]=o[0]*r+.5|0,n[1]=o[1]*r+.5|0,n)},i.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Kh(o,t,i)),Mh(t,o)?t:null},i.prototype.refresh=function(){this.tileCache.clear(),this.changed()},i.prototype.useTile=function(t,e,i,o){},i}(Uh),tl=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),el={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},il=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:rl,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Sh,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[o];r.expireCache(r==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!$i(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!$i(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!$i(e,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Hh(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||$i(e,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new bh(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,o,r,n){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,r),h=a?this.tileUrlFunction(a,o,r):void 0,l=new this.tileClass(s,void 0!==h?Qt.IDLE:Qt.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=n,_(l,P.CHANGE,this.handleTileChange,this),l},e.prototype.getTile=function(t,e,i,o,r){var n=this.getProjection();if(n&&r&&!$i(n,r)){var s,a=this.getTileCacheForProjection(r),h=[t,e,i],l=Ih(h);a.containsKey(l)&&(s=a.get(l));var u=this.getKey();if(s&&s.key==u)return s;var c=this.getTileGridForProjection(n),p=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(h,r),f=new kh(n,c,r,p,h,d,this.getTilePixelRatio(o),this.getGutter(),function(t,e,i,o){return this.getTileInternal(t,e,i,o,n)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,s?(f.interimTile=s,f.refreshInterimChain(),a.replace(l,f)):a.set(l,f),f}return this.getTileInternal(t,e,i,o,n||r)},e.prototype.getTileInternal=function(t,e,i,o,r){var n=null,s=Lh(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((n=this.tileCache.get(s)).key!=a){var h=n;n=this.createTile_(t,e,i,o,r,a),h.getState()==Qt.IDLE?n.interimTile=h.interimTile:n.interimTile=h,n.refreshInterimChain(),this.tileCache.replace(s,n)}}else n=this.createTile_(t,e,i,o,r,a),this.tileCache.set(s,n);return n},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=Ki(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):Xh,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,r=o(i),n=i.getState();n==Qt.LOADING?(this.tileLoadingKeys_[r]=!0,e=el.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=n==Qt.ERROR?el.TILELOADERROR:n==Qt.LOADED||n==Qt.ABORT?el.TILELOADEND:void 0),null!=e&&this.dispatchEvent(new tl(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=zh(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Yh(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var o=Lh(t,e,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}($h));function rl(t,e){t.getImage().src=e}var nl=function(t){function e(e){var i=e||{},o=void 0!==i.projection?i.projection:"EPSG:3857",r=void 0!==i.tileGrid?i.tileGrid:qh({extent:Qh(o),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:o,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(il),sl='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',al=function(t){function e(e){var i,o=e||{};i=void 0!==o.attributions?o.attributions:[sl];var r=void 0!==o.crossOrigin?o.crossOrigin:"anonymous",n=void 0!==o.url?o.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:o.cacheSize,crossOrigin:r,opaque:void 0===o.opaque||o.opaque,maxZoom:void 0!==o.maxZoom?o.maxZoom:19,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,url:n,wrapX:o.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(nl),hl=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',sl],ll={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},ul={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},cl=function(t){function e(e){var i=e.layer.indexOf("-"),o=-1==i?e.layer:e.layer.slice(0,i),r=ul[o],n=ll[e.layer],s=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+n.extension;t.call(this,{attributions:hl,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:r.maxZoom,minZoom:null!=e.minZoom?e.minZoom:r.minZoom,opaque:n.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:s,wrapX:e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(nl);const pl=new Ch({title:"Stamen-WaterColor",source:new cl({layer:"watercolor"})}),dl=new Ch({title:"Stamen-Labels",source:new cl({layer:"terrain-labels"})}),fl=new wr({title:"Stamen",layers:[pl,dl]}),gl=new Ch({title:"OSM",source:new al});mh.addLayer(gl),mh.addLayer(fl);var _l={base32:"0123456789bcdefghjkmnpqrstuvwxyz"},yl=function(t,e){var i=t[0],o=t[1];if(!e){for(var r=1;r<=12;r++){var n=yl([i,o],r),s=vl(n);if(s.lat==o&&s.lon==i)return n}e=12}(e<1||e>12)&&(e=12);for(var a=0,h=0,l=!0,u="",c=-90,p=90,d=-180,f=180;u.length<e;){if(l){var g=(d+f)/2;i>=g?(a=2*a+1,d=g):(a*=2,f=g)}else{var _=(c+p)/2;o>=_?(a=2*a+1,c=_):(a*=2,p=_)}l=!l,5==++h&&(u+=_l.base32.charAt(a),h=0,a=0)}return u},vl=function(t){var e=ml(t),i=e[1],o=e[0],r=e[3],n=e[2],s=(i+r)/2,a=(o+n)/2;return s=s.toFixed(Math.floor(2-Math.log(r-i)/Math.LN10)),a=a.toFixed(Math.floor(2-Math.log(n-o)/Math.LN10)),[Number(a),Number(s)]},ml=function(t){if(!t)return!1;t=t.toLowerCase();for(var e=!0,i=-90,o=90,r=-180,n=180,s=0;s<t.length;s++){var a=t.charAt(s),h=_l.base32.indexOf(a);if(-1==h)return!1;for(var l=4;l>=0;l--){var u=h>>l&1;if(e){var c=(r+n)/2;1==u?r=c:n=c}else{var p=(i+o)/2;1==u?i=p:o=p}e=!e}}return[r,i,n,o]},El=function(t){var e=t||{},i=this,o=document.createElement("button");if(this.replaceState_=!1!==e.urlReplace,this.fixed_=e.fixed||6,this.hash_=e.anchor?"#":"?",this._localStorage=e.localStorage,!this._localStorage)try{localStorage.removeItem("ol@permalink")}catch(t){console.warn("Failed to access localStorage...")}function r(){"function"==typeof e.onclick?e.onclick(i.getLink()):i.setUrlReplace(!i.replaceState_)}o.addEventListener("click",r,!1),o.addEventListener("touchstart",r,!1);var n=document.createElement("div");n.className=(e.className||"ol-permalink")+" ol-unselectable ol-control",n.appendChild(o),(e.hidden||!1===e.visible)&&dh.hide(n),Fr.call(this,{element:n,target:e.target}),this.set("geohash",e.geohash),this.set("initial",!1),this.on("change",this.viewChange_.bind(this)),this.search_={};var s={},a=document.location.hash||document.location.search||"";if(this.replaceState_&&!a&&this._localStorage)try{a=localStorage["ol@permalink"]}catch(t){console.warn("Failed to access localStorage...")}if(a){a=a.replace(/(^#|^\?)/,"").split("&");for(var h=0;h<a.length;h++){var l=a[h].split("=");switch(l[0]){case"lon":case"lat":case"z":case"r":s[l[0]]=l[1];break;case"gh":{const t=l[1].split("-"),e=vl(t[0]);s.lon=e[0],s.lat=e[1],s.z=t[1];break}case"l":break;default:this.search_[l[0]]=l[1]}}}s.hasOwnProperty("lon")&&this.set("initial",s),this.replaceState_&&this.setPosition()};Ka(El,Fr),El.prototype.getInitialPosition=function(){return this.get("initial")},El.prototype.setMap=function(t){this._listener&&(M(this._listener.change),M(this._listener.moveend)),this._listener=null,Fr.prototype.setMap.call(this,t),t&&(this._listener={change:t.getLayerGroup().on("change",this.layerChange_.bind(this)),moveend:t.on("moveend",this.viewChange_.bind(this))},this.setPosition())},El.prototype.getLayerByLink=function(t,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var i=0;i<e.length;i++){if(e[i].get("permalink")==t)return e[i];if(e[i].getLayers){var o=this.getLayerByLink(t,e[i].getLayers().getArray());if(o)return o}}return!1},El.prototype.setGeohash=function(t){this.set("geohash",t),this.setUrlParam()},El.prototype.setPosition=function(t){var e=this.getMap();if(e){var i=this.replaceState_||t?document.location.hash||document.location.search:"";if(!i&&this._localStorage)try{i=localStorage["ol@permalink"]}catch(t){console.warn("Failed to access localStorage...")}if(i){var o,r,n={};for(i=i.replace(/(^#|^\?)/,"").split("&"),o=0;o<i.length;o++)n[(r=i[o].split("="))[0]]=r[1];if(n.gh){var s=n.gh.split("-"),a=vl(s[0]);n.lon=a[0],n.lat=a[1],n.z=s[1]}var h=io([Number(n.lon),Number(n.lat)],"EPSG:4326",e.getView().getProjection());if(h[0]&&h[1]&&e.getView().setCenter(h),n.z&&e.getView().setZoom(Number(n.z)),n.r&&e.getView().setRotation(Number(n.r)),n.l){!function t(i){i||(i=e.getLayers().getArray());for(var o=0;o<i.length;o++)i[o].get("permalink")&&i[o].setVisible(!1),i[o].getLayers&&t(i[o].getLayers().getArray())}();var l=n.l.split("|");for(o=0;o<l.length;o++){r=l[o].split(":");var u=this.getLayerByLink(r[0]),c=Number(r[1]);u&&(u.setOpacity(c),u.setVisible(!0))}}}}},El.prototype.getUrlParams=function(){return this.search_},El.prototype.setUrlParam=function(t,e){t&&(void 0===e||""===e?delete this.search_[encodeURIComponent(t)]:this.search_[encodeURIComponent(t)]=encodeURIComponent(e)),this.viewChange_()},El.prototype.getUrlParam=function(t){return decodeURIComponent(this.search_[encodeURIComponent(t)]||"")},El.prototype.hasUrlParam=function(t){return this.search_.hasOwnProperty(encodeURIComponent(t))},El.prototype.getLink=function(t){var e=this.getMap(),i=io(e.getView().getCenter(),e.getView().getProjection(),"EPSG:4326"),o=Math.round(10*e.getView().getZoom())/10,r=e.getView().getRotation(),n=this.layerStr_,s=(r?"&r="+Math.round(1e4*r)/1e4:"")+(n?"&l="+n:"");this.get("geohash")?s="gh="+yl(i,8)+"-"+o+s:s="lon="+i[0].toFixed(this.fixed_)+"&lat="+i[1].toFixed(this.fixed_)+"&z="+o+s;if("position"===t)return s;for(var a in this.search_)s+="&"+a+(void 0!==this.search_[a]?"="+this.search_[a]:"");return t?s:document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+s},El.prototype.getUrlReplace=function(){return this.replaceState_},El.prototype.setUrlReplace=function(t){try{if(this.replaceState_=t,t)window.history.replaceState(null,null,this.getLink());else{var e="";for(var i in this.search_)e+=(""==e?"?":"&")+i+(void 0!==this.search_[i]?"="+this.search_[i]:"");window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch(t){}},El.prototype.viewChange_=function(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch(t){}if(this._localStorage)try{localStorage["ol@permalink"]=this.getLink(this._localStorage)}catch(t){console.warn("Failed to access localStorage...")}},El.prototype.layerChange_=function(){this._tout&&(clearTimeout(this._tout),this._tout=null),this._tout=setTimeout(function(){this._tout=null;var t="";!function e(i){for(var o=0;o<i.length;o++)i[o].getVisible()&&i[o].get("permalink")&&(t&&(t+="|"),t+=i[o].get("permalink")+":"+i[o].get("opacity")),i[o].getLayers&&e(i[o].getLayers().getArray())}(this.getMap().getLayers().getArray()),this.layerStr_=t,this.viewChange_()}.bind(this),200)};const Tl=new El;mh.addControl(Tl);var Cl=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};Cl.prototype.clone=function(){return new Cl({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},Cl.prototype.getOpacity=function(){return this.opacity_},Cl.prototype.getRotateWithView=function(){return this.rotateWithView_},Cl.prototype.getRotation=function(){return this.rotation_},Cl.prototype.getScale=function(){return this.scale_},Cl.prototype.getSnapToPixel=function(){return!1},Cl.prototype.getAnchor=function(){return e()},Cl.prototype.getImage=function(t){return e()},Cl.prototype.getHitDetectionImage=function(t){return e()},Cl.prototype.getImageState=function(){return e()},Cl.prototype.getImageSize=function(){return e()},Cl.prototype.getHitDetectionImageSize=function(){return e()},Cl.prototype.getOrigin=function(){return e()},Cl.prototype.getSize=function(){return e()},Cl.prototype.setOpacity=function(t){this.opacity_=t},Cl.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Cl.prototype.setRotation=function(t){this.rotation_=t},Cl.prototype.setScale=function(t){this.scale_=t},Cl.prototype.setSnapToPixel=function(t){},Cl.prototype.listenImageChange=function(t,i){return e()},Cl.prototype.load=function(){e()},Cl.prototype.unlistenImageChange=function(t,i){e()};var xl=Cl,Rl=function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return Xn.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,o="",r="",n=0,s=null,a=0,h=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=Qn),i=Ts(i),void 0===(h=this.stroke_.getWidth())&&(h=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),H||(s=null,a=0),void 0===(r=this.stroke_.getLineJoin())&&(r=Jn),void 0===(o=this.stroke_.getLineCap())&&(o=Kn),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var l=2*(this.radius_+h)+1,u={strokeStyle:i,strokeWidth:h,size:l,lineCap:o,lineDash:s,lineDashOffset:a,lineJoin:r,miterLimit:n};if(void 0===t){var c=_r(l,l);this.canvas_=c.canvas,e=l=this.canvas_.width,this.draw_(u,c,0,0),this.createHitDetectionCanvas_(u)}else{l=Math.round(l);var p,d=!this.fill_;d&&(p=this.drawHitDetectionCanvas_.bind(this,u));var f=this.getChecksum(),g=t.add(f,l,l,this.draw_.bind(this,u),p);this.canvas_=g.image,this.origin_=[g.offsetX,g.offsetY],e=g.image.width,d?(this.hitDetectionCanvas_=g.hitImage,this.hitDetectionImageSize_=[g.hitImage.width,g.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[l/2,l/2],this.size_=[l,l],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,o){var r,n,s;e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(a*=2),r=0;r<=a;r++)n=2*r*Math.PI/a-Math.PI/2+this.angle_,s=r%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(n),t.size/2+s*Math.sin(n))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l=Hn),e.fillStyle=Ts(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=_r(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,o){e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var n,s,a,h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(r*=2),n=0;n<=r;n++)a=2*n*Math.PI/r-Math.PI/2+this.angle_,s=n%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=ys(Hn),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(xl),Sl=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(Rl),wl=Sl,Ll=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};Ll.prototype.clone=function(){var t=this.getColor();return new Ll({color:Array.isArray(t)?t.slice():t||void 0})},Ll.prototype.getColor=function(){return this.color_},Ll.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Ll.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+ys(t):this.checksum_=o(this.color_):this.checksum_="f-"}return this.checksum_};var Il=Ll,Ol=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};Ol.prototype.clone=function(){var t=this.getColor();return new Ol({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},Ol.prototype.getColor=function(){return this.color_},Ol.prototype.getLineCap=function(){return this.lineCap_},Ol.prototype.getLineDash=function(){return this.lineDash_},Ol.prototype.getLineDashOffset=function(){return this.lineDashOffset_},Ol.prototype.getLineJoin=function(){return this.lineJoin_},Ol.prototype.getMiterLimit=function(){return this.miterLimit_},Ol.prototype.getWidth=function(){return this.width_},Ol.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Ol.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},Ol.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},Ol.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},Ol.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},Ol.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},Ol.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},Ol.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=o(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var Pl=Ol,Ml=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Dl,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function bl(t){var e;if("function"==typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else $t("function"==typeof t.getZIndex,41),i=[t];e=function(){return i}}return e}Ml.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new Ml({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},Ml.prototype.getRenderer=function(){return this.renderer_},Ml.prototype.setRenderer=function(t){this.renderer_=t},Ml.prototype.getGeometry=function(){return this.geometry_},Ml.prototype.getGeometryFunction=function(){return this.geometryFunction_},Ml.prototype.getFill=function(){return this.fill_},Ml.prototype.setFill=function(t){this.fill_=t},Ml.prototype.getImage=function(){return this.image_},Ml.prototype.setImage=function(t){this.image_=t},Ml.prototype.getStroke=function(){return this.stroke_},Ml.prototype.setStroke=function(t){this.stroke_=t},Ml.prototype.getText=function(){return this.text_},Ml.prototype.setText=function(t){this.text_=t},Ml.prototype.getZIndex=function(){return this.zIndex_},Ml.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Dl,this.geometry_=t},Ml.prototype.setZIndex=function(t){this.zIndex_=t};var Al=null;function Fl(t,e){if(!Al){var i=new Il({color:"rgba(255,255,255,0.4)"}),o=new Pl({color:"#3399CC",width:1.25});Al=[new Ml({image:new wl({fill:i,stroke:o,radius:5}),fill:i,stroke:o})]}return Al}function Nl(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[fi.POLYGON]=[new Ml({fill:new Il({color:[255,255,255,.5]})})],t[fi.MULTI_POLYGON]=t[fi.POLYGON],t[fi.LINE_STRING]=[new Ml({stroke:new Pl({color:e,width:5})}),new Ml({stroke:new Pl({color:i,width:3})})],t[fi.MULTI_LINE_STRING]=t[fi.LINE_STRING],t[fi.CIRCLE]=t[fi.POLYGON].concat(t[fi.LINE_STRING]),t[fi.POINT]=[new Ml({image:new wl({radius:6,fill:new Il({color:i}),stroke:new Pl({color:e,width:1.5})}),zIndex:1/0})],t[fi.MULTI_POINT]=t[fi.POINT],t[fi.GEOMETRY_COLLECTION]=t[fi.POLYGON].concat(t[fi.LINE_STRING],t[fi.POINT]),t}function Dl(t){return t.getGeometry()}var Gl=Ml,kl="renderOrder",jl=function(t){function e(e){var i=e||{},o=h({},i);delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,t.call(this,o),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||Un.VECTOR,this.type=Wn.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(kl)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(kl,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Fl,this.styleFunction_=null===t?void 0:bl(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(Xr);jl.prototype.getSource;var Yl=jl,Xl=function(t){function e(e){var i=e||{},o=i.renderMode||za.HYBRID;$t(null==o||o==za.IMAGE||o==za.HYBRID||o==za.VECTOR,28),i.declutter&&o==za.IMAGE&&(o=za.HYBRID),i.renderMode=o;var r=h({},i);delete r.preload,delete r.useInterimTilesOnError,t.call(this,r),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=Wn.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Eh.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Eh.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(Eh.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Eh.USE_INTERIM_TILES_ON_ERROR,t)},e}(Yl);Xl.prototype.getSource;var zl=Xl,Wl=function(t){function e(e){var i=e||{};t.call(this,i),this.type=Wn.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Xr);Wl.prototype.getSource;var Ul=Wl,Zl={FRACTION:"fraction",PIXELS:"pixels"},Vl=function(t){function e(e,i,o,r,n,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=n,this.size_=o,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===Xn.LOADED){this.tainted_=!1;var t=_r(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(P.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Xn.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Xn.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],o=_r(e,i);o.fillRect(0,0,e,i),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Xn.IDLE){this.imageState_=Xn.LOADING,this.imageListenerKeys_=[y(this.image_,P.ERROR,this.handleImageError_,this),y(this.image_,P.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,o=this.color_[0]/255,r=this.color_[1]/255,n=this.color_[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=o,i[s+1]*=r,i[s+2]*=n;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(m),this.imageListenerKeys_=null},e}(O);function Bl(t,e,i,o,r,n){var s=Is.get(e,o,n);return s||(s=new Vl(t,e,i,o,r,n),Is.set(e,o,n,s)),s}var Hl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Kl=function(t){function e(e){var i=e||{},r=void 0!==i.opacity?i.opacity:1,n=void 0!==i.rotation?i.rotation:0,s=void 0!==i.scale?i.scale:1,a=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:r,rotation:n,scale:s,rotateWithView:a}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:Hl.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:Zl.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:Zl.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var h=void 0!==i.img?i.img:null,l=void 0!==i.imgSize?i.imgSize:null,u=i.src;$t(!(void 0!==u&&h),4),$t(!h||h&&l,5),void 0!==u&&0!==u.length||!h||(u=h.src||o(h)),$t(void 0!==u&&u.length>0,6);var c,p=void 0!==i.src?Xn.IDLE:Xn.LOADED;this.color_=void 0!==i.color?(c=i.color,Array.isArray(c)?c:vs(c)):null,this.iconImage_=Bl(h,u,l,this.crossOrigin_,p,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:Hl.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Zl.FRACTION||this.anchorYUnits_==Zl.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Zl.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==Zl.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=Hl.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Hl.TOP_RIGHT&&this.anchorOrigin_!=Hl.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Hl.BOTTOM_LEFT&&this.anchorOrigin_!=Hl.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Hl.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=Hl.TOP_RIGHT&&this.offsetOrigin_!=Hl.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=Hl.BOTTOM_LEFT&&this.offsetOrigin_!=Hl.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return _(this.iconImage_,P.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){v(this.iconImage_,P.CHANGE,t,e)},e}(xl),ql="blur",Jl="gradient",Ql="radius",$l=["#00f","#0ff","#0f0","#ff0","#f00"],tu=function(t){function e(e){var i=e||{},o=h({},i);delete o.gradient,delete o.radius,delete o.blur,delete o.shadow,delete o.weight,t.call(this,o),this.gradient_=null,this.shadow_=void 0!==i.shadow?i.shadow:250,this.circleImage_=void 0,this.styleCache_=null,_(this,N(Jl),this.handleGradientChanged_,this),this.setGradient(i.gradient?i.gradient:$l),this.setBlur(void 0!==i.blur?i.blur:15),this.setRadius(void 0!==i.radius?i.radius:8),_(this,N(ql),this.handleStyleChanged_,this),_(this,N(Ql),this.handleStyleChanged_,this),this.handleStyleChanged_();var r,n=i.weight?i.weight:"weight";r="string"==typeof n?function(t){return t.get(n)}:n,this.setStyle(function(t,e){var i=r(t),o=void 0!==i?re(i,0,1):1,n=255*o|0,s=this.styleCache_[n];return s||(s=[new Gl({image:new Kl({opacity:o,src:this.circleImage_})})],this.styleCache_[n]=s),s}.bind(this)),this.setRenderOrder(null),_(this,Jt.RENDER,this.handleRender_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),i=t+e+1,o=2*i,r=_r(o,o);r.shadowOffsetX=r.shadowOffsetY=this.shadow_,r.shadowBlur=e,r.shadowColor="#000",r.beginPath();var n=i-this.shadow_;return r.arc(n,n,t,0,2*Math.PI,!0),r.fill(),r.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(ql)},e.prototype.getGradient=function(){return this.get(Jl)},e.prototype.getRadius=function(){return this.get(Ql)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=1,i=256,o=_r(e,i),r=o.createLinearGradient(0,0,e,i),n=1/(t.length-1),s=0,a=t.length;s<a;++s)r.addColorStop(s*n,t[s]);return o.fillStyle=r,o.fillRect(0,0,e,i),o.getImageData(0,0,e,i).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,i=e.canvas,o=e.getImageData(0,0,i.width,i.height),r=o.data,n=0,s=r.length;n<s;n+=4){var a=4*r[n+3];a&&(r[n]=this.gradient_[a],r[n+1]=this.gradient_[a+1],r[n+2]=this.gradient_[a+2])}e.putImageData(o,0,0)},e.prototype.setBlur=function(t){this.set(ql,t)},e.prototype.setGradient=function(t){this.set(Jl,t)},e.prototype.setRadius=function(t){this.set(Ql,t)},e}(Yl);var eu=tu,iu=function(t){t=t||{};var e,i=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,this._layers=[],this._layerGroup=t.layerGroup&&t.layerGroup.getLayers?t.layerGroup:null,this.onchangeCheck="function"==typeof t.onchangeCheck?t.onchangeCheck:null,"function"==typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target?e=dh.create("DIV",{className:t.switcherClass||"ol-layerswitcher"}):(e=dh.create("DIV",{className:(t.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control"}),!1!==t.collapsed?e.classList.add("ol-collapsed"):e.classList.add("ol-forceopen"),this.button=dh.create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",(function(t){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),t.preventDefault(),i.overflow()})),this.button.addEventListener("click",(function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),i.overflow()})),t.mouseover&&(e.addEventListener("mouseleave",(function(){e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!0})})),e.addEventListener("mouseover",(function(){e.classList.remove("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!1})}))),t.minibar&&(t.noScroll=!0),t.noScroll||(this.topv=dh.create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){i.overflow("+50%")}}),this.botv=dh.create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){i.overflow("-50%")}})),this._noScroll=t.noScroll),this.panel_=dh.create("UL",{className:"panel"}),this.panelContainer_=dh.create("DIV",{className:"panel-container",html:this.panel_,parent:e}),t.target||t.noScroll||dh.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",(function(t){i.overflow(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)))&&(t.stopPropagation(),t.preventDefault())})),this.header_=dh.create("LI",{className:"ol-header",parent:this.panel_}),Fr.call(this,{element:e,target:t.target}),this.set("drawDelay",t.drawDelay||0),this.set("selection",t.selection),t.minibar&&setTimeout(function(){var t=dh.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],(function(){t.refresh()}))}.bind(this))};Ka(iu,Fr),iu.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"},iu.prototype.displayInLayerSwitcher=function(t){return!1!==t.get("displayInLayerSwitcher")},iu.prototype.setMap=function(t){if(Fr.prototype.setMap.call(this,t),this.drawPanel(),this._listener)for(var e in this._listener)M(this._listener[e]);this._listener=null,t&&(this._listener={moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=t.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))},iu.prototype.show=function(){this.element.classList.add("ol-forceopen"),this.overflow(),self.dispatchEvent({type:"toggle",collapsed:!1})},iu.prototype.hide=function(){this.element.classList.remove("ol-forceopen"),this.overflow(),self.dispatchEvent({type:"toggle",collapsed:!0})},iu.prototype.toggle=function(){this.element.classList.toggle("ol-forceopen"),this.overflow()},iu.prototype.isOpen=function(){return this.element.classList.contains("ol-forceopen")},iu.prototype.setHeader=function(t){dh.setHTML(this.header_,t)},iu.prototype.overflow=function(t){if(this.button&&!this._noScroll){if(dh.hidden(this.panel_))return void dh.setStyle(this.element,{height:"auto"});var e=dh.outerHeight(this.element),i=dh.outerHeight(this.panel_),o=this.button.offsetTop+dh.outerHeight(this.button),r=this.panel_.offsetTop-o;if(i>e-o){dh.setStyle(this.element,{height:"100%"});var n=this.panel_.querySelectorAll("li.visible .li-content")[0],s=n?2*dh.getStyle(n,"height"):0;switch(t){case 1:r+=s;break;case-1:r-=s;break;case"+50%":r+=Math.round(e/2);break;case"-50%":r-=Math.round(e/2)}return r+i<=e-3*o/2?(r=e-3*o/2-i,dh.hide(this.botv)):dh.show(this.botv),r>=0?(r=0,dh.hide(this.topv)):dh.show(this.topv),dh.setStyle(this.panel_,{top:r+"px"}),!0}return dh.setStyle(this.element,{height:"auto"}),dh.setStyle(this.panel_,{top:0}),dh.hide(this.botv),dh.hide(this.topv),!1}return!1},iu.prototype._setLayerForLI=function(t,e){var i=[];e.getLayers&&i.push(e.getLayers().on("change:length",this.drawPanel.bind(this))),t&&(i.push(e.on("change:opacity",function(){this.setLayerOpacity(e,t)}.bind(this))),i.push(e.on("change:visible",function(){this.setLayerVisibility(e,t)}.bind(this)))),i.push(e.on("propertychange",function(t){"displayInLayerSwitcher"!==t.key&&"openInLayerSwitcher"!==t.key&&"title"!==t.key&&"name"!==t.key||this.drawPanel(t)}.bind(this))),this._layers.push({li:t,layer:e,listeners:i})},iu.prototype.setLayerOpacity=function(t,e){var i=e.querySelector(".layerswitcher-opacity-cursor");i&&(i.style.left=100*t.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:t})},iu.prototype.setLayerVisibility=function(t,e){var i=e.querySelector(".ol-visibility");i&&(i.checked=t.getVisible()),t.getVisible()?e.classList.add("ol-visible"):e.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:t})},iu.prototype._clearLayerForLI=function(){this._layers.forEach((function(t){t.listeners.forEach((function(t){M(t)}))})),this._layers=[]},iu.prototype._getLayerForLI=function(t){for(var e,i=0;e=this._layers[i];i++)if(e.li===t)return e.layer;return null},iu.prototype.viewChange=function(){this.panel_.querySelectorAll("li").forEach(function(t){var e=this._getLayerForLI(t);e&&(this.testLayerVisibility(e)?t.classList.remove("ol-layer-hidden"):t.classList.add("ol-layer-hidden"))}.bind(this))},iu.prototype.getPanel=function(){return this.panelContainer_},iu.prototype.drawPanel=function(){if(this.getMap()){var t=this;this.dcount++,setTimeout((function(){t.drawPanel_()}),this.get("drawDelay")||0)}},iu.prototype.drawPanel_=function(){if(!--this.dcount&&!this.dragging_){var t=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(t){t.classList.contains("ol-header")||t.remove()}.bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=t}},iu.prototype.switchLayerVisibility=function(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach((function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)}))):t.setVisible(!t.getVisible())},iu.prototype.testLayerVisibility=function(t){if(!this.getMap())return!0;var e=this.getMap().getView().getResolution(),i=this.getMap().getView().getZoom();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;if(t.getMinZoom&&(t.getMinZoom()>=i||t.getMaxZoom()<i))return!1;var o=t.getExtent();return!o||hi(this.getMap().getView().calculateExtent(this.getMap().getSize()),o)},iu.prototype.dragOrdering_=function(t){t.stopPropagation(),t.preventDefault();var e,i,o,r,n,s=this,a=t.currentTarget.parentNode.parentNode,h=!0,l=this.panel_,u=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;function c(t){if(e=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,h&&Math.abs(u-e)>2&&(h=!1,a.classList.add("drag"),r=s._getLayerForLI(a),i=!1,n=s._getLayerForLI(a.parentNode.parentNode),o=dh.create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:dh.outerWidth(a),height:dh.getStyle(a,"height")},parent:l}),s.element.classList.add("drag"),s.dispatchEvent({type:"reorder-start",layer:r,group:n})),!h){var c;for(t.preventDefault(),t.stopPropagation(),dh.setStyle(o,{top:e-dh.offsetRect(l).top+l.scrollTop+5}),(c=t.touches?document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target).classList.contains("ol-switcherbottomdiv")?s.overflow(-1):c.classList.contains("ol-switchertopdiv")&&s.overflow(1);c&&"LI"!==c.tagName;)c=c.parentNode;c&&c.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),c&&c.parentNode.classList.contains("drag")&&c!==a?((i=s._getLayerForLI(c))&&!i.get("allwaysOnTop")==!r.get("allwaysOnTop")?(c.classList.add("dropover"),c.classList.add(a.offsetTop<c.offsetTop?"dropover-after":"dropover-before")):i=!1,dh.show(o)):(i=!1,c===a?dh.hide(o):dh.show(o)),i?o.classList.remove("forbidden"):o.classList.add("forbidden")}}a.parentNode.classList.add("drag"),dh.addListener(document,"mousemove touchmove",c),dh.addListener(document,"mouseup touchend touchcancel",(function t(){if(i){var e=r,h=s.getSelection()===e;if(e&&i){for(var l,u=(l=n?n.getLayers():s._layerGroup?s._layerGroup.getLayers():s.getMap().getLayers()).getArray(),p=0;p<u.length;p++)if(u[p]==e){l.removeAt(p);break}for(var d=0;d<u.length;d++)if(u[d]===i){p>d?l.insertAt(d,e):l.insertAt(d+1,e);break}}h&&s.selectLayer(e),s.dispatchEvent({type:"reorder-end",layer:e,group:n})}a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),s.element.classList.remove("drag"),o&&o.remove(),dh.removeListener(document,"mousemove touchmove",c),dh.removeListener(document,"mouseup touchend touchcancel",t)}))},iu.prototype.dragOpacity_=function(t){t.stopPropagation(),t.preventDefault();var e=this,i=t.target,o=this._getLayerForLI(i.parentNode.parentNode.parentNode);if(o){var r=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,n=dh.getStyle(i,"left")-r;e.dragging_=!0,dh.addListener(document,"mouseup touchend touchcancel",(function t(){dh.removeListener(document,"mouseup touchend touchcancel",t),dh.removeListener(document,"mousemove touchmove",s),e.dragging_=!1})),dh.addListener(document,"mousemove touchmove",s)}function s(t){var e=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,r=(n+e)/dh.getStyle(i.parentNode,"width"),s=Math.max(0,Math.min(1,r));dh.setStyle(i,{left:100*s+"%"}),i.parentNode.nextElementSibling.innerHTML=Math.round(100*s),o.setOpacity(s)}},iu.prototype.drawList=function(t,e){var i=this,o=e.getArray(),r=function(t){t.stopPropagation(),t.preventDefault();var o=i._getLayerForLI(this.parentNode.parentNode);i.switchLayerVisibility(o,e),i.get("selection")&&o.getVisible()&&i.selectLayer(o),i.onchangeCheck&&i.onchangeCheck(o)};function n(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.oninfo(e),i.dispatchEvent({type:"info",layer:e})}function s(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.onextent?i.onextent(e):i.getMap().getView().fit(e.getExtent(),i.getMap().getSize()),i.dispatchEvent({type:"extent",layer:e})}function a(t){t.stopPropagation(),t.preventDefault();var e,o=this.parentNode.parentNode.parentNode.parentNode,r=i._getLayerForLI(o);r?(e=i._getLayerForLI(this.parentNode.parentNode),r.getLayers().remove(e),0!=r.getLayers().getLength()||r.get("noSwitcherDelete")||a.call(o.querySelectorAll(".layerTrash")[0],t)):(o=this.parentNode.parentNode,i.getMap().removeLayer(i._getLayerForLI(o)))}function h(e){if(this.displayInLayerSwitcher(e)){var h=dh.create("LI",{className:(e.getVisible()?"visible ":" ")+(e.get("baseLayer")?"baselayer":""),parent:t});this._setLayerForLI(h,e),this._selectedLayer===e&&h.classList.add("ol-layer-select");var u=dh.create("DIV",{className:"ol-layerswitcher-buttons",parent:h}),c=dh.create("DIV",{className:"li-content",parent:h});dh.create("INPUT",{type:e.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:e.getVisible(),click:r,parent:c});var p=dh.create("LABEL",{title:e.get("title")||e.get("name"),click:r,unselectable:"on",style:{userSelect:"none"},parent:c});if(p.addEventListener("selectstart",(function(){return!1})),dh.create("SPAN",{html:e.get("title")||e.get("name"),click:function(t){this.get("selection")&&(t.stopPropagation(),this.selectLayer(e))}.bind(this),parent:p}),this.reordering&&(l<o.length-1&&(e.get("allwaysOnTop")||!o[l+1].get("allwaysOnTop"))||l>0&&(!e.get("allwaysOnTop")||o[l-1].get("allwaysOnTop")))&&dh.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(t){i.dragOrdering_(t)}},parent:u}),e.getLayers){var d=0;e.getLayers().forEach((function(t){i.displayInLayerSwitcher(t)&&d++})),d&&dh.create("DIV",{className:e.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var t=i._getLayerForLI(this.parentNode.parentNode);t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))},parent:u})}if(this.oninfo&&dh.create("DIV",{className:"layerInfo",title:this.tip.info,click:n,parent:u}),this.hastrash&&!e.get("noSwitcherDelete")&&dh.create("DIV",{className:"layerTrash",title:this.tip.trash,click:a,parent:u}),this.hasextent&&o[l].getExtent()){var f=o[l].getExtent();4==f.length&&f[0]<f[2]&&f[1]<f[3]&&dh.create("DIV",{className:"layerExtent",title:this.tip.extent,click:s,parent:u})}if(this.show_progress&&e instanceof Ch){var g=dh.create("DIV",{className:"layerswitcher-progress",parent:c});this.setprogress_(e),e.layerswitcher_progress=dh.create("DIV",{parent:g})}var _=dh.create("DIV",{className:"layerswitcher-opacity",click:function(t){if(t.target===this){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(1,t.offsetX/dh.getStyle(this,"width")));i._getLayerForLI(this.parentNode.parentNode).setOpacity(e),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(100*e)}},parent:c});if(dh.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*e.getOpacity()+"%"},on:{"mousedown touchstart":function(t){i.dragOpacity_(t)}},parent:_}),dh.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*e.getOpacity()),parent:c}),e.getLayers&&(h.classList.add("ol-layer-group"),!0===e.get("openInLayerSwitcher"))){var y=dh.create("UL",{parent:h});this.drawList(y,e.getLayers())}h.classList.add(this.getLayerClass(e)),this.dispatchEvent({type:"drawlist",layer:e,li:h})}else this._setLayerForLI(null,e)}for(var l=o.length-1;l>=0;l--)h.call(this,o[l]);this.viewChange(),t===this.panel_&&this.overflow()},iu.prototype.getLayerClass=function(t){return t?t.getLayers?"ol-layer-group":t instanceof Yl?"ol-layer-vector":t instanceof zl?"ol-layer-vectortile":t instanceof Ch?"ol-layer-tile":t instanceof Ul?"ol-layer-image":t instanceof eu?"ol-layer-heatmap":t.getFeatures?"ol-layer-vectorimage":"unknown":"none"},iu.prototype.selectLayer=function(t,e){if(!t){if(!this.getMap())return;t=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=t,this.drawPanel(),e||this.dispatchEvent({type:"select",layer:t})},iu.prototype.getSelection=function(){return this._selectedLayer},iu.prototype.setprogress_=function(t){if(!t.layerswitcher_progress){var e=0,i=0,o=function(){i===e?(i=e=0,dh.setStyle(t.layerswitcher_progress,{width:0})):dh.setStyle(t.layerswitcher_progress,{width:(e/i*100).toFixed(1)+"%"})};t.getSource().on("tileloadstart",(function(){i++,o()})),t.getSource().on("tileloadend",(function(){e++,o()})),t.getSource().on("tileloaderror",(function(){e++,o()}))}};const ou=new iu;mh.addControl(ou);var ru=function(t){var e=this;t||(t={}),null==t.typing&&(t.typing=300),this._classname=t.className||"search";var i=(t.className||"")+" ol-search"+(t.target?"":" ol-unselectable ol-control"),o=dh.create("DIV",{className:i});if(!1!==t.collapsed&&o.classList.add("ol-collapsed"),t.target||(this.button=document.createElement("BUTTON"),this.button.setAttribute("type","button"),this.button.setAttribute("title",t.title||t.label||"Search"),this.button.addEventListener("click",(function(){if(o.classList.toggle("ol-collapsed"),!o.classList.contains("ol-collapsed")){o.querySelector("input.search").focus();for(var t=o.querySelectorAll("li"),i=0;i<t.length;i++)t[i].classList.remove("select");a.value||e.drawList_()}})),o.appendChild(this.button)),t.inputLabel){var r=document.createElement("LABEL");r.innerText=t.inputLabel,o.appendChild(r)}var n,s="",a=this._input=document.createElement("INPUT");a.setAttribute("type","search"),a.setAttribute("class","search"),a.setAttribute("autocomplete","off"),a.setAttribute("placeholder",t.placeholder||"Search..."),a.addEventListener("change",(function(t){e.dispatchEvent({type:"change:input",input:t,value:a.value})}));var h=function(i){var r=o.querySelector("ul.autocomplete li.select"),h=a.value;if("ArrowDown"==i.key||"ArrowUp"==i.key||"Down"==i.key||"Up"==i.key)r?(r.classList.remove("select"),(r=/Down/.test(i.key)?r.nextElementSibling:r.previousElementSibling)&&r.classList.add("select")):o.querySelector("ul.autocomplete li").classList.add("select");else if("input"!=i.type||h)if(!r||"search"!=i.type&&"Enter"!=i.key)if("search"==i.type||"Enter"==i.key||s!=h&&t.typing>=0)if(s=h){n&&clearTimeout(n);var l=e.get("minLength");n=setTimeout((function(){if(s.length>=l){var t=e.autocomplete(s,(function(t){e.drawList_(t)}));t&&e.drawList_(t)}else e.drawList_()}),t.typing)}else e.drawList_();else(r=o.querySelector("ul.autocomplete li"))&&r.classList.remove("select");else o.classList.contains("ol-control")&&a.blur(),r.classList.remove("select"),s=h,e._handleSelect(e._list[r.getAttribute("data-search")]);else setTimeout((function(){e.drawList_()}),200)};if(a.addEventListener("keyup",h),a.addEventListener("search",h),a.addEventListener("cut",h),a.addEventListener("paste",h),a.addEventListener("input",h),t.noCollapse||(a.addEventListener("blur",function(){setTimeout(function(){a!==document.activeElement&&(o.classList.add("ol-collapsed"),this.set("reverse",!1),o.classList.remove("ol-revers"))}.bind(this),200)}.bind(this)),a.addEventListener("focus",function(){this.get("reverse")||(o.classList.remove("ol-collapsed"),o.classList.remove("ol-revers"))}.bind(this))),o.appendChild(a),t.reverse){var l=dh.create("BUTTON",{type:"button",class:"ol-revers",title:t.reverseTitle||"click on the map",click:function(){this.get("reverse")?this.set("reverse",!1):(this.set("reverse",!this.get("reverse")),a.focus(),o.classList.add("ol-revers"))}.bind(this)});o.appendChild(l)}var u=document.createElement("UL");u.classList.add("autocomplete"),o.appendChild(u),Fr.call(this,{element:o,target:t.target}),"function"==typeof t.getTitle&&(this.getTitle=t.getTitle),"function"==typeof t.autocomplete&&(this.autocomplete=t.autocomplete),this.set("copy",t.copy),this.set("minLength",t.minLength||1),this.set("maxItems",t.maxItems||10),this.set("maxHistory",t.maxHistory||t.maxItems||10),t.onselect&&this.on("select",t.onselect),t.centerOnSelect&&this.on("select",function(t){var e=this.getMap();e&&e.getView().setCenter(t.coordinate)}.bind(this)),t.zoomOnSelect&&this.on("select",function(e){var i=this.getMap();i&&(i.getView().setCenter(e.coordinate),i.getView().getZoom()<t.zoomOnSelect&&i.getView().setZoom(t.zoomOnSelect))}.bind(this)),this.restoreHistory(),this.drawList_()};Ka(ru,Fr),ru.prototype.setMap=function(t){this._listener&&M(this._listener),this._listener=null,Fr.prototype.setMap.call(this,t),t&&(this._listener=t.on("click",this._handleClick.bind(this)))},ru.prototype.collapse=function(t){!1===t?this.element.classList.remove("ol-collapsed"):this.element.classList.add("ol-collapsed")},ru.prototype.getInputField=function(){return this._input},ru.prototype.getTitle=function(t){return t.name||"No title"},ru.prototype._getTitleTxt=function(t){return dh.create("DIV",{html:this.getTitle(t)}).innerText},ru.prototype.search=function(){var t=this.element.querySelector("input.search");this._triggerCustomEvent("search",t)},ru.prototype._handleClick=function(t){this.get("reverse")&&(document.activeElement.blur(),this.reverseGeocode(t.coordinate))},ru.prototype.reverseGeocode=function(){},ru.prototype._triggerCustomEvent=function(t,e){dh.dispatchEvent(t,e)},ru.prototype.setInput=function(t,e){var i=this.element.querySelector("input.search");i.value=t,e&&this._triggerCustomEvent("keyup",i)},ru.prototype.select=function(t,e,i,o){var r={type:"select",search:t,reverse:!!e,coordinate:i};if(o)for(var n in o)r[n]=o[n];this.dispatchEvent(r)},ru.prototype._handleSelect=function(t,e,i){if(t){var o,r=this.get("history");try{var n=JSON.stringify(t);for(o=r.length-1;o>=0;o--)r[o]&&JSON.stringify(r[o])!==n||r.splice(o,1)}catch(e){for(o=r.length-1;o>=0;o--)r[o]===t&&r.splice(o,1)}r.unshift(t);for(var s=Math.max(0,this.get("maxHistory")||10)||0;r.length>s;)r.pop();this.saveHistory(),this.select(t,e,null,i),e&&(this.setInput(this._getTitleTxt(t)),this.drawList_(),setTimeout(function(){this.collapse(!1)}.bind(this),300))}},ru.prototype._history={},ru.prototype.saveHistory=function(){try{this.get("maxHistory")>=0?localStorage["ol@search-"+this._classname]=JSON.stringify(this.get("history")):localStorage.removeItem("ol@search-"+this._classname)}catch(t){console.warn("Failed to access localStorage...")}},ru.prototype.restoreHistory=function(){if(this._history[this._classname])this.set("history",this._history[this._classname]);else try{this._history[this._classname]=JSON.parse(localStorage["ol@search-"+this._classname]),this.set("history",this._history[this._classname])}catch(t){this.set("history",[])}},ru.prototype.clearHistory=function(){this.set("history",[]),this.saveHistory(),this.drawList_()},ru.prototype.getHistory=function(){return this.get("history")},ru.prototype.autocomplete=function(t,e){return e([]),!1},ru.prototype.drawList_=function(t){var e=this,i=this.element.querySelector("ul.autocomplete");if(i.innerHTML="",this._list=[],t)i.setAttribute("class","autocomplete");else{if(this.element.querySelector("input.search").value)return;t=this.get("history"),i.setAttribute("class","autocomplete history")}for(var o,r=Math.min(e.get("maxItems"),t.length),n=0;n<r;n++)if(t[n]&&(!n||!e.equalFeatures(t[n],t[n-1]))){(o=document.createElement("LI")).setAttribute("data-search",this._list.length),this._list.push(t[n]),o.addEventListener("click",(function(t){e._handleSelect(e._list[t.currentTarget.getAttribute("data-search")])}));var s=e.getTitle(t[n]);s instanceof Element?o.appendChild(s):o.innerHTML=s,i.appendChild(o)}r&&this.get("copy")&&((o=document.createElement("LI")).classList.add("copy"),o.innerHTML=this.get("copy"),i.appendChild(o))},ru.prototype.equalFeatures=function(){return!1};var nu=ru,su=function(t){t=t||{},D.call(this),this._auth=t.auth,this.set("dataType",t.dataType||"JSON")};Ka(su,D),su.get=function(t){var e=new su(t);t.success&&e.on("success",(function(e){t.success(e.response,e)})),t.error&&e.on("error",(function(e){t.error(e)})),e.send(t.url,t.data,t.options)},su.getCORS=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.send(),i.onreadystatechange=function(){this.readyState==this.HEADERS_RECEIVED&&e(i.getResponseHeader("Access-Control-Allow-Origin"))}},su.prototype.send=function(t,e,i){var o=this,r=!1!==(i=i||{}).encode;r&&(t=encodeURI(t));var n="";for(var s in e)e.hasOwnProperty(s)&&void 0!==e[s]&&(n+=(n?"&":"?")+s+"="+(r?encodeURIComponent(e[s]):e[s]));this._request&&!1!==i.abort&&this._request.abort();var a=this._request=new XMLHttpRequest;a.open("GET",t+n,!0),i.timeout&&(a.timeout=i.timeout),this._auth&&a.setRequestHeader("Authorization","Basic "+this._auth),this.dispatchEvent({type:"loadstart"}),a.onload=function(){if(o._request=null,o.dispatchEvent({type:"loadend"}),this.status>=200&&this.status<400){var t;try{if("JSON"===o.get("dataType"))t=JSON.parse(this.response);else t=this.response}catch(t){return void o.dispatchEvent({type:"error",status:0,statusText:"parsererror",error:t,options:i,jqXHR:this})}o.dispatchEvent({type:"success",response:t,status:this.status,statusText:this.statusText,options:i,jqXHR:this})}else o.dispatchEvent({type:"error",status:this.status,statusText:this.statusText,options:i,jqXHR:this})},a.ontimeout=function(){o._request=null,o.dispatchEvent({type:"loadend"}),o.dispatchEvent({type:"error",status:this.status,statusText:"Timeout",options:i,jqXHR:this})},a.onerror=function(){o._request=null,o.dispatchEvent({type:"loadend"}),o.dispatchEvent({type:"error",status:this.status,statusText:this.statusText,options:i,jqXHR:this})},a.send()};var au=su,hu=function(t){(t=t||{}).className=t.className||"JSON",delete t.autocomplete,t.minLength=t.minLength||3,t.typing=t.typing||800,nu.call(this,t);var e=t.url||"";if("https:"===window.location.protocol){var i=document.createElement("a");i.href=e,i.protocol=window.location.protocol,e=i.href}this.set("url",e),this._ajax=new au({dataType:"JSON",auth:t.authentication}),this._ajax.on("success",function(t){t.status>=200&&t.status<400?"function"==typeof this._callback&&this._callback(t.response):("function"==typeof this._callback&&this._callback(!1,"error"),console.log("AJAX ERROR",arguments))}.bind(this)),this._ajax.on("error",function(){"function"==typeof this._callback&&this._callback(!1,"error"),console.log("AJAX ERROR",arguments)}.bind(this)),this._ajax.on("loadstart",function(){this.element.classList.add("searching")}.bind(this)),this._ajax.on("loadend",function(){this.element.classList.remove("searching")}.bind(this)),"function"==typeof t.handleResponse&&(this.handleResponse=t.handleResponse)};Ka(hu,nu),hu.prototype.ajax=function(t,e,i,o){o=o||{},this._callback=i,this._ajax.set("dataType",o.dataType||"JSON"),this._ajax.send(t,e,o)},hu.prototype.autocomplete=function(t,e){var i=this.requestData(t),o=encodeURI(this.get("url"));this.ajax(o,i,(function(t){"function"==typeof e&&e(this.handleResponse(t))}))},hu.prototype.requestData=function(t){return{q:t}},hu.prototype.handleResponse=function(t){return t};var lu=hu,uu=function(t){(t=t||{}).className=t.className||"photon",t.url=t.url||"https://photon.komoot.io/api/",t.copy=t.copy||'<a href="http://www.openstreetmap.org/copyright" target="new">&copy; OpenStreetMap contributors</a>',lu.call(this,t),this.set("lang",t.lang),this.set("position",t.position)};Ka(uu,lu),uu.prototype.getTitle=function(t){var e=t.properties;return(e.housenumber||"")+" "+(e.street||e.name||"")+"<i> "+(e.postcode||"")+" "+(e.city||"")+" ("+e.country+")</i>"},uu.prototype.requestData=function(t){var e={q:t,lang:this.get("lang"),limit:this.get("maxItems")};if(this.get("position")){var i=this.getMap().getView(),o=new Zo(i.getCenter());o=o.transform(i.getProjection(),"EPSG:4326").getCoordinates(),e.lon=o[0],e.lat=o[1]}return e},uu.prototype.handleResponse=function(t){return t.features},uu.prototype.equalFeatures=function(t,e){return this.getTitle(t)===this.getTitle(e)&&t.geometry.coordinates[0]===e.geometry.coordinates[0]&&t.geometry.coordinates[1]===e.geometry.coordinates[1]},uu.prototype.select=function(t){var e=t.geometry.coordinates;try{e=io(t.geometry.coordinates,"EPSG:4326",this.getMap().getView().getProjection())}catch(t){}this.dispatchEvent({type:"select",search:t,coordinate:e})},uu.prototype.reverseData=function(t){var e=io(t,this.getMap().getView().getProjection(),"EPSG:4326");return{lon:e[0],lat:e[1]}},uu.prototype.reverseGeocode=function(t,e){this.ajax(this.get("url").replace("/api/","/reverse/").replace("/search/","/reverse/"),this.reverseData(t),function(t){t.features&&(t=t.features),t instanceof Array||(t=[t]),e?e.call(this,t):this._handleSelect(t[0],!0)}.bind(this))};const cu=new uu({lang:(navigator.language||navigator.userLanguage).split("-")[0]||"en",position:!0});mh.addControl(cu),cu.on("select",(t=>{mh.getView().animate({center:t.coordinate,zoom:Math.max(15,mh.getView().getZoom())})}));var pu=function(t){t||(t={});var e=document.createElement("div");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),t.className){var i=t.className.split(" ").filter((function(t){return t.length>0}));e.classList.add.apply(e.classList,i)}if(t.group&&e.classList.add("ol-group"),Fr.call(this,{element:e,target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var o=0;o<t.controls.length;o++)this.addControl(t.controls[o])};Ka(pu,Fr),pu.prototype.setVisible=function(t){this.element.style.display=t?"":"none"},pu.prototype.getVisible=function(){return"none"!=this.element.style.display},pu.prototype.setMap=function(t){Fr.prototype.setMap.call(this,t);for(var e=0;e<this.controls_.length;e++){this.controls_[e].setMap(t)}},pu.prototype.getControls=function(){return this.controls_},pu.prototype.setPosition=function(t){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+t[e])}},pu.prototype.addControl=function(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t.on("change:active",function(e){this.onActivateControl_(e,t)}.bind(this)),t.getActive&&this.onActivateControl_({target:t,active:t.getActive()},t)},pu.prototype.deactivateControls=function(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)},pu.prototype.getActiveControls=function(){for(var t,e=[],i=0;t=this.controls_[i];i++)t.getActive&&t.getActive()&&e.push(t);return e},pu.prototype.setActive=function(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,i=this.getControls(),o=0;e=i[o];o++)e.get("autoActivate")&&e.setActive(!0)},pu.prototype.onActivateControl_=function(t,e){if(this.get("toggleOne"))if(t.active){var i;for(i=0;i<this.controls_.length&&this.controls_[i]!==e;i++);if(i==this.controls_.length)return;this.deactivateControls(this.controls_[i])}else if(!this.getActiveControls().length)for(var o,r=0;o=this.controls_[r];r++)if(o.get("autoActivate")){o.setActive(!0);break}},pu.prototype.getControlsByName=function(t){return this.getControls().filter((function(e){return e.get("name")===t}))};var du=pu,fu=function(t){t=t||{};var e=document.createElement("div");e.className=(t.className||"")+" ol-button ol-unselectable ol-control";var i=this,o=this.button_=document.createElement(/ol-text-button/.test(t.className)?"div":"button");o.type="button",t.title&&(o.title=t.title),t.name&&(o.name=t.name),t.html instanceof Element?o.appendChild(t.html):o.innerHTML=t.html||"";o.addEventListener("click",(function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(i,e)})),e.appendChild(o),!t.title&&o.firstElementChild&&(o.title=o.firstElementChild.title),Fr.call(this,{element:e,target:t.target}),t.title&&this.set("title",t.title),t.title&&this.set("title",t.title),t.name&&this.set("name",t.name)};Ka(fu,Fr),fu.prototype.setVisible=function(t){t?dh.show(this.element):dh.hide(this.element)},fu.prototype.setTitle=function(t){this.button_.setAttribute("title",t)},fu.prototype.setHtml=function(t){dh.setHTML(this.button_,t)},fu.prototype.getButtonElement=function(){return this.button_};var gu=fu;const _u=$("<div>").attr("id","dialog").hide().css({position:"fixed",top:"35%",left:"50%",transform:"translate(-50%,-35%)"}).appendTo("body"),yu=($("<i>").addClass("closeBox").click((()=>{_u.hide()})).appendTo(_u),$("<div>").appendTo(_u));var vu={show:function(t,e){const i=$("<div>");e&&i.append($("<h1>").text(e)),i.append(t),yu.html(i),$("button",i).click((()=>{this.hide()})),_u.show()},hide:function(t){_u.hide()}};const mu=new du;mh.addControl(mu),console.log(mu);const Eu=new du({toggleOne:!0});mu.addControl(Eu);var Tu=new gu({html:'<i class="fa fa-info-circle"></i>',className:"hello",title:"Hello world!",handleClick:()=>{vu.show($(".about").html())}});mu.addControl(Tu);var Cu={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function xu(t,e){return function(t,e,i,o){return function(r,n,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,n,s):t,!0),e.getType()==Cu.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r,n=e.getType();n==Cu.JSON||n==Cu.TEXT?r=a.responseText:n==Cu.XML?(r=a.responseXML)||(r=(new DOMParser).parseFromString(a.responseText,"application/xml")):n==Cu.ARRAY_BUFFER&&(r=a.response),r?i.call(this,e.readFeatures(r,{featureProjection:s}),e.readProjection(r),e.getLastExtent()):o.call(this)}else o.call(this)}.bind(this),a.onerror=function(){o.call(this)}.bind(this),a.send()}}(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),S)}function Ru(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Su={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},wu=function(e){this.rbush_=t(Vs)(e,void 0),this.items_={}};wu.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[o(e)]=i},wu.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,n=e.length;r<n;r++){var s=t[r],a=e[r],h={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=h,this.items_[o(a)]=h}this.rbush_.load(i)},wu.prototype.remove=function(t){var e=o(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},wu.prototype.update=function(t,e){var i=this.items_[o(e)];Ue([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},wu.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},wu.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},wu.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},wu.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},wu.prototype.forEach_=function(t,e,i){for(var o,r=0,n=t.length;r<n;r++)if(o=e.call(i,t[r]))return o;return o},wu.prototype.isEmpty=function(){return c(this.items_)},wu.prototype.clear=function(){this.rbush_.clear(),this.items_={}},wu.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Xe(e.minX,e.minY,e.maxX,e.maxY,t)},wu.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var Lu=wu,Iu=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),Ou=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:Rr.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=S,this.format_=i.format,this.overlaps_=null==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&($t(this.format_,7),this.loader_=xu(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:Ru;var o,r,n=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=n?new Lu:null,this.loadedExtentsRtree_=new Lu,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(i.features)?r=i.features:i.features&&(r=(o=i.features).getArray()),n||void 0!==o||(o=new j(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==o&&this.bindFeaturesCollection_(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=o(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Iu(Su.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[_(e,P.CHANGE,this.handleFeatureChange_,this),_(e,a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,o=e.getId();return void 0!==o?o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=e:($t(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],r=[],n=0,s=t.length;n<s;n++){var a=t[n],h=o(a);this.addToIndex_(h,a)&&i.push(a)}for(var l=0,u=i.length;l<u;l++){var c=i[l],p=o(c);this.setupChangeEvents_(p,c);var d=c.getGeometry();if(d){var f=d.getExtent();e.push(f),r.push(c)}else this.nullGeometryFeatures_[p]=c}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(var g=0,_=i.length;g<_;g++)this.dispatchEvent(new Iu(Su.ADDFEATURE,i[g]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;_(this,Su.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),_(this,Su.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),_(t,s.ADD,(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}),this),_(t,s.REMOVE,(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}),this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(m)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var o=new Iu(Su.CLEAR);this.dispatchEvent(o),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var o=e(i);if(o)return o}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),c(this.nullGeometryFeatures_)||kt(t,u(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],o=t[1],r=null,n=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||x;return this.featuresRtree_.forEachInExtent(a,(function(t){if(h(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(i,o,n,s))<l){r=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=o-u,a[2]=i+u,a[3]=o+u}}})),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=o(e),r=e.getGeometry();if(r){var n=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(n,e)):this.featuresRtree_&&this.featuresRtree_.update(n,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var s=e.getId();if(void 0!==s){var a=s.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[a]=e):this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new Iu(Su.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:o(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&c(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var o=this,r=this.loadedExtentsRtree_,n=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=n[t];r.forEachInExtent(a,(function(t){return Ge(t.extent,a)}))||(o.loader_.call(o,a,e,i),r.insert(a,{extent:a.slice()}),o.loading=o.loader_!==S)},a=0,h=n.length;a<h;++a)s(a)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if(Ue(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=o(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=o(t);this.featureChangeKeys_[e].forEach(m),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new Iu(Su.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(Uh),Pu=Ou,Mu="select",bu=function(t){function e(e,i,o,r){t.call(this,e),this.selected=i,this.deselected=o,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I);function Au(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),o=this.toggleCondition_(t),r=!e&&!i&&!o,n=t.map,s=this.getFeatures(),a=[],h=[];if(r){l(this.featureLayerAssociation_),n.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=s.getLength()-1;u>=0;--u){var c=s.item(u),p=h.indexOf(c);p>-1?h.splice(p,1):(s.remove(c),a.push(c))}0!==h.length&&s.extend(h)}else{n.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!o||Nt(s.getArray(),t)?(i||o)&&Nt(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=a.length-1;d>=0;--d)s.remove(a[d]);s.extend(h)}return(h.length>0||a.length>0)&&this.dispatchEvent(new bu(Mu,h,a,t)),pn(t)}function Fu(){var t=Nl();return kt(t[fi.POLYGON],t[fi.LINE_STRING]),kt(t[fi.GEOMETRY_COLLECTION],t[fi.LINE_STRING]),function(e,i){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var Nu=function(t){function e(e){t.call(this,{handleEvent:Au});var i=e||{};this.condition_=i.condition?i.condition:dn,this.addCondition_=i.addCondition?i.addCondition:cn,this.removeCondition_=i.removeCondition?i.removeCondition:cn,this.toggleCondition_=i.toggleCondition?i.toggleCondition:gn,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:x,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var o,r=new Yl({source:new Pu({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:Fu(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=r,i.layers)if("function"==typeof i.layers)o=i.layers;else{var n=i.layers;o=function(t){return Nt(n,t)}}else o=x;this.layerFilter_=o,this.featureLayerAssociation_={};var a=this.getFeatures();_(a,s.ADD,this.addFeature_,this),_(a,s.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[o(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[o(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),o=this.getFeatures();i&&o.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&o.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[o(t)]},e}(rn),Du=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,_(this,N(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;this.setGeometry(i)}else{var o=e;this.setProperties(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var o=this.getStyle();return o&&t.setStyle(o),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(m(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=_(t,P.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:($t("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){v(this,N(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,_(this,N(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(D);var Gu=Du,ku=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function ju(t,e,i){var o,r=i?Ki(i.featureProjection):null,n=i?Ki(i.dataProjection):null;if(r&&n&&!$i(r,n)?Array.isArray(t)?o=di(t,eo(n,r)):o=(e?t.clone():t).transform(e?r:n,e?n:r):o=t,e&&i&&void 0!==i.decimals&&!Array.isArray(o)){var s=Math.pow(10,i.decimals);o===t&&(o=t.clone()),o.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return o}function Yu(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}ku.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},ku.prototype.adaptOptions=function(t){return h({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},ku.prototype.getLastExtent=function(){return null},ku.prototype.getType=function(){return e()},ku.prototype.readFeature=function(t,i){return e()},ku.prototype.readFeatures=function(t,i){return e()},ku.prototype.readGeometry=function(t,i){return e()},ku.prototype.readProjection=function(t){return e()},ku.prototype.writeFeature=function(t,i){return e()},ku.prototype.writeFeatures=function(t,i){return e()},ku.prototype.writeGeometry=function(t,i){return e()};var Xu=function(t){function i(){t.call(this)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getType=function(){return Cu.JSON},i.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Yu(t),this.getReadOptions(t,e))},i.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Yu(t),this.getReadOptions(t,e))},i.prototype.readFeatureFromObject=function(t,i){return e()},i.prototype.readFeaturesFromObject=function(t,i){return e()},i.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Yu(t),this.getReadOptions(t,e))},i.prototype.readGeometryFromObject=function(t,i){return e()},i.prototype.readProjection=function(t){return this.readProjectionFromObject(Yu(t))},i.prototype.readProjectionFromObject=function(t){return e()},i.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},i.prototype.writeFeatureObject=function(t,i){return e()},i.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},i.prototype.writeFeaturesObject=function(t,i){return e()},i.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},i.prototype.writeGeometryObject=function(t,i){return e()},i}(ku);function zu(t){for(var e=[],i=0,o=t.length;i<o;++i)e.push(t[i].clone());return e}var Wu=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)v(this.geometries_[t],P.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)_(this.geometries_[t],P.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,o){if(o<Ne(this.getExtent(),t,e))return o;for(var r=this.geometries_,n=0,s=r.length;n<s;++n)o=r[n].closestPointXY(t,e,i,o);return o},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,o=0,r=i.length;o<r;++o)if(i[o].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){ze(t);for(var e=this.geometries_,i=0,o=e.length;i<o;++i)Ze(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return zu(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(l(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var o=[],r=this.geometries_,n=!1,s=0,a=r.length;s<a;++s){var h=r[s],u=h.getSimplifiedGeometry(t);o.push(u),u!==h&&(n=!0)}if(n){var c=new e(null);return c.setGeometriesArray(o),this.simplifiedGeometryCache[i]=c,c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return fi.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,o=e.length;i<o;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,o=0,r=i.length;o<r;++o)i[o].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var o=i;o||(o=ti(this.getExtent()));for(var r=this.geometries_,n=0,s=r.length;n<s;++n)r[n].scale(t,e,o);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(zu(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,o=e.length;i<o;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,o=0,r=i.length;o<r;++o)i[o].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(_o);function Uu(t,e,i,o,r,n){var s=NaN,a=NaN,h=(i-e)/o;if(1===h)s=t[e],a=t[e+1];else if(2==h)s=(1-r)*t[e]+r*t[e+o],a=(1-r)*t[e+1]+r*t[e+o+1];else if(0!==h){for(var l=t[e],u=t[e+1],c=0,p=[0],d=e+o;d<i;d+=o){var f=t[d],g=t[d+1];c+=Math.sqrt((f-l)*(f-l)+(g-u)*(g-u)),p.push(c),l=f,u=g}var _=r*c,y=At(p,_);if(y<0){var v=(_-p[-y-2])/(p[-y-1]-p[-y-2]),m=e+(-y-2)*o;s=ce(t[m],t[m+o],v),a=ce(t[m+1],t[m+o+1],v)}else s=t[e+y*o],a=t[e+y*o+1]}return n?(n[0]=s,n[1]=a,n):[s,a]}function Zu(t,e,i,o,r,n){if(i==e)return null;var s;if(r<t[e+o-1])return n?((s=t.slice(e,e+o))[o-1]=r,s):null;if(t[i-1]<r)return n?((s=t.slice(i-o,i))[o-1]=r,s):null;if(r==t[e+o-1])return t.slice(e,e+o);for(var a=e/o,h=i/o;a<h;){var l=a+h>>1;r<t[(l+1)*o-1]?h=l:a=l+1}var u=t[a*o-1];if(r==u)return t.slice((a-1)*o,(a-1)*o+o);var c=(r-u)/(t[(a+1)*o-1]-u);s=[];for(var p=0;p<o-1;++p)s.push(ce(t[(a-1)*o+p],t[a*o+p],c));return s.push(r),s}function Vu(t,e,i,o,r,n,s){if(s)return Zu(t,e,i[i.length-1],o,r,n);var a;if(r<t[o-1])return n?((a=t.slice(0,o))[o-1]=r,a):null;if(t[t.length-1]<r)return n?((a=t.slice(t.length-o))[o-1]=r,a):null;for(var h=0,l=i.length;h<l;++h){var u=i[h];if(e!=u){if(r<t[e+o-1])return null;if(r<=t[u-1])return Zu(t,e,u,o,r,!1);e=u}}return null}var Bu=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?kt(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){return o<Ne(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))},e.prototype.forEachSegment=function(t){return Qo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=gi.XYM&&this.layout!=gi.XYZM)return null;var i=void 0!==e&&e;return Zu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Fo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return ua(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Go(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,gi.XY)},e.prototype.getType=function(){return fi.LINE_STRING},e.prototype.intersectsExtent=function(t){return $o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(mo),Hu=Bu,Ku=function(t){function e(e,i,o){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&o)this.setFlatCoordinates(i,e),this.ends_=o;else{for(var r=this.getLayout(),n=e,s=[],a=[],h=0,l=n.length;h<l;++h){var u=n[h];0===h&&(r=u.getLayout()),kt(s,u.getFlatCoordinates()),a.push(s.length)}this.setFlatCoordinates(r,s),this.ends_=a}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?kt(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,o){return o<Ne(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(So(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Io(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,o))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=gi.XYM&&this.layout!=gi.XYZM||0===this.flatCoordinates.length)return null;var o=void 0!==e&&e,r=void 0!==i&&i;return Vu(this.flatCoordinates,0,this.ends_,this.stride,t,o,r)},e.prototype.getCoordinates=function(){return No(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Hu(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,o=[],r=0,n=0,s=e.length;n<s;++n){var a=e[n],h=new Hu(t.slice(r,a),i);o.push(h),r=a}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,o=this.ends_,r=this.stride,n=0,s=o.length;n<s;++n){var a=o[n];kt(t,Uu(e,i,a,r,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],o=[];return i.length=ko(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,o),new e(i,gi.XY,o)},e.prototype.getType=function(){return fi.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return tr(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=bo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(mo),qu=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?kt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){if(o<Ne(this.getExtent(),t,e))return o;for(var r=this.flatCoordinates,n=this.stride,s=0,a=r.length;s<a;s+=n){var h=ae(t,e,r[s],r[s+1]);if(h<o){o=h;for(var l=0;l<n;++l)i[l]=r[s+l];i.length=n}}return o},e.prototype.getCoordinates=function(){return Fo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Zo(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,o=[],r=0,n=t.length;r<n;r+=i){var s=new Zo(t.slice(r,r+i),e);o.push(s)}return o},e.prototype.getType=function(){return fi.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,o=0,r=e.length;o<r;o+=i){if(ke(t,e[o],e[o+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(mo);function Ju(t,e,i,o){for(var r=[],n=[1/0,1/0,-1/0,-1/0],s=0,a=i.length;s<a;++s){var h=i[s];n=We(t,e,h[0],o),r.push((n[0]+n[2])/2,(n[1]+n[3])/2),e=h[h.length-1]}return r}var Qu=function(t){function e(e,i,o){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!o&&!Array.isArray(e[0])){for(var r=this.getLayout(),n=e,s=[],a=[],h=0,l=n.length;h<l;++h){var u=n[h];0===h&&(r=u.getLayout());for(var c=s.length,p=u.getEnds(),d=0,f=p.length;d<f;++d)p[d]+=c;kt(s,u.getFlatCoordinates()),a.push(p)}i=r,e=s,o=a}void 0!==i&&o?(this.setFlatCoordinates(i,e),this.endss_=o):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;kt(this.flatCoordinates,t.getFlatCoordinates());for(var o=0,r=(e=t.getEnds().slice()).length;o<r;++o)e[o]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),o=0;o<t;++o)i[o]=this.endss_[o].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,o){return o<Ne(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wo(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Oo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,o))},e.prototype.containsXY=function(t,e){return Ko(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Co(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?hr(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Do(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Ju(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Jo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new qu(this.getFlatInteriorPoints().slice(),gi.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;sr(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=hr(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],o=[];return i.length=zo(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,o),new e(i,gi.XY,o)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var o=this.endss_[t].slice(),r=o[o.length-1];if(0!==e)for(var n=0,s=o.length;n<s;++n)o[n]-=e;return new ur(this.flatCoordinates.slice(e,r),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,o=[],r=0,n=0,s=i.length;n<s;++n){var a=i[n].slice(),h=a[a.length-1];if(0!==r)for(var l=0,u=a.length;l<u;++l)a[l]-=r;var c=new ur(e.slice(r,h),t,a);o.push(c),r=h}return o},e.prototype.getType=function(){return fi.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return ir(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Ao(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=0===o.length?0:o[o.length-1]}this.changed()},e}(mo);function $u(t,e){if(!t)return null;var i;switch(t.type){case fi.POINT:i=function(t){return new Zo(t.coordinates)}(t);break;case fi.LINE_STRING:i=function(t){return new Hu(t.coordinates)}(t);break;case fi.POLYGON:i=function(t){return new ur(t.coordinates)}(t);break;case fi.MULTI_POINT:i=function(t){return new qu(t.coordinates)}(t);break;case fi.MULTI_LINE_STRING:i=function(t){return new Ku(t.coordinates)}(t);break;case fi.MULTI_POLYGON:i=function(t){return new Qu(t.coordinates)}(t);break;case fi.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map((function(t){return $u(t,e)}));return new Wu(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return ju(i,!1,e)}function tc(t,e){var i,o=(t=ju(t,!0,e)).getType();switch(o){case fi.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case fi.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case fi.POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case fi.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case fi.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case fi.MULTI_POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case fi.GEOMETRY_COLLECTION:i=function(t,e){var i=t.getGeometriesArray().map((function(t){var i=h({},e);return delete i.featureProjection,tc(t,i)}));return{type:"GeometryCollection",geometries:i}}(t,e);break;case fi.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return i}var ec,ic=function(t){function e(e){var i=e||{};t.call(this),this.dataProjection=Ki(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=Ki(i.featureProjection)),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i=null,o=$u((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new Gu;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.setGeometryName(i.geometry_name),r.setGeometry(o),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties),r},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var o=t.features,r=0,n=o.length;r<n;++r)i.push(this.readFeatureFromObject(o[r],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return $u(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Ki(i.properties.name):$t(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},o=t.getId();void 0!==o&&(i.id=o);var r=t.getGeometry();r&&(i.geometry=tc(r,e));var n=t.getProperties();return delete n[t.getGeometryName()],c(n)||(i.properties=n),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],o=0,r=t.length;o<r;++o)i.push(this.writeFeatureObject(t[o],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return tc(t,this.adaptOptions(e))},e}(Xu);ec=JSON.parse('{"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"EPSG:4326"}},"features":[{"type":"Feature","geometry":{"type":"Point","coordinates":[2.78043,50.586582]},"properties":{"author":"Corpo expedicionario portugus, RI, secao fotografica","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2540/sap40_62t0159016_v.jpg","date":"1917","region":"Nord-Pas-de-Calais","commune":"Neuve-Chapelle","ref":"AP62T0159016","text":"Croix de chemin et ruines"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[2.317342,48.87738]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2486/sap40_z0008497_v.jpg","date":"1920.11.11","region":"Ile-de-France","commune":"Paris 08","ref":"APZ0008497","text":"Tombeau du soldat inconnu, le marchal Pilsudski"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.748603,50.302143]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2486/sap40_z0008411_v.jpg","date":"1917","region":"Nord-Pas-de-Calais","commune":"Saint-Waast","ref":"APZ0008411","text":"Fouilles, dcouverte d\'un second mur"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[2.599444,49.1125]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0007818_v.jpg","date":"1918","region":"Picardie","commune":"Pronne","ref":"APZ0007818","text":"Mission amricaine devant le chteau"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.968458,49.064655]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0007782_v.jpg","date":"1919.02","region":"Champagne-Ardenne","commune":"Dizy","ref":"APZ0007782","text":"Canal de la Marne au Rhin. Sur le pont des canonnires"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[2.295775,49.894078]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0007649a_v.jpg","date":"1919.01.21","region":"Picardie","commune":"Amiens","ref":"APZ0007649A","text":"David Lloyd George et sa suite visitent la cathdrale"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[0.684842,47.394146]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006907_v.jpg","date":"1918","region":"Centre","commune":"Tours","ref":"APZ0006907","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[5.369789,43.296481]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006897a_v.jpg","date":"1918","region":"Provence-Alpes-Cte d\'Azur","commune":"Marseille","ref":"APZ0006897A","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[0.166201,44.499189]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006804_v.jpg","date":"1918","region":"Aquitaine","commune":"Marmande","ref":"APZ0006804","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[1.043367,49.467905]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006798_v.jpg","date":"1918","region":"Haute-Normandie","commune":"Le Grand-Quevilly","ref":"APZ0006798","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[2.434722,48.818333]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006787_v.jpg","date":"1918","region":"Ile-de-France","commune":"Saint-Maurice","ref":"APZ0006787","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.243669,45.966722]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006767_v.jpg","date":"1918","region":"Poitou-Charentes","commune":"Saint-Georges-d\'Olron","ref":"APZ0006767","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.675702,48.113493]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006583_v.jpg","date":"1918","region":"Bretagne","commune":"Rennes","ref":"APZ0006583","text":"Le lyce de jeunes filles, faade sur jardin"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-4.097886,47.997577]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006574_v.jpg","date":"1918","region":"Bretagne","commune":"Quimper","ref":"APZ0006574","text":"Intrieur, le dortoir"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.926488,43.660157]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006573_v.jpg","date":"1918","region":"Provence-Alpes-Cte d\'Azur","commune":"Grasse","ref":"APZ0006573","text":"Intrieur, colonnes et escalier"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[4.360059,43.836696]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006568_v.jpg","date":"1918","region":"Languedoc-Roussillon","commune":"Nmes","ref":"APZ0006568","text":"Cour d\'honneur du lyce national"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.540001,47.668559]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006235_v.jpg","date":"1918","region":"Picardie","commune":"Roye","ref":"APZ0006235","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.253189,49.59845]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0006233_v.jpg","date":"1918","region":"Picardie","commune":"Sinceny","ref":"APZ0006233","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.894463,48.497639]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0004822_v.jpg","date":"1917","region":"Lorraine","commune":"Badonviller","ref":"APZ0004822","text":"Sur le front, soldats transportant un bless"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[5.1416,49.207928]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0004795_v.jpg","date":"1917.09.10","region":"Lorraine","commune":"Avocourt","ref":"APZ0004795","text":"Voiture ambulance amricaine dtruite au cours d\'un bombardement le 10 septembre 1917"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.348624,46.72447]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0003345_v.jpg","date":"1917.06.19","region":"Pays de la Loire","commune":"L\'le-d\'Yeu","ref":"APZ0003345","text":"Les officiels en visite"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[1.662501,50.885786]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2485/sap40_z0002920_v.jpg","date":"1917","region":"Nord-Pas-de-Calais","commune":"Wissant","ref":"APZ0002920","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[0.930141,48.741075]},"properties":{"author":"Oprateur Z","copy":"Ministre de la culture (France), Mdiathque de l\'architecture et du patrimoine, Diffusion RMN-GP","img":"http://www.culture.gouv.fr/Wave/image/memoire/2484/sap40_z0002136_v.jpg","date":"1916","region":"Basse-Normandie","commune":"Cherbourg","ref":"APZ0002136","text":"Mise en tat des torpilles avant l\'embarquement. La partie arrire d\'une torpille automobile : rglage des hlices"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.176906,49.119637]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0007324_v.jpg","date":"1918","region":"Lorraine","commune":"Metz","ref":"APZ0007324","text":"Entre du marchal Foch dans la ville de Metz. La foule devant le parvis"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[2.711061,46.50969]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0007226_v.jpg","date":"1918","region":"Picardie","commune":"Saint-Gobin","ref":"APZ0007226","text":"Bois de Saint-Gobin. Entre d\'un abri prs d\'une voie ferre"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.215802,43.344224]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0004297_v.jpg","date":"1917.06","region":"Languedoc-Roussillon","commune":"Bziers","ref":"APZ0004297","text":"Exposition de la Section photographique de l\'Arme (SPCA), faade du thtre"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.580003,45.159038]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0003360_v.jpg","date":"1917","region":"Auvergne","commune":"Chavaniac-Lafayette","ref":"APZ0003360","text":"Sabre du gnral de la Fayette"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.658088,46.183427]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0002707_v.jpg","date":"1916","region":"Champagne-Ardenne","commune":"Le Breuil","ref":"APZ0002707","text":"Territoriaux travaillant  la construction d\'une voie ferre"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.170236,44.661371]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0002445_v.jpg","date":"1916.08.23","region":"Aquitaine","commune":"Arcachon","ref":"APZ0002445","text":"Exposition circulaire de la Section photographique de l\'Arme : affiche devant la faade de la Socit de la voile et de l\'automobile"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[0.149096,43.065071]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2459/sap40_z0002443_v.jpg","date":"1916.08.23","region":"Midi-Pyrnes","commune":"Bagnres-de-Bigorre","ref":"APZ0002443","text":"Exposition circulaire de la Section photographique de l\'Arme : groupe dans une salle"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[5.94319,44.194712]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0002020_v.jpg","date":"1916","region":"Provence-Alpes-Cte d\'Azur","commune":"Sisteron","ref":"APZ0002020","text":"Camp d\'officiers allemand prisonniers, la corve de bois"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.7735,43.42332]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0001850_v.jpg","date":"1916.03","region":"Provence-Alpes-Cte d\'Azur","commune":"Saint-Raphal","ref":"APZ0001850","text":"Valescure. Camp de Sngalais. Vue panoramique du camp"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[5.052737,45.044231]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0001275a_v.jpg","date":"1916.12","region":"Rhne-Alpes","commune":"Romans-sur-Isre","ref":"APZ0001275A","text":"Dpt de prisonniers. La soupe"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.643174,44.899412]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0001264_v.jpg","date":"1916.01","region":"Provence-Alpes-Cte d\'Azur","commune":"Brianon","ref":"APZ0001264","text":"Dpt d\'officiers allemands. Salle de lecture"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[5.989414,45.463931]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0001220_v.jpg","date":"1916.01","region":"Rhne-Alpes","commune":"Chapareillan","ref":"APZ0001220","text":"Chantier de prisonniers allemands. Vue d\'ensemble des ateliers en construction"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.740449,43.640044]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0001021_v.jpg","date":"1915.11.07","region":"Aquitaine","commune":"Gaujacq","ref":"APZ0001021","text":"Camp de prisonniers. Corve de bois pour les cuisines"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.156419,47.347051]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0000937_v.jpg","date":"1915.10.31","region":"Bretagne","commune":"Le Palais","ref":"APZ0000937","text":"Hpital complmentaire n56, pour les prisonniers allemands. Le pansement"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.553639,47.218383]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2458/sap40_z0000886_v.jpg","date":"1915.10.27","region":"Pays de la Loire","commune":"Nantes","ref":"APZ0000886","text":"Camp de prisonniers de Roche-Maurice. Rassemblement pour l\'appel"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[6.307916,46.923474]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2457/sap40_z0000282_v.jpg","date":"1915","region":"Picardie","commune":"Mortefontaine","ref":"APZ0000282","text":"Ensemble des travaux vers l\'est du plateau de Mortefontaine. A gauche se trouve l\'observatoire d\'artillerie de Pouy"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.376062,49.295246]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2445/sap40_z0004547_v.jpg","date":"1917","region":"Basse-Normandie","commune":"Douvres-la-Dlivrande","ref":"APZ0004547","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[1.44421,43.604637]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2445/sap40_z0004468_v.jpg","date":"1917","region":"Midi-Pyrnes","commune":"Toulouse","ref":"APZ0004468","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[4.074749,48.29658]},"properties":{"author":"Oprateur Z","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/2443/sap40_z0003189_v.jpg","date":"","region":"Champagne-Ardenne","commune":"Troyes","ref":"APZ0003189","text":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[1.686773,46.81143]},"properties":{"author":"Oprateur D ; Brissy, Edouard","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/1603/sap40_d0001214_v.jpg","date":"1915.12.07","region":"Centre","commune":"Chteauroux","ref":"APD0001214","text":"Visite mdicale"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.65042,48.594418]},"properties":{"author":"Oprateur D ; Slince","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/1601/sap40_d0006185_v.jpg","date":"1919.05.19","region":"Basse-Normandie","commune":"Domfront","ref":"APD0006185","text":"Vue gnrale"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.530367,49.217813]},"properties":{"author":"Oprateur D ; Slince","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/1601/sap40_d0006177_v.jpg","date":"1919.05.15","region":"Basse-Normandie","commune":"Lessay","ref":"APD0006177","text":"Vue d\'ensemble"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.162942,48.697279]},"properties":{"author":"Oprateur D ; Slince","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/1601/sap40_d0006160_v.jpg","date":"1919.05.12","region":"Bretagne","commune":"Pontrieux","ref":"APD0006160","text":"Cuisine des sous-officiers"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[0.199565,48.006118]},"properties":{"author":"Oprateur D ; Slince","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/1601/sap40_d0006145_v.jpg","date":"1919.05.07","region":"Pays de la Loire","commune":"Le Mans","ref":"APD0006145","text":"Groupe d\'officiers devant l\'alle centrale"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.563167,47.478427]},"properties":{"author":"Oprateur D ; Brissy, Edouard","copy":"Ministre de la Culture (France) - Mdiathque de l\'Architecture et du Patrimoine - Diffusion RMN","img":"http://www.culture.gouv.fr/Wave/image/memoire/1597/sap40_d0001299_v.jpg","date":"1916.01.08","region":"Pays de la Loire","commune":"Angers","ref":"APD0001299","text":"Centre d\'internement pour les civils : bureau de l\'administration du dpt"}}]}');var oc=new Pu({url:t(ec),projection:"EPSG:3857",format:new ic,attributions:["&copy; <a href='https://www.data.gouv.fr/fr/datasets/fonds-de-la-guerre-14-18-extrait-de-la-base-memoire/'>data.gouv.fr</a>"],logo:"https://www.data.gouv.fr/s/avatars/37/e56718abd4465985ddde68b33be1ef.jpg"}),rc=new Yl({name:"1914-18",preview:"http://www.culture.gouv.fr/Wave/image/memoire/2445/sap40_z0004141_v.jpg",source:oc});mh.addLayer(rc);const nc=new Nu;nc.on("select",(t=>{const e=t.selected[0];if(e){var i="";i+="<img src='"+e.get("img")+"'/>",i+=e.get("text"),gh.show(e.getGeometry().getFirstCoordinate(),i)}else gh.hide()})),mh.addInteraction(nc);var sc={type:"Feature",properties:{ID_GEOFLA:"DEPARTEM0000000000000015",CODE_DEPT:"62",NOM_DEPT:"PAS-DE-CALAIS",CODE_CHF:"041",NOM_CHF:"ARRAS",X_CHF_LIEU:684305,Y_CHF_LIEU:7021265,X_CENTROID:648085,Y_CENTROID:7046488,CODE_REG:"32",NOM_REG:"NORD-PAS-DE-CALAIS-PICARDIE"},geometry:{type:"Polygon",coordinates:[[[175237,6528276],[175316,6529063],[175381,6529972],[175398,6530276],[175424,6530858],[175468,6531141],[175524,6531842],[175551,6532235],[175580,6533141],[175589,6533847],[175584,6534422],[175587,6535674],[175598,6536216],[175663,6536705],[175730,6537100],[175796,6537454],[175966,6538494],[176026,6538787],[176217,6539379],[176348,6539656],[176487,6539861],[176720,6540108],[176836,6540212],[176930,6540252],[176985,6540229],[177303,6539918],[177416,6539517],[177362,6539508],[177253,6539350],[177246,6539287],[177271,6539177],[177510,6538730],[177711,6538355],[177968,6538053],[178305,6538478],[178344,6538518],[178385,6538511],[179056,6538034],[179396,6537796],[180474,6536736],[181060,6536160],[181582,6535649],[181797,6535443],[181978,6535334],[181994,6535303],[182041,6535288],[182104,6535249],[182199,6535124],[182262,6535015],[182373,6534928],[182476,6534882],[182633,6534860],[182704,6534860],[184511,6534523],[184645,6534446],[185102,6534455],[185053,6534473],[184326,6534880],[183681,6535200],[183508,6535277],[183375,6535300],[183201,6535290],[183053,6535218],[182904,6535193],[182826,6535193],[182606,6535293],[182368,6535440],[182093,6535618],[181982,6535727],[181438,6536376],[181090,6537065],[180815,6537975],[180491,6539003],[180410,6539222],[180259,6539497],[180116,6539606],[179707,6539732],[179144,6540249],[179144,6540265],[179049,6540344],[178618,6541064],[178122,6541987],[177526,6542647],[176639,6543532],[176401,6543813],[176161,6544103],[176026,6544314],[175945,6544526],[175646,6545350],[175573,6545626],[175507,6545971],[175505,6546183],[175521,6546948],[175627,6547312],[175752,6547392],[175751,6547447],[175656,6547556],[175632,6547627],[175628,6548084],[175654,6550243],[175640,6550724],[175645,6551028],[175656,6551520],[175690,6551970],[175698,6552002],[175641,6552198],[175613,6552491],[175627,6552679],[175647,6553120],[175652,6553334],[175637,6554083],[175566,6555350],[175504,6556361],[175702,6557742],[175734,6557727],[175733,6557862],[175709,6557909],[175199,6560057],[174970,6561682],[174936,6561981],[174943,6562036],[175013,6562092],[175005,6562108],[174806,6562816],[174582,6563777],[174464,6564258],[174056,6565635],[173983,6565840],[173933,6566194],[173934,6566826],[173948,6567040],[173924,6567080],[173890,6567174],[173756,6567970],[173730,6568269],[173737,6568340],[174312,6569144],[174776,6569979],[175127,6571088],[175173,6571240],[175133,6571294],[174758,6571693],[174218,6572257],[174041,6572468],[173969,6572578],[173937,6572688],[173935,6572790],[173959,6572791],[174476,6572865],[174903,6572975],[175010,6573236],[175074,6573292],[175184,6573334],[175286,6573327],[175302,6573286],[174907,6571860],[174955,6571774],[175289,6571406],[175399,6571423],[175446,6571447],[175478,6571542],[175476,6571597],[175342,6571636],[175278,6571682],[175254,6571737],[175245,6571847],[175245,6571928],[175328,6572213],[175405,6572403],[175572,6572674],[175810,6572984],[175841,6573047],[175833,6573110],[175793,6573157],[175680,6573219],[175680,6573252],[176344,6573875],[176399,6573892],[176541,6573909],[176588,6573901],[177056,6573636],[177072,6573597],[177089,6573431],[177051,6573344],[176973,6573249],[176528,6572928],[176393,6572871],[176354,6572847],[176283,6572862],[176185,6572814],[176111,6572742],[176073,6572631],[176082,6572537],[176113,6572537],[176499,6572707],[176640,6572755],[176671,6572779],[177564,6573341],[177619,6573326],[177761,6573233],[178003,6572760],[178076,6572603],[178257,6572565],[178176,6572811],[178032,6573085],[177894,6573305],[177705,6573429],[177373,6573623],[177301,6574026],[177448,6574692],[177548,6575728],[177622,6576180],[177666,6576521],[177662,6576971],[177614,6577057],[177598,6577065],[177518,6577167],[177455,6577229],[177399,6577341],[177406,6577372],[177571,6577366],[177751,6577510],[177907,6577645],[177993,6577741],[178180,6578146],[178295,6578447],[178600,6579448],[178668,6579780],[178734,6580287],[178744,6580952],[178741,6581268],[178740,6581395],[178612,6582241],[178580,6584560],[179296,6586655],[179296,6586670],[179137,6586756],[179026,6586802],[178482,6586758],[178427,6586765],[178269,6586811],[178205,6586850],[178132,6586920],[178076,6587022],[177735,6588081],[177489,6588925],[177448,6589115],[177432,6589130],[177015,6590466],[176883,6591247],[176866,6591358],[176854,6591541],[176822,6591675],[176460,6593216],[176254,6594046],[176164,6594314],[176047,6594567],[175656,6595391],[175695,6596187],[175955,6597862],[176374,6598310],[176857,6598625],[177632,6598521],[178296,6598536],[179321,6598784],[179511,6598825],[179551,6598802],[179764,6598852],[179968,6598964],[180182,6599029],[180536,6599135],[182097,6599562],[182144,6599571],[182144,6599587],[183293,6600312],[184635,6601379],[184969,6601651],[185247,6601883],[185608,6602259],[185671,6602339],[186484,6603405],[187308,6604623],[187811,6605419],[188237,6606095],[188412,6606338],[188428,6606338],[188436,6606362],[189715,6607706],[189849,6607802],[189896,6607826],[189911,6607873],[190051,6608113],[190263,6608392],[190530,6608737],[190608,6608816],[191904,6609883],[192455,6610315],[192968,6610645],[193345,6610886],[193488,6610968],[194395,6611451],[194804,6611644],[196276,6612356],[196556,6612524],[196918,6612701],[197250,6612862],[197656,6613051],[198228,6613314],[199162,6613584],[199905,6613771],[200657,6613895],[201352,6614044],[202190,6614263],[202673,6614393],[203282,6614597],[203542,6614646],[203977,6614768],[204964,6615220],[205304,6615297],[205638,6615176],[206069,6615222],[206436,6615460],[207748,6615921],[207748,6615961],[207675,6616167],[207533,6616166],[207287,6616085],[206449,6615785],[206402,6615777],[206242,6616142],[206242,6616158],[208297,6616861],[209184,6616835],[209498,6616663],[209797,6616450],[209805,6616426],[210010,6616372],[210154,6616365],[210360,6616398],[210612,6616502],[211031,6616782],[211532,6617214],[212063,6617754],[212450,6618053],[212789,6618160],[212885,6618216],[212909,6618248],[213082,6618391],[213200,6618463],[213264,6618479],[213485,6618465],[214780,6618701],[215875,6619146],[216243,6619220],[216532,6619269],[216643,6619269],[216896,6619270],[217214,6619240],[217539,6619123],[217849,6619077],[218169,6619030],[218720,6619160],[219219,6619297],[219456,6619378],[219623,6619458],[219631,6619474],[219867,6619579],[220073,6619660],[221830,6620184],[222330,6620258],[223019,6620324],[223462,6620326],[225586,6620590],[227044,6620818],[227523,6621267],[227951,6621800],[230081,6622428],[230176,6622444],[230200,6622420],[230375,6622365],[230462,6622373],[230581,6622413],[230978,6622454],[231215,6622439],[231413,6622416],[231571,6622385],[232390,6621944],[233120,6621411],[233504,6621016],[233770,6620628],[234817,6619265],[234876,6619165],[234892,6619122],[234764,6618913],[234783,6618762],[234834,6618605],[234803,6618493],[234930,6618445],[235644,6618071],[235942,6617897],[236144,6617686],[236561,6616052],[236569,6616012],[236570,6615878],[236602,6615765],[236633,6615718],[236974,6615449],[237253,6615331],[237656,6615037],[237704,6614974],[237800,6614610],[237969,6613872],[237977,6613737],[237962,6613648],[237836,6613418],[237836,6613276],[237980,6612696],[238274,6612125],[238321,6612062],[238426,6612007],[238441,6611983],[238854,6611396],[239125,6611072],[239228,6610928],[239307,6610786],[239419,6610199],[239475,6609716],[239484,6609374],[239500,6609223],[239493,6609033],[239796,6608215],[240289,6607383],[240828,6606607],[240869,6606560],[240933,6606394],[240981,6606171],[241068,6605680],[241180,6605299],[241363,6604601],[241627,6603825],[242012,6602957],[242603,6601788],[242848,6601287],[243112,6600704],[243637,6599197],[243653,6599150],[243676,6599110],[243795,6598826],[243827,6598573],[243851,6598374],[243852,6598176],[244551,6596069],[244818,6595598],[245114,6594952],[245231,6594434],[245172,6593637],[245197,6593558],[245213,6593550],[245466,6593274],[245663,6592974],[245807,6592703],[245803,6592662],[245744,6592385],[245992,6590392],[246159,6589482],[246167,6589433],[246207,6589393],[246238,6589299],[246349,6588844],[246377,6588532],[246344,6588299],[246327,6588081],[246398,6587850],[246447,6587874],[246822,6588019],[247082,6587931],[247284,6587851],[247441,6587701],[247725,6587473],[247877,6587370],[247940,6587315],[248153,6587203],[249252,6585939],[249663,6585378],[249678,6585370],[250130,6584769],[250746,6583899],[250817,6583883],[251006,6583884],[251211,6583797],[252049,6583441],[252530,6583118],[253800,6583585],[253934,6583616],[254068,6583634],[254613,6583697],[254692,6583705],[254732,6582455],[254764,6581948],[254860,6581987],[256288,6582863],[257399,6583738],[257438,6583738],[257454,6583620],[257629,6582947],[258552,6582827],[260043,6582717],[261447,6582362],[262812,6581705],[263308,6581589],[263381,6581969],[263167,6582472],[263862,6583136],[264454,6583183],[264493,6583183],[265258,6582558],[265211,6582487],[265116,6582193],[265669,6582035],[265724,6582011],[266316,6581798],[266986,6581576],[267104,6581552],[267649,6580998],[267672,6580966],[267966,6580557],[268334,6580167],[268445,6580135],[268033,6579375],[268009,6579367],[267640,6579534],[266562,6578934],[265918,6578463],[264463,6577658],[263340,6577433],[263118,6577465],[263126,6577441],[262725,6576935],[262447,6576698],[261285,6575794],[260587,6575591],[260500,6575271],[260453,6574963],[260413,6574556],[260509,6573837],[260452,6573790],[260682,6573386],[260981,6573323],[261713,6572782],[261959,6571663],[262229,6571233],[262391,6571157],[262813,6570616],[263235,6570101],[263383,6569989],[263401,6569978],[263984,6569646],[264196,6569498],[264251,6569458],[265337,6568502],[265052,6567917],[264706,6567380],[263682,6566308],[263295,6565881],[263106,6565699],[263208,6565518],[264030,6564582],[264105,6564485],[264118,6564460],[263980,6564372],[263964,6564333],[264216,6563599],[264287,6563512],[264381,6563449],[264586,6563362],[264798,6563323],[264949,6563323],[265066,6563362],[265286,6563448],[265318,6563488],[265341,6563590],[265681,6563952],[266390,6564560],[266783,6564892],[266980,6564995],[267327,6565128],[267492,6565183],[267524,6565175],[267629,6564673],[267845,6564045],[268035,6563612],[268222,6563310],[268465,6562953],[268755,6563151],[268782,6563027],[268939,6562458],[268962,6562395],[269064,6562410],[269182,6562402],[269545,6562370],[269576,6562362],[270062,6561439],[270393,6560846],[270605,6560783],[271062,6560657],[271140,6560656],[271345,6560703],[271708,6560687],[272053,6560592],[272431,6560466],[272777,6560290],[272824,6560220],[272847,6560172],[272910,6560070],[273178,6559729],[274710,6558513],[274953,6558148],[275313,6557613],[275382,6557581],[276304,6557014],[276654,6556742],[277055,6556460],[277272,6556413],[277848,6556322],[278065,6556368],[278371,6556485],[278789,6556663],[279006,6556804],[279019,6556866],[279055,6556877],[279914,6557090],[280289,6557192],[280498,6557408],[280647,6557640],[280768,6557995],[281055,6558219],[281341,6558340],[281610,6558395],[282042,6558401],[282286,6558054],[282426,6557486],[282363,6557297],[282329,6556555],[282391,6556239],[282423,6556184],[283274,6555587],[283560,6555513],[283694,6555480],[283944,6555425],[284245,6555382],[284441,6555366],[284504,6555437],[285409,6555151],[285456,6555127],[285495,6555143],[285786,6555409],[285810,6555457],[285826,6555575],[285779,6555685],[285709,6555781],[285568,6555907],[285388,6556089],[285333,6556184],[285326,6556223],[285601,6556562],[285672,6556633],[285822,6556719],[285869,6556711],[286239,6556592],[286615,6556463],[286772,6556250],[286820,6556195],[286883,6556195],[287119,6556446],[287277,6556620],[287538,6556963],[287759,6557311],[287759,6557319],[287783,6557351],[287941,6557525],[288129,6557485],[288292,6557425],[288351,6557304],[288487,6556886],[288598,6556465],[288606,6556446],[288794,6556370],[288927,6556322],[289592,6556277],[289825,6556343],[289904,6556405],[290149,6556781],[290217,6556859],[290638,6557032],[290787,6557033],[291056,6556952],[291105,6556887],[291139,6556771],[291170,6556614],[291162,6556511],[291099,6556283],[291259,6555764],[291513,6555295],[292203,6554840],[292797,6554029],[292828,6553990],[292946,6554060],[293388,6554358],[293830,6554596],[294247,6554795],[295034,6554998],[295176,6555008],[295301,6554996],[296764,6555141],[297371,6555209],[297713,6555901],[298293,6557136],[298555,6557210],[298685,6556902],[298833,6556581],[300025,6555890],[300072,6555866],[300197,6555834],[301008,6555861],[301300,6555962],[301568,6556095],[301686,6556173],[302104,6556330],[302599,6556019],[302755,6555916],[303037,6555679],[303138,6555488],[303144,6555251],[303136,6555204],[303057,6555079],[302958,6554942],[302821,6554875],[302909,6554456],[303060,6554021],[303417,6553317],[303464,6553270],[303543,6553270],[303801,6553157],[304903,6552474],[305416,6551974],[305674,6551651],[305713,6551666],[306242,6552002],[306297,6552049],[306274,6552127],[306173,6552365],[306157,6552416],[305939,6553133],[306005,6553170],[306256,6553295],[306492,6553404],[306699,6553513],[306770,6553615],[306873,6553813],[306953,6554040],[306868,6554293],[306696,6554578],[306565,6554853],[306526,6554982],[306469,6555207],[306412,6555683],[306412,6555731],[306874,6556085],[307156,6556547],[307158,6556879],[307182,6557005],[307221,6556997],[307409,6556949],[307936,6556802],[308406,6556603],[309156,6556311],[309873,6555924],[310561,6556410],[310784,6556708],[310854,6556747],[310720,6556873],[310275,6557279],[309766,6557730],[308013,6559375],[307911,6559454],[307762,6559518],[307267,6559702],[307149,6559734],[307189,6559861],[307213,6559963],[307270,6560325],[307311,6560610],[307368,6560736],[307607,6561207],[308249,6562016],[308336,6562095],[308564,6562237],[308707,6562291],[308849,6562298],[309950,6562308],[310195,6562242],[310555,6562106],[310712,6562018],[310896,6561851],[310943,6561794],[311071,6561771],[311183,6561797],[311585,6561919],[311807,6562020],[312036,6562184],[312257,6562427],[312544,6562765],[312718,6563016],[312741,6563008],[313015,6562817],[313454,6562293],[313664,6561993],[314048,6561603],[314064,6561595],[314188,6561737],[314389,6561685],[315148,6561486],[315344,6561381],[315729,6561150],[315932,6560991],[316198,6560767],[316659,6560189],[316760,6560014],[316791,6559951],[317056,6559579],[317141,6559468],[317385,6559189],[317728,6558817],[318460,6557778],[318927,6557080],[319379,6556399],[319457,6556296],[318848,6555900],[318594,6555666],[318550,6555743],[318450,6555906],[318075,6555548],[317933,6555470],[317863,6555463],[317202,6555558],[316794,6555707],[316529,6556008],[316505,6556016],[316418,6555938],[315918,6555318],[315204,6554384],[315188,6554353],[314876,6554139],[314698,6553900],[314524,6553718],[313701,6552911],[313400,6552645],[313258,6552528],[312269,6551415],[311988,6550629],[311869,6550337],[311805,6550200],[311399,6549386],[310827,6548444],[310811,6548437],[310827,6548389],[310692,6548170],[310518,6547926],[310479,6547871],[310518,6547855],[312603,6547188],[312610,6547133],[312641,6546960],[312818,6546234],[312998,6545736],[313279,6545309],[313437,6544883],[313442,6544410],[313204,6543920],[313222,6543034],[313510,6542598],[313311,6542064],[313191,6541962],[313159,6541955],[313160,6541970],[313058,6542089],[312840,6542178],[312472,6542251],[312251,6542292],[312016,6542324],[311922,6542333],[311773,6542294],[311543,6542202],[311174,6542023],[311079,6541937],[311737,6540523],[311911,6539419],[311911,6539341],[311734,6539171],[311598,6538544],[311595,6538388],[311627,6538323],[311716,6538154],[311856,6538130],[312006,6538208],[312037,6538207],[312107,6538072],[312114,6538032],[312460,6538007],[313013,6538346],[313069,6538392],[313341,6538237],[313552,6538142],[313905,6537990],[314514,6537782],[314586,6537766],[315135,6537857],[317501,6538329],[317540,6538344],[318311,6538488],[318602,6538533],[318665,6538580],[320460,6539394],[320753,6539526],[320879,6539619],[320934,6539643],[321248,6539837],[321376,6539914],[321371,6539404],[321386,6539292],[321384,6539096],[321384,6539072],[321369,6538274],[321232,6537436],[320687,6535913],[320836,6534756],[320831,6534678],[321291,6534698],[321643,6534703],[321882,6534190],[321874,6534096],[322272,6533763],[322710,6533594],[323014,6533680],[323348,6533919],[323364,6533926],[323465,6533808],[323807,6533499],[323956,6533293],[323987,6533300],[324718,6533883],[325605,6534571],[325762,6534672],[325817,6534687],[325840,6534679],[325974,6534678],[326328,6534703],[327088,6534852],[327753,6535150],[328367,6535461],[328398,6535476],[328468,6535405],[328483,6535373],[328592,6535263],[328920,6535119],[329124,6535029],[329328,6534996],[329587,6535169],[330007,6535550],[330031,6535558],[330490,6535254],[331257,6534477],[332094,6533691],[332575,6533299],[333044,6532920],[333270,6532761],[333317,6532737],[333426,6532713],[333718,6532726],[333992,6532755],[334015,6532747],[334414,6532487],[334763,6532174],[334888,6532055],[334988,6531895],[335104,6531675],[335166,6531619],[335181,6531588],[335714,6530952],[335948,6530802],[336269,6530695],[336593,6530654],[336679,6530645],[336914,6530533],[337011,6530465],[337193,6530316],[337371,6529979],[337394,6529869],[337354,6529775],[337093,6529651],[337022,6529628],[336746,6530245],[336731,6530292],[336441,6530208],[336274,6530131],[336248,6529902],[336213,6529377],[336187,6529077],[336075,6528796],[335964,6528694],[335900,6528570],[335891,6528373],[335785,6528107],[335763,6527844],[335789,6527783],[335783,6527774],[335009,6526250],[334732,6525915],[334708,6525853],[334878,6525599],[335025,6525448],[335375,6525171],[335880,6524620],[335781,6523908],[335774,6523376],[335778,6523194],[336136,6523292],[336391,6523344],[336994,6523450],[337650,6523422],[338152,6523114],[338511,6523515],[338590,6523616],[338614,6523679],[338848,6524400],[338895,6524478],[339126,6524695],[339853,6525333],[340010,6525465],[340475,6525649],[340506,6525657],[340608,6525672],[340804,6525717],[341040,6525825],[341191,6525910],[341285,6525979],[341349,6526067],[341364,6526066],[341435,6526048],[341512,6525152],[341362,6524624],[341360,6524077],[341484,6523943],[341950,6523840],[342564,6523727],[342611,6523719],[343063,6523479],[342992,6523417],[342462,6522935],[342263,6522583],[342167,6522396],[341664,6520975],[341646,6520849],[341586,6520319],[341535,6520274],[341493,6520260],[341194,6520236],[340474,6520314],[339712,6520346],[339066,6520007],[338649,6519838],[338297,6519888],[338207,6519543],[338086,6519140],[337689,6518705],[337429,6518558],[337351,6518378],[337221,6517895],[337245,6517855],[337133,6517770],[337052,6517411],[336760,6517162],[336524,6517031],[335867,6516691],[335219,6516403],[334413,6516052],[333633,6515863],[333453,6515828],[333402,6515818],[333280,6515787],[333109,6515828],[333038,6516135],[332984,6516283],[332800,6516230],[331843,6516428],[331679,6516500],[331748,6516387],[331991,6516101],[332934,6514738],[333386,6513690],[333399,6513377],[333365,6512945],[333300,6512695],[333284,6512656],[333180,6512343],[333188,6512320],[333847,6511811],[334023,6511401],[334254,6510780],[334269,6510757],[334353,6510472],[334490,6510041],[334695,6509905],[334949,6509886],[335025,6509682],[335015,6509314],[334873,6509142],[334679,6509057],[334852,6508609],[334876,6508586],[335079,6508631],[335212,6508700],[335456,6508753],[335487,6508721],[335712,6508500],[335913,6508301],[336006,6508222],[337659,6506694],[337821,6506520],[338270,6506068],[338278,6506068],[338403,6506146],[339101,6506366],[339156,6506381],[339413,6506168],[339522,6506057],[339675,6505796],[339921,6505308],[340136,6504976],[340762,6504108],[340916,6503872],[340805,6503662],[340686,6503466],[340678,6503434],[340840,6503276],[340972,6503142],[341041,6503048],[342057,6501776],[342604,6501297],[342639,6501261],[342692,6501206],[343097,6500592],[343343,6500344],[343210,6500244],[342964,6499996],[342689,6499725],[342610,6499671],[342276,6499555],[342163,6499521],[341897,6499449],[341639,6499397],[341280,6499276],[340851,6499060],[340554,6498781],[340492,6498774],[340460,6498790],[340242,6498776],[340017,6498753],[339941,6498488],[340170,6498459],[339828,6498004],[339339,6497399],[339259,6497321],[339274,6497298],[339957,6496758],[340104,6496608],[340142,6496553],[340186,6495416],[340155,6495370],[340092,6495308],[339646,6495320],[338659,6495885],[338599,6496042],[338522,6496176],[338467,6496209],[338343,6496218],[337811,6496246],[337108,6496088],[335940,6495707],[335690,6495591],[335658,6495568],[335704,6495427],[335711,6495348],[335754,6493994],[335565,6493549],[335314,6492830],[335321,6492815],[335453,6492720],[335785,6492396],[336025,6492191],[336035,6492191],[336136,6492237],[336970,6492609],[337986,6493049],[338009,6493065],[338017,6493088],[338135,6493243],[338372,6493491],[338963,6494058],[339692,6494325],[339815,6494199],[339900,6494151],[339978,6494119],[340042,6494095],[340134,6493993],[340809,6493555],[340840,6493531],[340878,6493484],[341036,6493514],[342920,6493777],[343939,6493454],[344706,6493212],[345387,6493071],[345770,6493067],[345894,6492964],[345932,6492917],[345971,6492893],[347507,6492603],[347993,6492516],[348349,6492477],[348481,6492476],[348700,6492481],[348747,6492512],[348840,6492511],[349073,6492363],[349229,6492255],[349283,6492255],[349339,6492340],[349494,6492307],[350404,6491946],[350555,6491857],[350422,6491654],[350360,6491453],[350594,6490699],[350715,6489657],[350715,6489641],[350666,6489525],[350452,6489182],[350341,6489027],[350760,6488800],[352280,6488449],[353019,6488218],[353259,6488137],[353411,6488191],[353497,6488192],[353534,6487995],[353548,6487623],[353774,6487228],[353893,6487086],[354329,6486879],[354743,6487062],[354759,6487061],[354796,6486889],[354926,6485972],[354918,6485941],[354501,6485577],[354454,6485547],[354416,6485578],[354385,6485586],[354273,6485506],[353941,6485045],[353870,6484452],[353876,6484442],[353871,6484302],[353659,6484250],[352934,6484195],[352244,6484209],[350213,6484287],[349854,6484330],[349804,6484057],[349788,6484018],[349300,6482862],[348898,6481761],[348716,6481433],[348824,6481315],[348815,6481284],[348562,6480896],[348586,6480880],[349866,6480374],[349897,6480358],[349992,6479963],[349864,6479428],[349978,6479184],[350861,6478553],[351339,6478154],[351229,6478100],[351336,6477841],[351366,6477779],[351194,6477726],[350888,6477587],[350200,6477263],[349338,6475831],[349278,6475683],[349228,6475323],[349251,6475245],[349266,6475237],[349273,6475190],[349039,6475115],[348733,6475016],[348313,6474997],[347557,6475166],[346875,6475380],[345951,6474952],[345936,6474945],[345334,6474607],[345198,6474373],[345221,6474342],[345559,6473996],[346064,6473772],[346378,6473237],[346535,6472908],[346621,6472672],[346679,6472242],[346687,6472211],[346800,6471912],[346987,6471754],[347002,6471746],[347853,6471488],[348927,6471117],[348958,6471117],[349046,6471288],[349115,6471256],[349154,6471201],[349161,6471154],[349120,6470905],[349103,6470827],[349055,6470718],[349024,6470686],[348813,6470713],[348593,6470602],[347850,6470053],[346960,6469146],[346834,6469081],[346326,6468954],[345117,6468157],[344744,6467848],[344694,6467834],[344618,6467813],[344183,6467192],[344183,6467177],[344363,6467097],[344934,6466755],[345630,6466265],[345506,6465665],[345568,6465586],[345529,6465563],[345527,6465400],[345565,6465244],[345707,6465320],[345777,6465327],[345759,6465147],[345683,6464688],[345603,6464416],[345696,6464392],[346457,6464234],[346515,6463017],[346627,6462564],[346656,6462290],[346663,6462251],[346479,6461801],[346407,6461685],[346051,6461009],[345488,6459923],[345464,6459885],[345240,6460011],[344977,6460305],[344508,6460690],[343792,6460673],[343712,6460456],[343693,6460145],[343683,6459847],[343680,6459606],[343717,6459372],[343981,6459377],[344326,6458905],[344506,6458586],[344629,6458401],[343781,6457983],[343463,6457270],[343283,6456289],[343897,6455651],[344005,6455588],[343950,6455503],[343660,6455163],[343163,6454618],[342421,6454177],[342250,6454125],[342235,6454156],[342028,6454399],[341773,6454590],[341478,6454662],[341044,6454744],[340810,6454832],[340704,6454872],[340480,6455065],[339776,6455404],[339199,6455630],[337530,6456281],[337343,6456236],[336828,6456101],[336771,6455806],[336731,6455658],[336708,6455666],[336577,6455815],[336205,6456173],[335604,6456525],[335565,6456526],[335290,6456334],[335072,6456172],[334727,6455769],[334719,6455738],[334703,6455738],[334082,6455381],[333576,6454946],[333498,6454869],[333475,6454877],[333274,6455011],[333135,6455090],[333096,6455090],[332003,6454461],[331087,6453673],[330820,6453465],[330789,6453442],[330480,6453639],[330435,6453780],[330154,6454419],[329721,6454948],[329706,6454964],[329675,6454964],[328950,6455230],[328458,6455417],[328268,6455516],[328216,6455532],[327779,6455541],[327544,6455321],[327510,6455070],[327411,6454995],[327313,6454998],[327282,6455021],[327106,6454408],[326980,6454246],[326925,6454246],[326809,6454199],[326715,6454137],[326707,6454114],[326488,6453790],[325859,6453973],[325607,6454497],[325135,6454750],[325104,6454750],[325073,6454696],[324969,6454471],[324940,6453434],[324737,6452462],[324385,6452403],[323720,6452642],[322695,6452720],[322486,6452714],[322416,6452691],[321969,6452281],[321586,6451925],[321452,6451864],[321056,6451711],[320900,6451681],[320838,6451658],[320393,6451298],[320433,6450539],[320441,6450523],[320285,6450353],[320277,6450315],[319765,6449909],[318786,6450018],[317994,6450338],[317970,6450361],[317955,6450424],[317879,6450675],[317865,6450791],[317904,6450814],[317502,6451245],[317505,6451721],[318138,6452257],[318766,6451930],[318804,6451899],[318828,6451899],[319256,6452160],[319482,6452330],[319601,6452446],[319950,6453009],[320214,6453584],[320214,6453792],[320116,6454103],[319852,6454641],[319680,6454940],[319464,6455136],[319106,6455942],[318930,6456573],[318900,6456660],[318854,6456746],[318813,6456789],[318501,6457004],[318096,6456921],[318007,6456845],[317876,6457040],[317853,6457095],[317812,6457836],[317798,6458117],[317878,6458538],[318058,6459260],[318134,6459690],[317925,6459785],[317863,6459793],[317615,6459803],[316479,6459205],[315938,6458724],[315695,6458105],[315203,6457246],[315172,6457223],[315118,6457278],[314842,6457599],[314503,6457862],[314181,6457978],[314165,6457916],[314109,6457619],[313832,6457105],[312989,6456348],[312965,6456363],[312796,6456646],[312535,6457091],[312496,6457099],[312410,6456991],[312277,6456813],[311829,6456059],[311225,6455166],[311217,6455158],[311170,6455081],[311084,6454980],[311084,6454949],[310880,6454709],[310490,6454511],[310182,6455009],[310098,6455141],[310075,6455149],[309903,6455049],[309669,6454895],[309397,6454702],[309099,6454408],[309017,6453722],[308994,6453691],[308900,6453622],[308636,6453467],[308502,6453390],[307935,6453110],[307590,6452970],[306870,6453104],[306395,6453223],[306372,6453262],[306079,6453551],[305840,6453819],[305291,6454586],[305276,6454593],[305300,6454632],[306003,6455267],[306963,6456135],[307565,6456684],[307659,6456777],[307528,6456974],[307357,6457493],[307382,6457863],[307315,6458321],[307289,6458344],[307376,6458452],[307828,6458937],[308496,6459758],[308774,6460015],[308852,6460007],[308868,6460077],[308881,6461063],[309587,6461953],[309673,6462069],[309596,6462147],[309271,6462523],[309272,6462577],[309429,6462967],[309491,6462959],[309517,6463333],[309277,6463506],[309262,6463514],[309246,6463592],[309231,6463701],[309256,6463897],[309331,6464083],[309532,6464738],[309567,6465431],[309568,6465548],[309490,6465549],[309475,6465564],[309047,6465801],[308640,6465878],[307614,6465341],[307459,6465373],[306107,6465810],[306076,6465834],[306069,6465857],[305892,6466226],[305813,6466327],[305674,6466484],[304622,6467613],[304118,6467960],[303894,6468101],[303855,6468117],[302334,6468440],[301544,6468559],[301372,6468246],[301356,6468199],[301364,6468199],[301471,6467911],[301697,6467125],[301626,6466192],[301535,6465657],[301318,6465125],[300523,6464739],[300255,6464248],[300423,6463733],[300656,6463232],[300825,6462951],[300902,6462865],[301057,6462740],[301436,6462448],[302123,6461966],[302645,6461545],[302677,6461467],[302559,6461460],[302520,6461421],[302360,6461153],[301717,6460722],[301077,6460352],[300991,6460314],[300960,6460322],[300945,6460431],[300736,6460760],[300365,6461252],[299653,6462176],[299156,6462404],[298838,6462536],[298318,6462698],[297969,6462660],[297516,6462545],[297454,6462507],[297152,6462664],[295795,6463606],[295724,6463660],[295669,6463684],[295607,6463692],[295545,6463606],[295442,6463264],[295403,6463194],[295122,6462789],[295052,6462719],[294912,6462657],[294724,6462643],[294724,6462658],[294492,6463027],[294369,6463191],[293468,6463599],[293413,6463615],[293235,6463693],[293150,6463758],[293089,6463960],[293019,6464117],[292850,6464483],[292842,6464499],[292874,6464655],[292859,6464859],[292851,6464874],[292678,6464828],[292047,6465267],[291670,6465542],[290950,6465427],[289218,6465113],[289031,6465020],[288827,6464896],[288640,6464749],[288478,6464999],[288323,6465328],[288285,6465445],[287850,6465672],[287267,6465838],[286761,6465940],[286722,6465925],[286606,6466059],[286443,6466270],[286273,6466497],[286227,6466622],[286212,6466762],[286197,6466982],[286042,6467146],[286018,6467154],[286019,6467192],[286175,6467434],[286167,6467449],[286051,6467535],[286136,6467566],[286775,6468096],[287120,6468570],[287238,6469012],[287403,6469701],[287551,6469833],[287942,6470098],[287748,6470208],[287276,6470176],[287002,6470538],[286682,6470383],[286424,6470181],[285910,6469855],[285584,6470133],[284650,6470913],[284075,6470930],[284013,6470852],[284013,6470836],[283524,6469026],[283396,6468363],[283571,6467851],[283652,6467795],[283637,6467690],[283466,6467402],[283224,6467052],[283043,6466881],[282346,6466348],[281913,6466220],[281898,6466228],[281728,6466674],[281511,6467166],[281403,6467353],[280984,6468049],[280531,6468742],[280107,6469527],[280084,6469636],[280078,6470151],[279962,6470698],[279822,6470660],[279713,6470660],[279224,6470645],[278748,6470592],[277634,6470337],[277510,6470283],[277306,6470151],[277205,6470159],[275703,6470035],[275625,6470012],[275524,6469848],[275460,6469786],[275047,6469631],[274970,6469577],[274892,6469475],[274892,6469452],[274876,6469452],[274396,6469172],[273832,6468837],[273334,6469009],[273295,6469024],[273271,6468985],[273240,6468845],[273255,6468588],[273232,6468385],[273185,6468230],[272747,6467847],[272732,6467847],[272724,6467777],[272607,6467496],[272334,6466739],[272303,6466638],[272116,6466130],[271654,6464844],[271568,6464591],[271498,6464393],[270585,6461873],[270530,6461702],[270468,6461562],[270344,6461601],[269985,6461469],[269495,6461470],[269212,6461813],[268959,6462414],[268827,6462757],[268703,6463218],[268735,6463413],[268774,6463631],[268782,6463724],[268424,6463873],[267274,6464638],[266876,6464740],[266814,6464756],[266768,6464795],[266674,6464966],[266620,6465163],[266597,6465381],[266535,6465342],[266403,6465029],[266082,6464663],[266067,6464655],[265195,6465078],[264797,6465074],[264644,6465078],[264450,6465203],[264434,6465218],[264458,6465296],[264642,6465883],[264893,6466770],[264917,6466943],[264917,6467115],[265274,6468655],[265709,6469744],[266329,6471375],[266373,6471676],[266210,6472468],[266049,6473148],[266029,6473247],[266065,6473278],[266622,6473371],[267094,6473514],[267305,6474014],[267336,6474131],[267368,6474404],[267391,6474694],[267461,6474796],[267531,6474866],[267570,6474858],[268194,6474740],[268777,6474756],[268785,6474755],[268793,6474810],[268903,6475020],[268927,6475459],[268889,6476036],[268850,6476223],[268819,6476309],[268928,6476357],[269270,6476482],[269488,6476575],[269411,6476786],[269683,6476910],[269980,6477043],[271492,6477690],[271851,6477744],[272638,6477501],[272794,6477312],[272825,6477249],[272864,6477281],[273962,6478149],[274721,6478685],[275032,6478856],[275259,6478973],[275392,6479012],[275400,6479027],[276035,6479363],[276316,6479449],[276554,6479479],[276670,6479479],[276694,6479487],[276940,6479568],[277225,6479712],[277404,6479868],[277474,6479953],[277537,6479992],[277716,6480047],[277818,6480039],[277827,6480210],[277747,6480360],[277709,6480462],[277717,6480774],[277749,6480906],[277741,6480946],[277446,6481478],[277330,6481604],[277081,6481830],[277065,6481830],[277058,6481862],[276761,6482207],[276652,6482340],[276512,6482403],[276318,6482450],[276022,6482435],[275328,6482600],[274495,6483235],[274114,6483696],[273972,6483893],[273887,6484065],[273833,6484190],[273802,6484385],[273767,6484444],[272970,6486178],[272962,6486240],[272931,6486256],[272425,6486105],[272222,6485976],[272135,6485929],[271512,6485758],[271269,6485727],[271214,6485782],[271160,6485782],[270076,6485822],[269327,6485870],[268704,6486380],[268611,6486630],[268524,6486802],[268275,6486966],[268026,6486982],[267948,6486951],[267776,6486904],[267151,6486310],[266847,6485872],[266289,6485522],[265598,6485389],[265481,6485405],[265359,6485453],[265199,6485518],[265096,6485435],[264746,6484897],[264288,6484145],[264084,6483438],[263850,6482684],[263600,6482402],[263585,6482378],[263561,6482363],[263507,6482316],[263281,6482254],[262906,6482215],[262844,6482207],[262535,6482573],[262459,6482985],[262370,6483417],[262165,6483896],[261360,6485089],[260552,6486493],[260154,6487024],[260115,6487071],[260044,6487135],[259959,6487276],[259873,6487506],[259826,6487698],[259811,6487721],[259733,6487776],[259694,6487784],[259686,6487620],[259671,6487604],[258898,6487307],[258577,6487268],[257993,6487087],[257789,6486642],[257844,6486446],[258266,6486657],[258546,6486329],[259062,6485625],[259256,6485336],[259514,6484921],[259552,6484827],[259591,6484570],[259599,6483787],[259101,6483294],[259054,6483263],[259039,6483411],[258726,6484357],[258671,6484444],[258640,6484476],[258406,6484499],[258305,6484499],[258118,6484404],[258040,6484341],[257806,6484146],[257665,6484029],[257082,6483701],[256792,6483545],[256247,6483254],[256224,6483238],[256169,6483223],[255545,6483575],[255115,6484020],[254998,6484215],[254967,6484246],[253999,6484942],[253898,6485020],[253379,6485431],[253121,6485654],[252635,6485500],[252127,6485058],[251410,6484361],[250990,6483978],[250967,6483939],[250858,6483570],[250851,6483539],[250835,6483539],[249322,6483303],[248651,6483037],[248425,6482927],[248340,6482857],[248332,6482833],[248317,6482833],[248231,6482683],[248123,6482574],[248006,6482495],[247864,6482441],[247677,6482433],[247553,6482456],[247327,6482541],[247319,6482565],[247475,6482713],[247506,6482729],[247804,6483083],[247598,6483675],[247520,6483825],[247520,6483856],[247621,6484005],[247480,6484067],[247418,6484082],[246833,6484027],[246249,6483728],[245016,6483718],[244962,6483687],[244892,6483624],[245102,6483336],[244558,6482873],[244160,6482684],[243639,6482668],[243537,6482668],[243365,6482667],[243073,6482702],[242540,6482447],[242509,6482252],[242087,6482516],[242024,6482532],[241838,6482204],[241511,6481647],[241154,6481114],[240478,6480128],[240377,6480026],[240159,6479877],[239342,6479336],[239311,6479320],[239178,6479421],[239069,6479514],[238897,6480007],[239005,6480195],[238981,6480460],[238919,6480715],[238722,6481015],[238565,6481233],[238409,6481412],[238370,6481412],[237853,6482123],[237643,6482317],[237471,6482428],[237253,6482568],[236971,6482707],[236285,6482846],[235996,6482689],[235713,6482382],[235446,6481734],[235431,6481592],[235392,6481482],[235291,6481544],[234790,6481833],[234315,6481941],[233620,6481966],[233297,6481949],[233138,6481600],[232602,6481279],[232328,6481200],[232180,6481160],[232149,6481269],[231959,6482105],[231912,6482379],[231903,6482566],[231926,6482706],[232127,6483239],[232158,6483364],[232047,6483857],[231993,6483912],[231946,6483935],[231915,6483974],[231114,6484742],[230948,6485676],[230302,6485690],[230263,6485697],[230263,6485705],[230173,6486439],[230165,6486462],[230203,6486722],[230211,6486862],[230101,6486877],[229743,6486978],[229773,6487290],[230005,6487841],[230288,6488310],[231270,6489448],[231302,6489464],[231302,6489479],[231262,6489651],[231191,6489948],[231183,6489955],[231097,6490011],[229894,6490703],[229862,6490702],[229808,6490663],[229793,6490640],[228890,6490583],[228519,6490729],[228168,6490892],[227885,6491078],[226969,6491951],[226867,6492053],[226843,6492132],[226866,6492187],[226866,6492304],[226826,6492546],[226810,6492601],[225583,6493089],[225560,6493088],[225529,6493088],[224912,6492945],[224272,6492724],[223713,6492944],[223037,6493219],[222998,6493234],[222975,6493336],[222959,6493359],[222644,6493691],[222002,6494154],[221986,6494162],[221947,6494146],[221724,6494119],[221503,6494120],[221479,6494128],[221067,6494499],[219458,6495293],[218843,6496085],[218672,6496385],[218625,6496440],[218468,6496566],[218265,6496697],[218171,6496736],[218078,6496751],[217734,6496671],[217648,6496609],[217417,6496074],[217278,6495847],[217262,6495847],[217042,6495939],[216643,6496203],[216588,6496258],[216548,6496422],[216374,6496907],[216156,6497351],[215909,6497626],[215669,6498159],[215559,6498650],[215918,6498910],[216353,6499232],[216571,6499399],[217217,6499926],[218052,6500531],[218570,6501454],[218624,6501540],[218616,6501548],[218569,6501713],[218353,6502448],[217965,6502944],[217669,6503197],[217082,6503642],[216689,6503874],[216650,6503882],[216611,6503788],[216541,6503764],[216432,6503771],[216134,6503770],[215892,6503706],[215752,6503641],[215395,6503256],[214420,6502096],[214154,6501274],[213976,6500983],[213802,6500744],[213511,6500447],[212913,6500420],[212267,6500648],[212134,6500723],[212024,6500761],[211938,6500761],[211422,6500733],[211383,6500717],[211297,6500820],[210792,6501545],[210761,6501560],[210651,6501606],[210495,6501598],[210184,6501533],[209605,6501483],[209433,6501537],[209386,6501568],[208827,6502184],[208764,6502356],[208764,6502372],[208704,6503257],[208616,6503569],[208452,6504008],[208118,6504370],[207708,6504780],[206954,6504822],[206393,6505210],[206236,6505420],[206179,6505553],[206186,6505584],[206193,6505735],[206170,6505750],[206130,6505875],[206052,6505945],[205233,6506151],[204439,6506221],[204111,6506230],[203861,6506330],[203049,6506951],[202830,6507139],[202814,6507163],[202680,6507279],[202184,6507730],[201752,6508206],[201432,6508480],[200942,6508780],[200895,6508788],[200769,6508802],[200386,6508768],[200137,6508767],[199651,6508763],[199479,6508762],[199307,6508769],[198013,6509182],[197958,6509190],[197458,6509116],[197242,6509062],[196794,6509087],[196129,6509137],[196113,6509137],[195844,6508515],[195002,6508140],[194940,6508123],[194018,6508077],[193635,6507910],[193329,6507585],[192635,6506780],[192588,6506732],[192588,6506717],[192457,6506512],[192372,6506394],[191533,6506261],[191185,6506211],[190767,6506157],[189997,6506061],[189920,6506037],[189717,6505965],[189172,6505567],[188668,6505172],[188574,6505273],[188534,6505429],[188427,6505835],[188411,6505874],[188396,6505882],[188087,6505915],[188016,6505582],[188025,6505441],[187097,6504556],[185983,6503799],[185889,6503790],[185467,6503752],[185201,6503769],[185076,6503838],[185044,6503877],[185067,6503932],[185191,6504087],[185376,6504320],[185391,6504351],[185391,6504375],[185169,6504827],[185073,6505015],[184995,6505085],[184939,6505108],[184868,6505099],[184628,6504935],[184152,6504888],[183874,6505302],[183858,6505333],[183811,6505372],[183748,6505371],[183663,6505292],[183375,6505233],[183139,6505231],[183100,6505255],[183068,6505373],[183059,6505522],[183046,6506124],[183074,6506400],[183144,6506432],[183206,6506503],[183260,6506613],[183258,6506824],[183091,6507184],[183028,6507262],[182767,6507479],[182735,6507487],[182735,6507534],[182349,6507882],[182073,6508101],[182018,6508155],[181811,6508505],[181605,6508872],[181604,6508966],[181672,6509203],[181825,6509595],[181832,6509666],[181752,6509886],[181655,6510065],[181409,6510502],[181323,6510603],[181038,6510852],[180920,6510921],[180834,6510921],[180717,6510855],[180452,6510837],[180257,6510836],[180090,6510991],[180012,6510982],[179841,6510840],[179640,6510666],[179531,6510618],[179414,6510601],[179303,6510623],[179146,6510731],[178894,6510964],[178601,6511251],[178537,6511346],[178125,6511949],[177287,6512070],[177162,6512085],[176957,6512083],[176591,6511962],[176406,6511716],[175824,6512211],[175319,6513134],[175102,6513783],[174996,6514057],[174941,6514158],[174805,6514470],[174662,6514705],[174504,6514884],[174457,6514915],[174306,6515007],[174196,6515014],[174025,6514957],[173413,6516663],[173535,6517001],[173679,6517427],[173963,6518693],[174038,6519064],[174134,6519613],[174452,6521486],[174563,6522164],[174650,6522816],[174672,6522982],[174913,6525420],[175026,6526615],[175192,6528064],[175237,6528276]],[[333929,6468745],[334091,6467916],[333883,6466883],[333883,6466868],[334038,6466726],[334959,6466242],[335006,6466304],[335054,6466295],[335116,6466256],[335142,6465835],[335167,6465842],[335595,6465979],[336450,6466405],[336997,6466832],[337359,6467426],[337756,6468219],[338081,6468875],[338081,6468921],[338633,6468714],[338943,6468617],[338974,6468625],[339023,6468889],[339178,6469214],[339325,6469226],[339945,6469271],[340141,6469238],[340374,6469197],[341079,6468863],[341280,6468735],[341450,6468601],[341528,6468655],[341536,6468670],[341701,6468809],[341999,6468962],[342014,6468962],[342062,6469025],[342120,6469434],[341987,6470343],[341708,6471403],[341544,6471833],[341505,6471857],[342154,6472059],[343156,6473089],[343758,6473607],[344608,6474482],[344632,6474575],[344531,6474623],[344259,6475086],[344155,6475346],[344247,6475821],[344255,6475852],[344024,6476051],[343984,6476074],[343882,6475989],[343796,6475951],[343516,6475946],[343290,6475948],[342931,6475952],[342500,6476018],[340972,6476409],[340941,6476424],[340754,6476473],[340599,6476482],[340544,6476467],[340658,6476146],[340659,6475316],[340115,6474807],[340100,6474799],[340069,6474807],[339533,6475071],[339486,6475079],[339318,6474921],[339157,6474761],[338456,6473995],[338456,6473979],[338440,6473972],[338446,6472870],[337379,6472524],[336923,6472485],[336884,6472470],[336684,6472707],[336653,6472707],[336497,6472615],[336425,6472584],[336363,6472639],[336094,6472938],[335976,6472830],[335363,6472461],[334861,6472365],[334390,6472337],[334375,6472321],[334334,6472057],[334069,6471519],[333937,6471267],[333755,6470961],[333672,6469306],[333929,6468745]]]}},ac=function(t){D.call(this,t),this._listener=[],t&&!1===t.active?this.set("active",!1):this.set("active",!0)};Ka(ac,D),ac.prototype.setActive=function(t){this.set("active",!0===t)},ac.prototype.getActive=function(){return this.get("active")},function(){function t(t){this.get("active")&&t.context&&this.precompose(t)}function e(t){this.get("active")&&t.context&&this.postcompose(t)}function i(){if(this.renderSync)try{this.renderSync()}catch(t){}else this.changed()}function o(o){this.filters_||(this.filters_=[]),this.filters_.push(o),o.addToLayer&&o.addToLayer(this),o.precompose&&o._listener.push({listener:this.on(["precompose","prerender"],t.bind(o)),target:this}),o.postcompose&&o._listener.push({listener:this.on(["postcompose","postrender"],e.bind(o)),target:this}),o._listener.push({listener:o.on("propertychange",i.bind(this)),target:this}),i.call(this)}function r(t){var e;if(this.filters_||(this.filters_=[]),t){for(e=this.filters_.length-1;e>=0;e--)this.filters_[e]===t&&this.filters_.splice(e,1);for(e=t._listener.length-1;e>=0;e--)t._listener[e].target===this&&(t.removeFromLayer&&t.removeFromLayer(this),M(t._listener[e].listener),t._listener.splice(e,1));i.call(this)}else this.filters_.forEach(function(t){this.removeFilter(t)}.bind(this))}Ba.prototype.addFilter=function(t){console.warn("[OL-EXT] addFilter deprecated on map."),o.call(this,t)},Ba.prototype.removeFilter=function(t){r.call(this,t)},Ba.prototype.getFilters=function(){return this.filters_||[]},xr.prototype.addFilter=function(t){o.call(this,t)},xr.prototype.removeFilter=function(t){r.call(this,t)},xr.prototype.getFilters=function(){return this.filters_||[]}}();var hc=ac,lc=function(t){if(hc.call(this,t=t||{}),t.feature)switch(t.feature.getGeometry().getType()){case"Polygon":case"MultiPolygon":this.feature_=t.feature}this.set("inner",t.inner),this.fillColor_=t.fill&&ys(t.fill.getColor())||"rgba(0,0,0,0.2)"};Ka(lc,hc),lc.prototype.drawFeaturePath_=function(t,e){var i,o=t.context,r=o.canvas,n=t.frameState.pixelRatio;if(t.frameState.coordinateToPixelTransform){var s=t.frameState.coordinateToPixelTransform;if(t.inversePixelTransform){var a=t.inversePixelTransform;i=function(t){return[(t=[t[0]*s[0]+t[1]*s[1]+s[4],t[0]*s[2]+t[1]*s[3]+s[5]])[0]*a[0]-t[1]*a[1]+a[4],-t[0]*a[2]+t[1]*a[3]+a[5]]}}else i=function(t){return[(t[0]*s[0]+t[1]*s[1]+s[4])*n,(t[0]*s[2]+t[1]*s[3]+s[5])*n]}}else s=t.frameState.coordinateToPixelMatrix,i=function(t){return[(t[0]*s[0]+t[1]*s[1]+s[12])*n,(t[0]*s[4]+t[1]*s[5]+s[13])*n]};var h=this.feature_.getGeometry().getCoordinates();function l(t){for(var e=0;e<h.length;e++)for(var r=h[e],n=0;n<r.length;n++){var s=i([r[n][0][0]+t,r[n][0][1]]);o.moveTo(s[0],s[1]);for(var a=1;a<r[n].length;a++)s=i([r[n][a][0]+t,r[n][a][1]]),o.lineTo(s[0],s[1])}}if("Polygon"===this.feature_.getGeometry().getType()&&(h=[h]),o.beginPath(),e&&(o.moveTo(0,0),o.lineTo(r.width,0),o.lineTo(r.width,r.height),o.lineTo(0,r.height),o.lineTo(0,0)),this.get("wrapX")){var u=t.frameState.viewState.projection.getExtent(),c=u[2]-u[0],p=t.frameState.extent,d=this.feature_.getGeometry().getExtent(),f=d[2]-d[1],g=Math.floor((p[0]+f-u[0])/c),_=Math.floor((p[2]-f-u[2])/c)+1;g>_&&([g,_]=[_,g]);for(var y=g;y<=_;y++)l(y*c)}else l(0)},lc.prototype.postcompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,!this.get("inner")),e.fillStyle=this.fillColor_,e.fill("evenodd"),e.restore()}};var uc=lc,cc=function(t){uc.call(this,t=t||{})};Ka(cc,uc),cc.prototype.precompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,this.get("inner")),e.clip("evenodd")}},cc.prototype.postcompose=function(t){this.feature_&&t.context.restore()};const pc=new cc({feature:new Gu(new ur(sc.geometry.coordinates)),inner:!0});pl.addFilter(pc);
//# sourceMappingURL=index.6a10450a.js.map
